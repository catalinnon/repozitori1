{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import{Panel,PanelHeader,Div,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderContext,Header,PanelHeaderSimple,PanelHeaderContent,Placeholder,Tabs,TabsItem,PullToRefresh,Snackbar,Textarea,PanelHeaderBack,PanelHeaderClose,CellButton,Alert}from'@vkontakte/vkui';import Icon16Spinner from'@vkontakte/icons/dist/16/spinner';import Icon16Done from'@vkontakte/icons/dist/16/done';import Icon16Cancel from'@vkontakte/icons/dist/16/cancel';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import Icon16Down from'@vkontakte/icons/dist/16/down';import Icon16Up from'@vkontakte/icons/dist/16/up';import Icon28BugOutline from'@vkontakte/icons/dist/28/bug_outline';import Icon28ReportOutline from'@vkontakte/icons/dist/28/report_outline';import Icon28ShareOutline from'@vkontakte/icons/dist/28/share_outline';import Icon28CancelOutline from'@vkontakte/icons/dist/28/cancel_outline';import Icon28WriteOutline from'@vkontakte/icons/dist/28/write_outline';import Icon28AddCircleOutline from'@vkontakte/icons/dist/28/add_circle_outline';import Icon28HistoryForwardOutline from'@vkontakte/icons/dist/28/history_forward_outline';import Icon28MarketOutline from'@vkontakte/icons/dist/28/market_outline';import Icon28UserOutline from'@vkontakte/icons/dist/28/user_outline';import Icon56HistoryOutline from'@vkontakte/icons/dist/56/history_outline';import Icon56GalleryOutline from'@vkontakte/icons/dist/56/gallery_outline';import Icon56CheckCircleDeviceOutline from'@vkontakte/icons/dist/56/check_circle_device_outline';import Icon56MoneyTransferOutline from'@vkontakte/icons/dist/56/money_transfer_outline';import{StickerImg}from\"./components/StickerImg\";import{StickerButton}from\"./components/StickerButton\";import{StickerDescription}from\"./components/StickerDescription\";import{StickerGrid}from\"./components/StickerGrid\";import{StickerUploadButton}from\"./components/StickerUploadButton\";import{CardElements}from\"./components/CardElements\";import{CardElement}from\"./components/CardElement\";import request from\"request\";var access_token='',upload_url1='';var blueBackground={backgroundColor:'var(--accent)'},redBackground={backgroundColor:'var(--dynamic_red)'};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){if(_this.state.popout!==null){if(_this.state.popout.props.actionsLayout){_this.setState({popout:null});return;}}var activeStory=_this.state.activeStory;var activePanel=activeStory==='tab_main'?_this.state.activePanelShop:activeStory==='tab_other'?_this.state.activePanelOther:'';if(activePanel==='create'&&_this.state.create_panel.hasOwnProperty('stickers_id')){_this.setState({create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]}});}else if(activePanel==='create'&&_this.state.createStickerContextOpened){_this.setState({createStickerContextOpened:false});}var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';if(activeStory==='tab_main'&&activePanel==='main'||activeStory==='tab_other'&&activePanel==='profile'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{var history=activeStory==='tab_main'?_this.state.historyShop:activeStory==='tab_other'?_this.state.historyOther:'';if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();var p=history[history.length-1];_this.setState(_defineProperty({},panel_to_change,p));_this.change_hash(p);}}};_this.state={initialized:false,popout:React.createElement(ScreenSpinner,null),activeStory:'tab_main',slideTabIndex_main:0,slideTabIndex_moderation:0,activePanelShop:\"main\",historyShop:[\"main\"],activePanelOther:\"profile\",historyOther:[\"profile\"],createStickerContextOpened:false,balance_manipulation:false,report_other_visible:false,report_reason_text:'',stickers_panel_new:[],stickers_panel_popular:[],stickers_panel_moderation:[],report_panel_moderation:[],withdraw_panel_moderation:[],sticker_info:{title:\"\",author:\"\",preview:\"\",price:0,description:\"\",stickers:[],sales:0},moderation_sticker_info:{title:\"\",author:\"\",preview:\"\",price:0,description:\"\",stickers_:[],sales:0},user:{first_name:'',last_name:'',photo_100:'',stickers:[],balance:0,stickers_history:[]},create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]},captcha:{text:'',url:'',done:false}};_this.onStoryChange=_this.onStoryChange.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.uploadFile=_this.uploadFile.bind(_assertThisInitialized(_this));_this.toggleCreateStickerContext=_this.toggleCreateStickerContext.bind(_assertThisInitialized(_this));_this.sync=_this.sync.bind(_assertThisInitialized(_this));_this.install=_this.install.bind(_assertThisInitialized(_this));_this.delete=_this.delete.bind(_assertThisInitialized(_this));_this.create_stickers=_this.create_stickers.bind(_assertThisInitialized(_this));_this.go_to_edit=_this.go_to_edit.bind(_assertThisInitialized(_this));_this.report_stickers=_this.report_stickers.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.updateStickers=_this.updateStickers.bind(_assertThisInitialized(_this));_this.updateStickersInfo=_this.updateStickersInfo.bind(_assertThisInitialized(_this));_this.updateUser=_this.updateUser.bind(_assertThisInitialized(_this));_this.updateQuestions=_this.updateQuestions.bind(_assertThisInitialized(_this));_this.updateReportReasons=_this.updateReportReasons.bind(_assertThisInitialized(_this));_this.updateModeration=_this.updateModeration.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));_this.change_hash=_this.change_hash.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();var activeStory=_this2.state.activeStory;var activePanel=activeStory==='tab_main'?_this2.state.activePanelShop:activeStory==='tab_other'?_this2.state.activePanelOther:'';if(activePanel!=='input_captcha'){_this2.back(e);}});bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute,login,c,i,request_params,params,method,request_id,key,value,res_back;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(!(type==='VKWebAppUpdateConfig')){_context.next=8;break;}schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);_context.next=59;break;case 8:if(!(type==='VKWebAppGetUserInfoResult')){_context.next=16;break;}if(_this2.state.initialized){_context.next=14;break;}_context.next=12;return _this2.get('users.auth');case 12:login=_context.sent;if(login.access){/*\n                        data.stickers = [ 0 ];\n                        data.balance = 0;\n                        data.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n                        */_this2.setState({initialized:true,popout:null});_this2.initializeApp();}case 14:_context.next=59;break;case 16:if(!(type==='VKWebAppViewRestore')){_context.next=20;break;}if(_this2.state.popout!==null){_this2.setState({popout:null});}_context.next=59;break;case 20:if(!(type==='VKWebAppCallAPIMethodFailed')){_context.next=59;break;}if(!(data.error_data.error_reason.error_code===14)){_context.next=59;break;}c=_this2.state.captcha;c.done=null;c.url=data.error_data.error_reason.captcha_img;c.sid=data.error_data.error_reason.captcha_sid;_this2.setState({captcha:c,popout:null});_this2.go('input_captcha');i=0;case 29:if(!(i<2)){_context.next=40;break;}if(!(_this2.state.captcha.done===null)){_context.next=36;break;}i--;_context.next=34;return _this2.sleep(1000);case 34:_context.next=37;break;case 36:return _context.abrupt(\"break\",40);case 37:i++;_context.next=29;break;case 40:_this2.setState({popout:React.createElement(ScreenSpinner,null)});request_params=data.error_data.error_reason.request_params;params={};method='';request_id='';for(i=0;i<request_params.length;i++){key=request_params[i].key;value=request_params[i].value;if(key!=='api_id'&&key!=='format'&&key!=='oauth'){if(key==='method'){method=value;}else if(key==='request_id'){request_id=value;}else{params[key]=value;}}}params.access_token=access_token;params.captcha_sid=_this2.state.captcha.sid;params.captcha_key=_this2.state.captcha.text;_context.prev=49;_context.next=52;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":method,\"request_id\":request_id,\"params\":params});case 52:res_back=_context.sent;_this2.setState({captcha:{text:'',url:'',done:false}});_this2.back();_context.next=59;break;case 57:_context.prev=57;_context.t0=_context[\"catch\"](49);case 59:case\"end\":return _context.stop();}}},_callee,null,[[49,57]]);}));return function(_x){return _ref2.apply(this,arguments);};}());this.initializeApp();}},{key:\"initializeApp\",value:function(){var _initializeApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var hash,hash_;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.updateStickers();case 2:_context2.next=4;return this.updateUser();case 4:_context2.next=6;return this.updateQuestions();case 6:_context2.next=8;return this.updateReportReasons();case 8:_context2.next=10;return this.updateModeration();case 10:hash=window.location.hash;if(hash){hash=hash.replace('#','');hash_=hash.split('_');this.setState({activeStory:hash_[0]+'_'+hash_[1]});this.go(hash.substring((hash_[0]+'_'+hash_[1]+'_').length));}else{this.change_hash('main');}case 12:case\"end\":return _context2.stop();}}},_callee2,this);}));function initializeApp(){return _initializeApp.apply(this,arguments);}return initializeApp;}()},{key:\"updateStickers\",value:function(){var _updateStickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this3=this;var response,stickers_panel_new,stickers,i,stickers_,j,stickers_panel_popular;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.get('stickers.get');case 2:response=_context4.sent;this.setState({stickers:response.stickers});stickers_panel_new=[];stickers=this.state.stickers;for(i=0;i<stickers.length;i++){stickers_=[];for(j=0;j<stickers[i].data.length;j++){stickers_.push(React.createElement(StickerImg,{mode:\"small\",src:stickers[i].data[j].url}));}stickers[i].stickers=stickers_;stickers[i].id=i;stickers_panel_new.push(React.createElement(StickerButton,{title:stickers[i].title,description:stickers[i].author,src:stickers[i].preview,price:stickers[i].price,id:\"sticker_\"+i,mode:\"cell\",onClick:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var id,response,user_;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=parseInt(e.currentTarget.id.split('_')[1]);_this3.setState({sticker_info:stickers[id],popout:React.createElement(ScreenSpinner,null)});_context3.next=4;return _this3.get('users.get');case 4:response=_context3.sent;_context3.next=7;return bridge.sendPromise('VKWebAppGetUserInfo');case 7:user_=_context3.sent;_this3.setState({user:_objectSpread({},user_,{},response.user),popout:null});_this3.go('sticker_info');case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}()}));}stickers_panel_new=stickers_panel_new.reverse();stickers_panel_popular=stickers_panel_new.sort(function(itemA,itemB){return(itemA.sales===0?0:itemA.sales.length)-(itemB.sales===0?0:itemB.sales.length);}).reverse();this.setState({stickers_panel_new:stickers_panel_new,stickers_panel_popular:stickers_panel_popular});case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function updateStickers(){return _updateStickers.apply(this,arguments);}return updateStickers;}()},{key:\"updateStickersInfo\",value:function(){var _updateStickersInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.updateStickers();case 2:_context5.next=4;return this.updateUser();case 4:this.setState({sticker_info:this.state.stickers[this.state.sticker_info.id]});case 5:case\"end\":return _context5.stop();}}},_callee5,this);}));function updateStickersInfo(){return _updateStickersInfo.apply(this,arguments);}return updateStickersInfo;}()},{key:\"updateUser\",value:function(){var _updateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _this4=this;var response,user_,user_stickers,i,sticker,user_stickers_history,_loop,_i;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.get('users.get');case 2:response=_context7.sent;_context7.next=5;return bridge.sendPromise('VKWebAppGetUserInfo');case 5:user_=_context7.sent;this.setState({user:_objectSpread({},user_,{},response.user)});user_stickers=[];for(i=0;i<this.state.user.stickers.length;i++){sticker=this.state.stickers[i];user_stickers.push(React.createElement(StickerButton,{src:sticker.preview,id:\"user_sticker_\"+i,mode:\"img\",onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);_this4.setState({activeStory:\"tab_main\",sticker_info:_this4.state.stickers[id]});setTimeout(function(){_this4.go('sticker_info');},50);}}));}this.setState({user_stickers:user_stickers});user_stickers_history=[];_loop=function _loop(_i){var sticker=_this4.state.user.stickers_history[_i];user_stickers_history.push(React.createElement(StickerButton,{title:sticker.title,src:sticker.preview,mode2:sticker.hasOwnProperty('added')?sticker.added?'commerce':'destructive':sticker.hasOwnProperty('deleted')?'secondary':'primary',button:sticker.hasOwnProperty('added')?sticker.added?'Одобрено':'Отклонено':sticker.hasOwnProperty('deleted')?'Отменено':'На проверке',mode:\"cell\",more:sticker.hasOwnProperty('added')===false&&sticker.hasOwnProperty('deleted')===false&&React.createElement(Icon28CancelOutline,{onClick:function onClick(){_this4.setState({popout:React.createElement(Alert,{actionsLayout:\"horizontal\",actions:[{title:'Да',autoclose:true,mode:'destructive',action:function(){var _action=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this4.setState({popout:React.createElement(ScreenSpinner,null)});_context6.next=3;return _this4.get('stickers.cancel_moderation',{stickers_id:_i});case 3:_context6.next=5;return _this4.updateUser();case 5:_this4.setState({popout:null});case 6:case\"end\":return _context6.stop();}}},_callee6);}));function action(){return _action.apply(this,arguments);}return action;}()},{title:'Нет',autoclose:true,mode:'cancel'}],onClose:function onClose(){_this4.setState({popout:null});}},React.createElement(\"h2\",null,\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"),React.createElement(\"p\",null,\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u043E\\u0432?\"))});},fill:'#ff5c5c'})}));};for(_i=0;_i<this.state.user.stickers_history.length;_i++){_loop(_i);}this.setState({user_stickers_history:user_stickers_history});case 14:case\"end\":return _context7.stop();}}},_callee7,this);}));function updateUser(){return _updateUser.apply(this,arguments);}return updateUser;}()},{key:\"updateQuestions\",value:function(){var _updateQuestions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var response,questions,questions_panel,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,val;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.get('questions.get');case 2:response=_context8.sent;questions=response.questions;questions_panel=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context8.prev=8;for(_iterator=questions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){val=_step.value;questions_panel.push(React.createElement(CardElement,{link:val.link,text:val.text}));}_context8.next=16;break;case 12:_context8.prev=12;_context8.t0=_context8[\"catch\"](8);_didIteratorError=true;_iteratorError=_context8.t0;case 16:_context8.prev=16;_context8.prev=17;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 19:_context8.prev=19;if(!_didIteratorError){_context8.next=22;break;}throw _iteratorError;case 22:return _context8.finish(19);case 23:return _context8.finish(16);case 24:this.setState({questions_panel:questions_panel.length>0?questions_panel:null});case 25:case\"end\":return _context8.stop();}}},_callee8,this,[[8,12,16,24],[17,,19,23]]);}));function updateQuestions(){return _updateQuestions.apply(this,arguments);}return updateQuestions;}()},{key:\"updateReportReasons\",value:function(){var _updateReportReasons=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var _this5=this;var response,report_reasons,report_reasons_panel,_loop2,i;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.get('report.getReasons');case 2:response=_context9.sent;report_reasons=response.report_reasons;report_reasons_panel=[];_loop2=function _loop2(i){var val=report_reasons[i];report_reasons_panel.push(React.createElement(CellButton,{onClick:function onClick(){_this5.report_stickers(_this5.state.sticker_info.id,i);}},val));};for(i=0;i<report_reasons.length;i++){_loop2(i);}this.setState({report_reasons_panel:report_reasons_panel.length>0?report_reasons_panel:null});case 8:case\"end\":return _context9.stop();}}},_callee9,this);}));function updateReportReasons(){return _updateReportReasons.apply(this,arguments);}return updateReportReasons;}()},{key:\"updateModeration\",value:function(){var _updateModeration=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){var _this6=this;var stickers,stickers_panel_moderation,i,stickers_,j;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return this.get('moderation.getStickers');case 2:stickers=_context10.sent;stickers=stickers.stickers;stickers_panel_moderation=[];for(i=0;i<stickers.length;i++){stickers_=[];for(j=0;j<stickers[i].stickers.length;j++){stickers_.push(React.createElement(StickerImg,{mode:\"small\",src:stickers[i].stickers[j]}));}stickers[i].stickers_=stickers_;stickers_panel_moderation.push(React.createElement(StickerButton,{title:stickers[i].title,description:stickers[i].author,src:stickers[i].preview,price:stickers[i].price,id:stickers[i],mode:\"cell\",onClick:function onClick(e){var stickers_data=e.currentTarget.id;console.log(stickers_data);_this6.setState({moderation_stickers_info:stickers_data});_this6.go('moderation_stickers_info');}}));}this.setState({stickers_panel_moderation:stickers_panel_moderation});console.log(stickers_panel_moderation);case 8:case\"end\":return _context10.stop();}}},_callee10,this);}));function updateModeration(){return _updateModeration.apply(this,arguments);}return updateModeration;}()},{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(method,params){var str,p,response;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:if(params===undefined||params===null)params={};params.url=window.location.search.replace('?','');str=[];for(p in params){if(params.hasOwnProperty(p)){str.push(encodeURIComponent(p)+\"=\"+encodeURIComponent(params[p]));}}params=str.join(\"&\");_context11.next=7;return fetch('https://ih1705413.vds.myihor.ru:4040/'+method+'?'+params,{method:'GET'}).then(function(res){return res.json();}).then(function(res){return res;});case 7:response=_context11.sent;console.log(response);return _context11.abrupt(\"return\",response);case 10:case\"end\":return _context11.stop();}}},_callee11);}));function get(_x3,_x4){return _get.apply(this,arguments);}return get;}()},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"urlToBase64\",value:function urlToBase64(url){return new Promise(function(resolve){var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){var canvas=document.createElement('CANVAS'),ctx=canvas.getContext('2d'),dataURL;canvas.height=img.height;canvas.width=img.width;ctx.drawImage(img,0,0);dataURL=canvas.toDataURL(\"image/png\");canvas=null;resolve(dataURL);};img.src=url;});}},{key:\"base64ToMultipart\",value:function base64ToMultipart(base64){return new Promise(function(resolve){fetch(base64).then(function(res){return res.blob();}).then(function(blob){var fd=new FormData();var file=new File([blob],\"sticker.png\");fd.append('file',file);resolve(fd);});});}},{key:\"go\",value:function go(panel){var activeStory=this.state.activeStory;var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';var history=activeStory==='tab_main'?this.state.historyShop:activeStory==='tab_other'?this.state.historyOther:'';if(panel.startsWith('sticker_info_')){var stickers_id=panel.split('_')[2];if(this.state.stickers.hasOwnProperty(stickers_id)){this.setState({sticker_info:this.state.stickers[stickers_id]});panel='sticker_info';}else{panel='main';}}else if(panel.startsWith('stickers_report_')){var _stickers_id=panel.split('_')[2];if(this.state.stickers.hasOwnProperty(_stickers_id)){this.setState({sticker_info:this.state.stickers[_stickers_id]});panel='stickers_report';}else{panel='main';}}else if(panel==='stickers_report'){this.setState({report_other_visible:false});}if(history[history.length-1]!==panel){var _this$setState2;history.push(panel);var history_to_change=activeStory==='tab_main'?'historyShop':activeStory==='tab_other'?'historyOther':'';window.history.pushState({panel:panel},'Title');this.setState((_this$setState2={},_defineProperty(_this$setState2,panel_to_change,panel),_defineProperty(_this$setState2,history_to_change,history),_defineProperty(_this$setState2,\"snackbar\",null),_this$setState2));}this.change_hash(panel);}},{key:\"change_hash\",value:function change_hash(panel){var activeStory=this.state.activeStory;if(panel==='sticker_info'||panel==='stickers_report'){panel=panel+'_'+this.state.sticker_info.id;}bridge.send(\"VKWebAppSetLocation\",{\"location\":activeStory+'_'+panel});}},{key:\"onStoryChange\",value:function onStoryChange(e){var _this7=this;var story=e.currentTarget.dataset.story;this.setState({activeStory:story,snackbar:null});if(this.state.activeStory===story){if(story==='tab_main'&&this.state.activePanelShop!=='main'){this.back();}else if(story==='tab_other'&&this.state.activePanelOther!=='profile'){this.back();}}else{var panel_=story==='tab_main'?'activePanelShop':story==='tab_other'?'activePanelOther':'';var panel=this.state[panel_];setTimeout(function(){_this7.change_hash(panel);},150);}}},{key:\"onChange\",value:function onChange(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;var create_panel=this.state.create_panel;create_panel[name]=value;this.setState({create_panel:create_panel});}},{key:\"toggleCreateStickerContext\",value:function toggleCreateStickerContext(){this.setState({createStickerContextOpened:!this.state.createStickerContextOpened});}},{key:\"uploadFile\",value:function(){var _uploadFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(element,evt){var tgt,files,t,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_loop3,_iterator2,_step2;return _regeneratorRuntime.wrap(function _callee13$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:tgt=evt.target||window.event.srcElement,files=tgt.files;t=this;if(!(FileReader&&files&&files.length)){_context14.next=30;break;}_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context14.prev=6;_loop3=/*#__PURE__*/_regeneratorRuntime.mark(function _loop3(){var file,fr;return _regeneratorRuntime.wrap(function _loop3$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:file=_step2.value;fr=new FileReader();fr.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(){var res,res1,res10,stickers_count;return _regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:res=fr.result;//base64 result, to get src -> array[0].props.src\nres1=t.state.create_panel;if(!file.type.includes('image')){_context12.next=16;break;}if(!(element==='upload_sticker_img')){_context12.next=12;break;}res10=res1.hasOwnProperty('uploaded_stickers_img')?res1.uploaded_stickers_img:[];_context12.next=7;return res10.filter(function(val){return val!==undefined;}).length;case 7:_context12.t0=_context12.sent;stickers_count=_context12.t0+1;if(stickers_count<=48){res10.push(React.createElement(StickerImg,{mode:'small',id:'uploaded_sticker_'+res10.length,src:res,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var res01=t.state.create_panel;delete res01.uploaded_stickers_img[id];t.setState({create_panel:res01});}}));res1.uploaded_stickers_img=res10;t.setState({create_panel:res1});}_context12.next=14;break;case 12:res1[element]=res;t.setState({create_panel:res1});case 14:_context12.next=18;break;case 16:res1[element]=null;t.setState({create_panel:res1});case 18:case\"end\":return _context12.stop();}}},_callee12);}));_context13.next=5;return fr.readAsDataURL(file);case 5:case\"end\":return _context13.stop();}}},_loop3);});_iterator2=files[Symbol.iterator]();case 9:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done){_context14.next=14;break;}return _context14.delegateYield(_loop3(),\"t0\",11);case 11:_iteratorNormalCompletion2=true;_context14.next=9;break;case 14:_context14.next=20;break;case 16:_context14.prev=16;_context14.t1=_context14[\"catch\"](6);_didIteratorError2=true;_iteratorError2=_context14.t1;case 20:_context14.prev=20;_context14.prev=21;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return();}case 23:_context14.prev=23;if(!_didIteratorError2){_context14.next=26;break;}throw _iteratorError2;case 26:return _context14.finish(23);case 27:return _context14.finish(20);case 28:_context14.next=30;break;case 30:case\"end\":return _context14.stop();}}},_callee13,this,[[6,16,20,28],[21,,23,27]]);}));function uploadFile(_x5,_x6){return _uploadFile.apply(this,arguments);}return uploadFile;}()},{key:\"showSnackBar\",value:function(){var _showSnackBar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(text,icon,style){var _this8=this;return _regeneratorRuntime.wrap(function _callee14$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:this.setState({snackbar:null});_context15.next=3;return this.sleep(150);case 3:this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this8.setState({snackbar:null});},before:React.createElement(Avatar,{size:24,style:style},icon)},text)});case 4:case\"end\":return _context15.stop();}}},_callee14,this);}));function showSnackBar(_x7,_x8,_x9){return _showSnackBar.apply(this,arguments);}return showSnackBar;}()},{key:\"sync\",value:function(){var _sync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(stickers_id){var _this9=this;var stickers,i,remove,_loop4,_i2;return _regeneratorRuntime.wrap(function _callee18$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});_context20.prev=1;_context20.next=4;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 4:access_token=_context20.sent;access_token=access_token.access_token;_context20.next=8;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.getUploadServer\",\"request_id\":\"upload_server\",\"params\":{\"group_id\":\"193090865\",\"v\":\"5.00\",\"access_token\":access_token}});case 8:upload_url1=_context20.sent;upload_url1=upload_url1.response.upload_url;stickers=this.state.stickers[stickers_id].stickers;if(!this.state.stickers[stickers_id].hasOwnProperty('data')){_context20.next=31;break;}i=0;case 13:if(!(i<this.state.stickers[stickers_id].data.length)){_context20.next=31;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context20.next=27;break;}_context20.prev=15;_context20.next=18;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.stickers[stickers_id].data[i].owner_id,\"doc_id\":this.state.stickers[stickers_id].data[i].doc_id,\"v\":\"5.103\",\"access_token\":access_token}});case 18:remove=_context20.sent;_context20.next=25;break;case 21:_context20.prev=21;_context20.t0=_context20[\"catch\"](15);console.log('error del...');i--;case 25:_context20.next=28;break;case 27:if(this.state.captcha.done===null){i--;}case 28:i++;_context20.next=13;break;case 31:_loop4=/*#__PURE__*/_regeneratorRuntime.mark(function _loop4(_i3){var sticker_url;return _regeneratorRuntime.wrap(function _loop4$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:if(!(_this9.state.captcha.done===false&&_this9.state.activePanelShop==='sticker_info')){_context19.next=6;break;}sticker_url=stickers[_i3].props.src;_context19.next=4;return _this9.urlToBase64('https://murmuring-bastion-20764.herokuapp.com/'+sticker_url).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(base64Img){return _regeneratorRuntime.wrap(function _callee17$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return _this9.base64ToMultipart(base64Img).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(multipart){return _regeneratorRuntime.wrap(function _callee16$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_context17.next=2;return fetch('https://murmuring-bastion-20764.herokuapp.com/'+upload_url1,{method:'POST',body:multipart}).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(res){var file,save;return _regeneratorRuntime.wrap(function _callee15$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.prev=0;file=res.file;_context16.next=4;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.save\",\"request_id\":\"save_graffiti\",\"params\":{\"file\":file,\"v\":\"5.103\",\"access_token\":access_token}});case 4:save=_context16.sent;_context16.next=7;return _this9.get('stickers.sync',{id_:_i3,id:stickers_id,owner_id:save.response.graffiti.owner_id,doc_id:save.response.graffiti.id,img:save.response.graffiti.url,access_key:save.response.graffiti.access_key});case 7:_context16.next=13;break;case 9:_context16.prev=9;_context16.t0=_context16[\"catch\"](0);console.log('error uploading...');_i3--;case 13:_context16.next=15;return _this9.sleep(1000);case 15:case\"end\":return _context16.stop();}}},_callee15,null,[[0,9]]);}));return function(_x13){return _ref7.apply(this,arguments);};}());case 2:case\"end\":return _context17.stop();}}},_callee16);}));return function(_x12){return _ref6.apply(this,arguments);};}());case 2:case\"end\":return _context18.stop();}}},_callee17);}));return function(_x11){return _ref5.apply(this,arguments);};}());case 4:_context19.next=7;break;case 6:if(_this9.state.captcha.done===null){_i3--;}case 7:_i2=_i3;case 8:case\"end\":return _context19.stop();}}},_loop4);});_i2=0;case 33:if(!(_i2<stickers.length)){_context20.next=38;break;}return _context20.delegateYield(_loop4(_i2),\"t1\",35);case 35:_i2++;_context20.next=33;break;case 38:this.showSnackBar('Стикеры синхронизированы',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);_context20.next=45;break;case 41:_context20.prev=41;_context20.t2=_context20[\"catch\"](1);console.log(_context20.t2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 45:this.updateStickersInfo();this.setState({popout:null});case 47:case\"end\":return _context20.stop();}}},_callee18,this,[[1,41],[15,21]]);}));function sync(_x10){return _sync.apply(this,arguments);}return sync;}()},{key:\"install\",value:function(){var _install=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(stickers_id){var stickers,data,i,remove,obj,add,added;return _regeneratorRuntime.wrap(function _callee19$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:this.showSnackBar('Идёт установка стикеров, пожалуйста не выходите из приложения - иначе они могут установиться не правильно',React.createElement(Icon16Spinner,{fill:\"#fff\",width:14,height:14}),blueBackground);this.setState({popout:React.createElement(ScreenSpinner,null)});_context21.prev=2;_context21.next=5;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 5:access_token=_context21.sent;access_token=access_token.access_token;_context21.next=9;return this.get('stickers.get');case 9:stickers=_context21.sent;stickers=stickers.stickers[stickers_id];data=stickers.data;if(!this.state.user.hasOwnProperty('stickers_cache')){_context21.next=35;break;}if(!this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){_context21.next=35;break;}i=0;case 15:if(!(i<this.state.user.stickers_cache[stickers_id].length)){_context21.next=35;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context21.next=29;break;}_context21.prev=17;_context21.next=20;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.user.id,\"doc_id\":this.state.user.stickers_cache[stickers_id][i],\"v\":\"5.103\",\"access_token\":access_token}});case 20:remove=_context21.sent;_context21.next=27;break;case 23:_context21.prev=23;_context21.t0=_context21[\"catch\"](17);console.log('error del...');i--;case 27:_context21.next=30;break;case 29:if(this.state.captcha.done===null){i--;}case 30:_context21.next=32;return this.sleep(1000);case 32:i++;_context21.next=15;break;case 35:i=0;case 36:if(!(i<data.length)){_context21.next=62;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context21.next=56;break;}_context21.prev=38;obj=data[i];_context21.next=42;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.add\",\"request_id\":\"add_doc\",\"params\":{\"owner_id\":obj.owner_id,\"doc_id\":obj.doc_id,\"access_key\":obj.access_key,\"v\":\"5.103\",\"access_token\":access_token}});case 42:add=_context21.sent;_context21.next=45;return this.get('stickers.add',{stickers_id:stickers_id,i:i,doc_id:add.response});case 45:added=_context21.sent;if(!(added.access===false)){_context21.next=48;break;}return _context21.abrupt(\"break\",62);case 48:_context21.next=54;break;case 50:_context21.prev=50;_context21.t1=_context21[\"catch\"](38);console.log('error add...');i--;case 54:_context21.next=57;break;case 56:if(this.state.captcha.done===null){i--;}case 57:_context21.next=59;return this.sleep(1000);case 59:i++;_context21.next=36;break;case 62:this.showSnackBar('Стикеры установлены',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);_context21.next=68;break;case 65:_context21.prev=65;_context21.t2=_context21[\"catch\"](2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 68:this.updateStickersInfo();this.setState({popout:null});case 70:case\"end\":return _context21.stop();}}},_callee19,this,[[2,65],[17,23],[38,50]]);}));function install(_x14){return _install.apply(this,arguments);}return install;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(stickers_id){var i,remove;return _regeneratorRuntime.wrap(function _callee20$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:this.showSnackBar('Идёт очистка стикеров, пожалуйста не выходите из приложения - иначе они могут очиститься не правильно',React.createElement(Icon16Spinner,{fill:\"#fff\",width:14,height:14}),blueBackground);this.setState({popout:React.createElement(ScreenSpinner,null)});_context22.prev=2;_context22.next=5;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 5:access_token=_context22.sent;access_token=access_token.access_token;if(!this.state.user.hasOwnProperty('stickers_cache')){_context22.next=33;break;}if(!this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){_context22.next=33;break;}i=0;case 10:if(!(i<this.state.user.stickers_cache[stickers_id].length)){_context22.next=30;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context22.next=24;break;}_context22.prev=12;_context22.next=15;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.user.id,\"doc_id\":this.state.user.stickers_cache[stickers_id][i],\"v\":\"5.103\",\"access_token\":access_token}});case 15:remove=_context22.sent;_context22.next=22;break;case 18:_context22.prev=18;_context22.t0=_context22[\"catch\"](12);console.log('error delete...');i--;case 22:_context22.next=25;break;case 24:if(this.state.captcha.done===null){i--;}case 25:_context22.next=27;return this.sleep(1000);case 27:i++;_context22.next=10;break;case 30:_context22.next=32;return this.get('stickers.delete',{stickers_id:stickers_id});case 32:this.showSnackBar('Стикеры очищены',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);case 33:_context22.next=38;break;case 35:_context22.prev=35;_context22.t1=_context22[\"catch\"](2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 38:this.updateStickersInfo();this.setState({popout:null});case 40:case\"end\":return _context22.stop();}}},_callee20,this,[[2,35],[12,18]]);}));function _delete(_x15){return _delete2.apply(this,arguments);}return _delete;}()},{key:\"create_stickers\",value:function(){var _create_stickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){var _this$state$create_pa,title,description,price,upload_preview_img,uploaded_stickers_img,preview,stickers,uploaded,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_iterator3,_step3,sticker,i,resp;return _regeneratorRuntime.wrap(function _callee21$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});_this$state$create_pa=this.state.create_panel,title=_this$state$create_pa.title,description=_this$state$create_pa.description,price=_this$state$create_pa.price,upload_preview_img=_this$state$create_pa.upload_preview_img,uploaded_stickers_img=_this$state$create_pa.uploaded_stickers_img;preview='';stickers=[];uploaded=0;_context23.next=7;return request({url:'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',method:'POST',form:{image:upload_preview_img.replace('data:image/png;base64,','')}},function(error,response,body){if(response.statusCode===200){body=JSON.parse(body);var url=body.data.url;preview=url;uploaded++;}else{console.log('error',body);}});case 7:_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context23.prev=10;_iterator3=uploaded_stickers_img[Symbol.iterator]();case 12:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context23.next=22;break;}sticker=_step3.value;if(!(sticker!==undefined)){_context23.next=19;break;}_context23.next=17;return request({url:'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',method:'POST',form:{image:sticker.props.src.replace('data:image/png;base64,','')}},function(error,response,body){if(response.statusCode===200){body=JSON.parse(body);var url=body.data.url;stickers.push(url);uploaded++;}else{console.log('error',body);}});case 17:_context23.next=19;return this.sleep(500);case 19:_iteratorNormalCompletion3=true;_context23.next=12;break;case 22:_context23.next=28;break;case 24:_context23.prev=24;_context23.t0=_context23[\"catch\"](10);_didIteratorError3=true;_iteratorError3=_context23.t0;case 28:_context23.prev=28;_context23.prev=29;if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return();}case 31:_context23.prev=31;if(!_didIteratorError3){_context23.next=34;break;}throw _iteratorError3;case 34:return _context23.finish(31);case 35:return _context23.finish(28);case 36:i=0;case 37:if(!(i<2)){_context23.next=48;break;}if(!(uploaded===uploaded_stickers_img.length+1)){_context23.next=42;break;}return _context23.abrupt(\"break\",48);case 42:i--;_context23.next=45;return this.sleep(500);case 45:i++;_context23.next=37;break;case 48:_context23.next=50;return this.get('stickers.create',{title:title,description:description,price:price,preview:preview,stickers:stickers,stickers_id:this.state.create_panel.hasOwnProperty('stickers_id')?parseInt(this.state.create_panel.stickers_id):null});case 50:resp=_context23.sent;if(!(resp.status==='ok')){_context23.next=56;break;}this.setState({create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]}});_context23.next=55;return this.updateUser();case 55:this.go('stickers_history');case 56:this.setState({popout:null});case 57:case\"end\":return _context23.stop();}}},_callee21,this,[[10,24,28,36],[29,,31,35]]);}));function create_stickers(){return _create_stickers.apply(this,arguments);}return create_stickers;}()},{key:\"go_to_edit\",value:function go_to_edit(){var _this10=this;var create_panel=this.state.create_panel;var stickers_=this.state.sticker_info.stickers;var stickers=[];create_panel.stickers_id=this.state.sticker_info.id;create_panel.title=this.state.sticker_info.title;create_panel.description=this.state.sticker_info.description;create_panel.price=this.state.sticker_info.price;create_panel.upload_preview_img=this.state.sticker_info.preview;for(var i=0;i<stickers_.length;i++){var sticker=stickers_[i];stickers.push(React.createElement(StickerImg,{mode:'small',id:'uploaded_sticker_'+i,src:sticker.props.src,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var create_panel_=_this10.state.create_panel;delete create_panel_.uploaded_stickers_img[id];_this10.setState({create_panel:create_panel_});}}));}create_panel.uploaded_stickers_img=stickers;this.setState({create_panel:create_panel,activeStory:'tab_other'});setTimeout(function(){_this10.go('create');},150);}},{key:\"report_stickers\",value:function(){var _report_stickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(stickers_id,report_reason){return _regeneratorRuntime.wrap(function _callee22$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});if(!(typeof report_reason==='number')){_context24.next=6;break;}_context24.next=4;return this.get('report.send',{stickers_id:stickers_id,report_reason_id:report_reason});case 4:_context24.next=8;break;case 6:_context24.next=8;return this.get('report.send',{stickers_id:stickers_id,report_reason_text:report_reason});case 8:this.setState({popout:null});this.back();this.showSnackBar('Жалоба отправлена, спасибо!',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);case 11:case\"end\":return _context24.stop();}}},_callee22,this);}));function report_stickers(_x16,_x17){return _report_stickers.apply(this,arguments);}return report_stickers;}()},{key:\"render\",value:function render(){var _this11=this;return React.createElement(Epic,{activeStory:this.state.activeStory,tabbar:React.createElement(Tabbar,null,React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_main',\"data-story\":\"tab_main\"},React.createElement(Icon28MarketOutline,null)),React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_other',\"data-story\":\"tab_other\"},React.createElement(Icon28UserOutline,null)))},React.createElement(View,{id:\"tab_main\",activePanel:this.state.activePanelShop,popout:this.state.popout,history:this.state.historyShop,onSwipeBack:this.back,header:false},React.createElement(Panel,{id:\"main\",separator:false},React.createElement(PanelHeaderSimple,{separator:false},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"),this.state.stickers_panel_new.length>0&&React.createElement(Tabs,null,React.createElement(TabsItem,{onClick:function onClick(){return _this11.setState({slideTabIndex_main:0});},selected:this.state.slideTabIndex_main===0},\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0438\"),React.createElement(TabsItem,{onClick:function onClick(){return _this11.setState({slideTabIndex_main:1});},selected:this.state.slideTabIndex_main===1},\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435\")),React.createElement(Separator,null),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){return _regeneratorRuntime.wrap(function _callee23$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_this11.setState({refreshedStickers:true});_context25.next=3;return _this11.updateStickers();case 3:_context25.next=5;return _this11.updateQuestions();case 5:_this11.setState({refreshedStickers:false});case 6:case\"end\":return _context25.stop();}}},_callee23);})),isFetching:this.state.refreshedStickers},this.state.stickers_panel_new.length>0?React.createElement(Gallery,{slideWidth:\"100%\",style:{height:\"100%\",margin:\"8px\"},slideIndex:this.state.slideTabIndex_main,onChange:function onChange(slideIndex){_this11.setState({slideTabIndex_main:slideIndex});}},React.createElement(\"div\",null,React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel_new)),React.createElement(\"div\",null,React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel_popular))):React.createElement(Placeholder,{icon:React.createElement(Icon56GalleryOutline,null),stretched:true},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u043E\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u0447\\u0442\\u043E \\u043D\\u0435\\u0442\"),this.state.snackbar&&this.state.snackbar)),React.createElement(Panel,{id:\"sticker_info\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this11.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){return _regeneratorRuntime.wrap(function _callee24$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_this11.setState({refreshedStickersInfo:true});_context26.next=3;return _this11.updateStickersInfo();case 3:_context26.next=5;return _this11.updateQuestions();case 5:_this11.setState({refreshedStickersInfo:false});case 6:case\"end\":return _context26.stop();}}},_callee24);})),isFetching:this.state.refreshedStickersInfo},React.createElement(Div,null,React.createElement(StickerButton,{title:this.state.sticker_info.title,description:this.state.sticker_info.author+'\\nПродано: '+(this.state.sticker_info.sales===0?0:this.state.sticker_info.sales.length),src:this.state.sticker_info.preview,mode:\"cell\",more:this.state.sticker_info.author_id+''===this.state.user.id+''?React.createElement(Icon28WriteOutline,{onClick:function onClick(){_this11.go_to_edit();},fill:'#ffa000'}):React.createElement(Icon28ReportOutline,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){return _regeneratorRuntime.wrap(function _callee25$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.next=2;return _this11.updateReportReasons();case 2:_this11.go('stickers_report');case 3:case\"end\":return _context27.stop();}}},_callee25);})),fill:'#eb4250'})}),React.createElement(\"div\",{style:{marginLeft:'8px',marginRight:'8px'}},React.createElement(StickerDescription,null,this.state.sticker_info.description),React.createElement(\"div\",{style:{marginTop:'10px'}},this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0?React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{onClick:function onClick(){_this11.install(_this11.state.sticker_info.id);},size:\"xl\",stretched:true},'Установить'),this.state.user.hasOwnProperty('stickers_cache')?this.state.user.stickers_cache.hasOwnProperty(this.state.sticker_info.id)?React.createElement(Button,{style:{marginLeft:'8px'},mode:\"secondary\",onClick:function onClick(){_this11.delete(_this11.state.sticker_info.id);},size:\"xl\",stretched:true},'Очистить'):null:null):React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{size:\"xl\",stretched:true,mode:\"commerce\"},'Получить за '+this.state.sticker_info.price+' руб.')),/*this.state.user.is_admin*/false&&React.createElement(\"div\",{style:{display:'flex',marginTop:'10px'}},React.createElement(Button,{onClick:function onClick(){_this11.sync(_this11.state.sticker_info.id);},size:\"xl\",stretched:true},'Синхронизировать')))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"small\"},this.state.sticker_info.stickers))),this.state.questions_panel&&React.createElement(Div,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(\"h4\",null,\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\")),React.createElement(\"div\",{className:\"centered\"},React.createElement(CardElements,null,this.state.questions_panel))),this.state.snackbar&&this.state.snackbar)),React.createElement(Panel,{id:\"input_captcha\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u0412\\u0432\\u043E\\u0434 \\u043A\\u0430\\u043F\\u0447\\u0438\")),React.createElement(FormLayout,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(\"img\",{width:'60%',src:this.state.captcha.url})),React.createElement(Input,{align:'center',value:this.state.captcha.text,onChange:function onChange(e){var c=_this11.state.captcha;c.text=e.currentTarget.value;_this11.setState({captcha:c});}}),React.createElement(Button,{size:\"xl\",onClick:function onClick(){var c=_this11.state.captcha;c.done=true;_this11.setState({captcha:c});}},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"))),React.createElement(Panel,{id:\"stickers_report\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderClose,{onClick:function onClick(){_this11.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430\")),React.createElement(Group,{header:React.createElement(Header,{mode:\"secondary\"},\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430 \\u0436\\u0430\\u043B\\u043E\\u0431\\u044B\")},this.state.report_reasons_panel&&this.state.report_reasons_panel,React.createElement(CellButton,{onClick:function onClick(){_this11.setState({report_other_visible:!_this11.state.report_other_visible});}},\"\\u0414\\u0440\\u0443\\u0433\\u043E\\u0435\"),this.state.report_other_visible&&React.createElement(FormLayout,null,React.createElement(Textarea,{value:this.state.report_reason_text,onChange:function onChange(e){_this11.setState({report_reason_text:e.currentTarget.value});},top:\"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"}),React.createElement(Button,{onClick:function onClick(){_this11.report_stickers(_this11.state.sticker_info.id,_this11.state.report_reason_text);},disabled:this.state.report_reason_text.length===0,size:\"xl\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"))))),React.createElement(View,{id:\"tab_other\",activePanel:this.state.activePanelOther,popout:this.state.popout,history:this.state.historyOther,onSwipeBack:this.back,header:false},React.createElement(Panel,{id:\"profile\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee26(){return _regeneratorRuntime.wrap(function _callee26$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_this11.setState({refreshedProfile:true});_context28.next=3;return _this11.updateUser();case 3:_this11.setState({refreshedProfile:false});case 4:case\"end\":return _context28.stop();}}},_callee26);})),isFetching:this.state.refreshedProfile},React.createElement(Div,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(Avatar,{src:this.state.user.photo_100,size:100})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"centered\",style:{fontSize:\"large\"}},this.state.user.first_name+' '+this.state.user.last_name),React.createElement(\"br\",null),React.createElement(Group,{separator:\"hide\"},React.createElement(Cell,{asideContent:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.balance_manipulation?'180deg':'0',\")\")}}),onClick:function onClick(){_this11.setState({balance_manipulation:!_this11.state.balance_manipulation});},indicator:this.state.user.balance+' ₽'},\"\\u0412\\u0430\\u0448 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\"),this.state.balance_manipulation&&React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'8px'}},React.createElement(Button,{size:\"l\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee27(){return _regeneratorRuntime.wrap(function _callee27$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:_this11.setState({popout:React.createElement(ScreenSpinner,null)});_context29.prev=1;_context29.next=4;return bridge.sendPromise(\"VKWebAppOpenPayForm\",{\"app_id\":7363654,\"action\":\"transfer-to-group\",\"params\":{group_id:193090865}});case 4:_context29.next=6;return _this11.sleep(1000);case 6:_context29.next=8;return _this11.updateUser();case 8:_context29.next=12;break;case 10:_context29.prev=10;_context29.t0=_context29[\"catch\"](1);case 12:_this11.setState({popout:null});case 13:case\"end\":return _context29.stop();}}},_callee27,null,[[1,10]]);})),before:React.createElement(Icon16Down,null)},\"\\u041F\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C\"),React.createElement(Button,{size:\"l\",before:React.createElement(Icon16Up,null),mode:\"secondary\",style:{marginLeft:8},onClick:function onClick(){if(_this11.state.user.balance>0){}else{_this11.showSnackBar('Ваш баланс равен нулю',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);}}},\"\\u0412\\u044B\\u0432\\u0435\\u0441\\u0442\\u0438\"))),React.createElement(Group,{separator:\"hide\",header:React.createElement(Header,{mode:\"primary\"},\"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")},React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"big\"},this.state.user_stickers,React.createElement(StickerImg,{mode:'big',onClick:function onClick(){_this11.go(\"create\");}},\"+\"))))),this.state.snackbar&&this.state.snackbar)),React.createElement(Panel,{id:\"create\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this11.back();}})},React.createElement(PanelHeaderContent,{aside:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.createStickerContextOpened?'180deg':'0',\")\")}}),onClick:function onClick(){_this11.toggleCreateStickerContext();}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")),React.createElement(PanelHeaderContext,{opened:this.state.createStickerContextOpened,onClose:function onClose(){_this11.toggleCreateStickerContext();}},React.createElement(List,null,React.createElement(Cell,{before:React.createElement(Icon28HistoryForwardOutline,null),onClick:function onClick(){_this11.toggleCreateStickerContext();_this11.go(\"stickers_history\");}},\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"),this.state.user.is_admin&&React.createElement(Cell,{before:React.createElement(Icon28BugOutline,null),onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee28(){return _regeneratorRuntime.wrap(function _callee28$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return _this11.updateModeration();case 2:_this11.toggleCreateStickerContext();_this11.go(\"moderation\");case 4:case\"end\":return _context30.stop();}}},_callee28);}))},\"\\u041C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F\"))),React.createElement(FormLayout,null,React.createElement(Input,{type:\"text\",top:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440-\\u043F\\u0430\\u043A\\u0430\",name:\"title\",value:this.state.create_panel.title,onChange:this.onChange,status:this.state.create_panel.title?this.state.create_panel.title.length<=20?'valid':'error':'error',bottom:this.state.create_panel.title?this.state.create_panel.title.length<=20?'':'Максимальная длина - 20':'Пожалуйста, введите название'}),React.createElement(Textarea,{type:\"text\",top:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",name:\"description\",value:this.state.create_panel.description,onChange:this.onChange,status:this.state.create_panel.description?this.state.create_panel.description.length<=100?'valid':'error':'error',bottom:this.state.create_panel.description?this.state.create_panel.description.length<=100?'':'Максимальная длина - 100':'Пожалуйста, введите описание'}),React.createElement(Input,{type:\"number\",top:\"\\u0426\\u0435\\u043D\\u0430\",name:\"price\",value:this.state.create_panel.price,onChange:this.onChange,status:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'error':'valid':'error':'error',bottom:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'Число должно быть целым':'':'Максимальная цена- 1 000 руб.':'Минимальная цена - 1 руб.'}),React.createElement(StickerUploadButton,{src:this.state.create_panel.upload_preview_img&&this.state.create_panel.upload_preview_img,title:'Превью',description:'Загрузите главную фотографию стикер-пака (128×128px)',onChange:function onChange(event){_this11.uploadFile('upload_preview_img',event);}}),React.createElement(StickerUploadButton,{title:'Стикеры',description:'Загрузите все стикеры (минимум - 4, максимум - 48), которые будут содержаться в паке (128×128px)',onChange:function onChange(event){_this11.uploadFile('upload_sticker_img',event);}}),React.createElement(\"div\",{className:\"centered\",style:{paddingBottom:\"16px\"}},React.createElement(\"div\",{style:{minWidth:\"64px\",maxWidth:\"296px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 64px)\",gridGap:\"10px\"}},this.state.create_panel.uploaded_stickers_img)),React.createElement(Button,{size:\"xl\",onClick:function onClick(){_this11.create_stickers();},disabled:this.state.create_panel.title?this.state.create_panel.description?this.state.create_panel.price>0?this.state.create_panel.title.length<=20?this.state.create_panel.description.length<=100?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?true:this.state.create_panel.upload_preview_img?this.state.create_panel.uploaded_stickers_img?this.state.create_panel.uploaded_stickers_img.filter(function(val){return val!==undefined;}).length>=4?false:true:true:true:true:true:true:true:true:true},\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"))),React.createElement(Panel,{id:\"stickers_history\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this11.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee29(){return _regeneratorRuntime.wrap(function _callee29$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_this11.setState({refreshedStickersHistory:true});_context31.next=3;return _this11.updateUser();case 3:_this11.setState({refreshedStickersHistory:false});case 4:case\"end\":return _context31.stop();}}},_callee29);})),isFetching:this.state.refreshedStickersHistory},this.state.user_stickers_history&&this.state.user_stickers_history.length>0?React.createElement(Div,null,React.createElement(List,null,this.state.user_stickers_history)):React.createElement(Placeholder,{icon:React.createElement(Icon56HistoryOutline,null),header:'Пусто',stretched:true},\"\\u0412\\u044B \\u043F\\u043E\\u043A\\u0430 \\u0435\\u0449\\u0435 \\u043D\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u043B\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"))),React.createElement(Panel,{id:\"moderation\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this11.back();}}),separator:false},React.createElement(PanelHeaderContent,null,\"\\u041C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F\")),React.createElement(Tabs,null,React.createElement(TabsItem,{onClick:function onClick(){return _this11.setState({slideTabIndex_moderation:0});},selected:this.state.slideTabIndex_moderation===0},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"),React.createElement(TabsItem,{onClick:function onClick(){return _this11.setState({slideTabIndex_moderation:1});},selected:this.state.slideTabIndex_moderation===1},\"\\u0416\\u0430\\u043B\\u043E\\u0431\\u044B\"),React.createElement(TabsItem,{onClick:function onClick(){return _this11.setState({slideTabIndex_moderation:2});},selected:this.state.slideTabIndex_moderation===2},\"\\u0412\\u044B\\u0432\\u043E\\u0434 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432\")),React.createElement(Separator,null),React.createElement(Gallery,{slideWidth:\"100%\",style:{height:\"100%\",margin:\"8px\"},slideIndex:this.state.slideTabIndex_moderation,onChange:function onChange(slideIndex){_this11.setState({slideTabIndex_moderation:slideIndex});}},React.createElement(\"div\",null,this.state.stickers_panel_moderation.length>0?React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel_moderation):React.createElement(\"div\",{style:{display:\"flex\",height:\"75vh\"}},React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:\"100%\"}},React.createElement(Placeholder,{icon:React.createElement(Icon56GalleryOutline,null)},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u043E\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u0447\\u0442\\u043E \\u043D\\u0435\\u0442\")))),React.createElement(\"div\",null,this.state.report_panel_moderation.length>0?React.createElement(List,{style:{marginTop:\"15px\"}}):React.createElement(\"div\",{style:{display:\"flex\",height:\"75vh\"}},React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:\"100%\"}},React.createElement(Placeholder,{icon:React.createElement(Icon56CheckCircleDeviceOutline,null)},\"\\u0416\\u0430\\u043B\\u043E\\u0431 \\u043F\\u043E\\u043A\\u0430 \\u0447\\u0442\\u043E \\u043D\\u0435\\u0442\")))),React.createElement(\"div\",null,this.state.withdraw_panel_moderation.length>0?React.createElement(List,{style:{marginTop:\"15px\"}}):React.createElement(\"div\",{style:{display:\"flex\",height:\"75vh\"}},React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:\"100%\"}},React.createElement(Placeholder,{icon:React.createElement(Icon56MoneyTransferOutline,null)},\"\\u0417\\u0430\\u043F\\u0440\\u043E\\u0441\\u043E\\u0432 \\u043D\\u0430 \\u0432\\u044B\\u0432\\u043E\\u0434 \\u0441\\u0440\\u0435\\u0434\\u0441\\u0442\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u0447\\u0442\\u043E \\u043D\\u0435\\u0442\"))))),this.state.snackbar&&this.state.snackbar),React.createElement(Panel,{id:\"moderation_sticker_info\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this11.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\")),React.createElement(Div,null,React.createElement(StickerButton,{title:this.state.sticker_info.title,description:this.state.sticker_info.author,src:this.state.sticker_info.preview,mode:\"cell\",more:this.state.moderation_stickers_info.hasOwnProperty('stickers_id')?React.createElement(Icon28WriteOutline,{fill:'#ffa000'}):React.createElement(Icon28AddCircleOutline,{fill:'#4bb34b'})}),React.createElement(\"div\",{style:{marginLeft:'8px',marginRight:'8px'}},React.createElement(StickerDescription,null,this.state.sticker_info.description),React.createElement(\"div\",{style:{marginTop:'10px'}},React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{onClick:function onClick(){},size:\"xl\",stretched:true},'Одобрить'),React.createElement(Button,{style:{marginLeft:'8px'},mode:\"destructive\",onClick:function onClick(){},size:\"xl\",stretched:true},'Отклонить')),/*this.state.user.is_admin*/false&&React.createElement(\"div\",{style:{display:'flex',marginTop:'10px'}},React.createElement(Button,{onClick:function onClick(){_this11.sync(_this11.state.sticker_info.id);},size:\"xl\",stretched:true},'Синхронизировать')))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"small\"},this.state.sticker_info.stickers_))),this.state.snackbar&&this.state.snackbar)));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/VKStickers2/src/App.js"],"names":["React","bridge","Panel","PanelHeader","Div","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderContext","Header","PanelHeaderSimple","PanelHeaderContent","Placeholder","Tabs","TabsItem","PullToRefresh","Snackbar","Textarea","PanelHeaderBack","PanelHeaderClose","CellButton","Alert","Icon16Spinner","Icon16Done","Icon16Cancel","Icon16Dropdown","Icon16Down","Icon16Up","Icon28BugOutline","Icon28ReportOutline","Icon28ShareOutline","Icon28CancelOutline","Icon28WriteOutline","Icon28AddCircleOutline","Icon28HistoryForwardOutline","Icon28MarketOutline","Icon28UserOutline","Icon56HistoryOutline","Icon56GalleryOutline","Icon56CheckCircleDeviceOutline","Icon56MoneyTransferOutline","StickerImg","StickerButton","StickerDescription","StickerGrid","StickerUploadButton","CardElements","CardElement","request","access_token","upload_url1","blueBackground","backgroundColor","redBackground","App","props","back","state","popout","actionsLayout","setState","activeStory","activePanel","activePanelShop","activePanelOther","create_panel","hasOwnProperty","title","preview","price","description","stickers","createStickerContextOpened","panel_to_change","send","history","historyShop","historyOther","length","pop","p","change_hash","initialized","slideTabIndex_main","slideTabIndex_moderation","balance_manipulation","report_other_visible","report_reason_text","stickers_panel_new","stickers_panel_popular","stickers_panel_moderation","report_panel_moderation","withdraw_panel_moderation","sticker_info","author","sales","moderation_sticker_info","stickers_","user","first_name","last_name","photo_100","balance","stickers_history","captcha","text","url","done","onStoryChange","bind","onChange","uploadFile","toggleCreateStickerContext","sync","install","delete","create_stickers","go_to_edit","report_stickers","componentDidMount","initializeApp","updateStickers","updateStickersInfo","updateUser","updateQuestions","updateReportReasons","updateModeration","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","get","login","access","error_data","error_reason","error_code","c","captcha_img","sid","captcha_sid","i","sleep","request_params","params","method","request_id","key","captcha_key","sendPromise","res_back","hash","location","replace","hash_","split","substring","response","j","push","id","parseInt","currentTarget","user_","reverse","sort","itemA","itemB","user_stickers","sticker","setTimeout","user_stickers_history","added","autoclose","mode","action","stickers_id","questions","questions_panel","val","link","report_reasons","report_reasons_panel","stickers_data","moderation_stickers_info","search","str","encodeURIComponent","join","fetch","then","res","json","ms","Promise","resolve","img","Image","crossOrigin","onload","canvas","createElement","ctx","getContext","dataURL","height","width","drawImage","toDataURL","src","base64","blob","fd","FormData","file","File","append","panel","startsWith","history_to_change","pushState","story","dataset","snackbar","panel_","name","element","evt","tgt","target","event","srcElement","files","t","FileReader","fr","result","res1","includes","res10","uploaded_stickers_img","filter","stickers_count","res01","readAsDataURL","icon","style","upload_url","owner_id","doc_id","remove","sticker_url","urlToBase64","base64Img","base64ToMultipart","multipart","save","id_","graffiti","access_key","showSnackBar","stickers_cache","obj","add","upload_preview_img","uploaded","form","image","error","statusCode","JSON","parse","resp","status","create_panel_","report_reason","report_reason_id","refreshedStickers","margin","slideIndex","marginTop","refreshedStickersInfo","author_id","marginLeft","marginRight","indexOf","display","refreshedProfile","fontSize","transform","justifyContent","group_id","is_admin","toString","paddingBottom","minWidth","maxWidth","gridTemplateColumns","gridGap","refreshedStickersHistory","alignItems","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\n\nimport { Panel, PanelHeader, Div , View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder, Tabs,\n\tTabsItem, PullToRefresh, Snackbar, Textarea, PanelHeaderBack, PanelHeaderClose, CellButton, Alert  } from '@vkontakte/vkui';\n\nimport Icon16Spinner from '@vkontakte/icons/dist/16/spinner';\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon16Down from '@vkontakte/icons/dist/16/down';\nimport Icon16Up from '@vkontakte/icons/dist/16/up';\nimport Icon28BugOutline from '@vkontakte/icons/dist/28/bug_outline';\nimport Icon28ReportOutline from '@vkontakte/icons/dist/28/report_outline';\nimport Icon28ShareOutline from '@vkontakte/icons/dist/28/share_outline';\nimport Icon28CancelOutline from '@vkontakte/icons/dist/28/cancel_outline';\nimport Icon28WriteOutline from '@vkontakte/icons/dist/28/write_outline';\nimport Icon28AddCircleOutline from '@vkontakte/icons/dist/28/add_circle_outline';\nimport Icon28HistoryForwardOutline from '@vkontakte/icons/dist/28/history_forward_outline';\nimport Icon28MarketOutline from '@vkontakte/icons/dist/28/market_outline';\nimport Icon28UserOutline from '@vkontakte/icons/dist/28/user_outline';\nimport Icon56HistoryOutline from '@vkontakte/icons/dist/56/history_outline';\nimport Icon56GalleryOutline from '@vkontakte/icons/dist/56/gallery_outline';\nimport Icon56CheckCircleDeviceOutline from '@vkontakte/icons/dist/56/check_circle_device_outline';\nimport Icon56MoneyTransferOutline from '@vkontakte/icons/dist/56/money_transfer_outline';\n\nimport {StickerImg} from \"./components/StickerImg\";\nimport {StickerButton} from \"./components/StickerButton\";\nimport {StickerDescription} from \"./components/StickerDescription\";\nimport {StickerGrid} from \"./components/StickerGrid\";\nimport {StickerUploadButton} from \"./components/StickerUploadButton\";\nimport {CardElements} from \"./components/CardElements\";\nimport {CardElement} from \"./components/CardElement\";\n\nimport request from \"request\";\n\nlet access_token = '', upload_url1 = '';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, redBackground = {\n\tbackgroundColor: 'var(--dynamic_red)'\n};\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinitialized: false,\n\t\t\tpopout: <ScreenSpinner/>,\n\t\t\tactiveStory: 'tab_main',\n\t\t\tslideTabIndex_main: 0,\n\t\t\tslideTabIndex_moderation: 0,\n\t\t\tactivePanelShop: \"main\",\n\t\t\thistoryShop: [\"main\"],\n\t\t\tactivePanelOther: \"profile\",\n\t\t\thistoryOther: [\"profile\"],\n\t\t\tcreateStickerContextOpened: false,\n\t\t\tbalance_manipulation: false,\n\t\t\treport_other_visible: false,\n\t\t\treport_reason_text: '',\n\t\t\tstickers_panel_new: [],\n\t\t\tstickers_panel_popular: [],\n\t\t\tstickers_panel_moderation: [],\n\t\t\treport_panel_moderation: [],\n\t\t\twithdraw_panel_moderation: [],\n\t\t\tsticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers: [], sales: 0 },\n\t\t\tmoderation_sticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers_: [], sales: 0 },\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: '',\n\t\t\t\tstickers:[ ],\n\t\t\t\tbalance: 0,\n\t\t\t\tstickers_history: [ ]\n\t\t\t},\n\t\t\tcreate_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] },\n\t\t\tcaptcha : { text: '', url: '', done: false }\n\t\t};\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.uploadFile = this.uploadFile.bind(this);\n\t\tthis.toggleCreateStickerContext = this.toggleCreateStickerContext.bind(this);\n\t\tthis.sync = this.sync.bind(this);\n\t\tthis.install = this.install.bind(this);\n\t\tthis.delete = this.delete.bind(this);\n\t\tthis.create_stickers = this.create_stickers.bind(this);\n\t\tthis.go_to_edit = this.go_to_edit.bind(this);\n\t\tthis.report_stickers = this.report_stickers.bind(this);\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.updateStickers = this.updateStickers.bind(this);\n\t\tthis.updateStickersInfo = this.updateStickersInfo.bind(this);\n\t\tthis.updateUser = this.updateUser.bind(this);\n\t\tthis.updateQuestions = this.updateQuestions.bind(this);\n\t\tthis.updateReportReasons = this.updateReportReasons.bind(this);\n\t\tthis.updateModeration = this.updateModeration.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tlet activeStory = this.state.activeStory;\n\t\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\t\tif(activePanel !== 'input_captcha') {\n\t\t\t\tthis.back(e);\n\t\t\t}\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tif(!this.state.initialized){\n\t\t\t\t\tlet login = await this.get('users.auth');\n\t\t\t\t\tif(login.access){\n\t\t\t\t\t\t/*\n                        data.stickers = [ 0 ];\n                        data.balance = 0;\n                        data.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n                        */\n\t\t\t\t\t\tthis.setState({ initialized: true, popout: null });\n\t\t\t\t\t\tthis.initializeApp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'VKWebAppViewRestore'){\n\t\t\t\tif(this.state.popout !== null){\n\t\t\t\t\tthis.setState({ popout: null });\n\t\t\t\t}\n\t\t\t} else if (type === 'VKWebAppCallAPIMethodFailed'){\n\t\t\t\tif(data.error_data.error_reason.error_code === 14){\n\t\t\t\t\tlet c = this.state.captcha;\n\t\t\t\t\tc.done = null;\n\t\t\t\t\tc.url = data.error_data.error_reason.captcha_img;\n\t\t\t\t\tc.sid = data.error_data.error_reason.captcha_sid;\n\t\t\t\t\tthis.setState({ captcha: c, popout: null });\n\t\t\t\t\tthis.go('input_captcha');\n\t\t\t\t\tfor(var i = 0; i < 2; i++){\n\t\t\t\t\t    if(this.state.captcha.done === null){\n\t\t\t\t\t        i--;\n                            await this.sleep(1000);\n                        }else{\n\t\t\t\t\t        break;\n                        }\n                    }\n\n\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\t\t\t\tlet request_params = data.error_data.error_reason.request_params;\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tlet method = '';\n\t\t\t\t\tlet request_id = '';\n\t\t\t\t\tfor(var i = 0; i < request_params.length; i++){\n\t\t\t\t\t\tlet key = request_params[i].key;\n\t\t\t\t\t\tlet value = request_params[i].value;\n\t\t\t\t\t\tif(key !== 'api_id' && key !== 'format' && key !== 'oauth'){\n\t\t\t\t\t\t\tif(key === 'method'){\n\t\t\t\t\t\t\t\tmethod = value;\n\t\t\t\t\t\t\t}else if (key === 'request_id'){\n\t\t\t\t\t\t\t\trequest_id = value;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tparams[key] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tparams.access_token = access_token;\n\t\t\t\t\tparams.captcha_sid = this.state.captcha.sid;\n\t\t\t\t\tparams.captcha_key = this.state.captcha.text;\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res_back = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\"method\": method,\n\t\t\t\t\t\t\t\"request_id\": request_id,\n\t\t\t\t\t\t\t\"params\": params\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setState({ captcha : { text: '', url: '', done: false } });\n\t\t\t\t\t\tthis.back();\n\t\t\t\t\t}catch (e) {\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.initializeApp();\n\t}\n\n\tasync initializeApp() {\n\t\tawait this.updateStickers();\n\t\tawait this.updateUser();\n\t\tawait this.updateQuestions();\n\t\tawait this.updateReportReasons();\n\t\tawait this.updateModeration();\n\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tlet hash_ = hash.split('_');\n\t\t\tthis.setState({ activeStory: hash_[0]+'_'+hash_[1] });\n\t\t\tthis.go(hash.substring((hash_[0]+'_'+hash_[1]+'_').length));\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\t}\n\n\tasync updateStickers() {\n\t\tlet response = await this.get('stickers.get');\n\t\tthis.setState({stickers: response.stickers});\n\t\tlet stickers_panel_new = [];\n\t\tlet stickers = this.state.stickers;\n\t\tfor (let i = 0; i < stickers.length; i++) {\n\t\t\tlet stickers_ = [];\n\t\t\tfor (let j = 0; j < stickers[i].data.length; j++) {\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<StickerImg mode={\"small\"} src={stickers[i].data[j].url}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers = stickers_;\n\t\t\tstickers[i].id = i;\n\t\t\tstickers_panel_new.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={stickers[i].title}\n\t\t\t\t\tdescription={stickers[i].author}\n\t\t\t\t\tsrc={stickers[i].preview}\n\t\t\t\t\tprice={stickers[i].price}\n\t\t\t\t\tid={\"sticker_\" + i}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[1]);\n\t\t\t\t\t\tthis.setState({sticker_info: stickers[id], popout: <ScreenSpinner/>});\n\t\t\t\t\t\tlet response = await this.get('users.get');\n\t\t\t\t\t\tlet user_ = await bridge.sendPromise('VKWebAppGetUserInfo');\n\t\t\t\t\t\tthis.setState({user: {...user_, ...response.user}, popout: null});\n\t\t\t\t\t\tthis.go('sticker_info');\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tstickers_panel_new = stickers_panel_new.reverse();\n\t\tlet stickers_panel_popular = stickers_panel_new.sort(function (itemA, itemB) {\n\t\t\treturn (itemA.sales === 0 ? 0 : itemA.sales.length) - (itemB.sales === 0 ? 0 : itemB.sales.length);\n\t\t}).reverse();\n\t\tthis.setState({stickers_panel_new, stickers_panel_popular});\n\t}\n\tasync updateStickersInfo() {\n\t\tawait this.updateStickers();\n\t\tawait this.updateUser();\n\t\tthis.setState({ sticker_info: this.state.stickers[this.state.sticker_info.id] });\n\t}\n\tasync updateUser() {\n\t\tlet response = await this.get('users.get');\n\t\tlet user_ = await bridge.sendPromise('VKWebAppGetUserInfo');\n\t\tthis.setState({user: {...user_, ...response.user}});\n\t\tlet user_stickers = [];\n\t\tfor (let i = 0; i < this.state.user.stickers.length; i++) {\n\t\t\tlet sticker = this.state.stickers[i];\n\t\t\tuser_stickers.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tid={\"user_sticker_\" + i}\n\t\t\t\t\tmode={\"img\"}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tthis.setState({activeStory: \"tab_main\", sticker_info: this.state.stickers[id]});\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.go('sticker_info');\n\t\t\t\t\t\t\t}, 50)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({user_stickers});\n\n\t\tlet user_stickers_history = [];\n\t\tfor (let i = 0; i < this.state.user.stickers_history.length; i++) {\n\t\t\tlet sticker = this.state.user.stickers_history[i];\n\t\t\tuser_stickers_history.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={sticker.title}\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tmode2={sticker.hasOwnProperty('added') ? (sticker.added ? 'commerce' : 'destructive') : sticker.hasOwnProperty('deleted') ? 'secondary' : 'primary'}\n\t\t\t\t\tbutton={sticker.hasOwnProperty('added') ? (sticker.added ? 'Одобрено' : 'Отклонено') : sticker.hasOwnProperty('deleted') ? 'Отменено' : 'На проверке'}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tmore={\n\t\t\t\t\t\t(sticker.hasOwnProperty('added') === false && sticker.hasOwnProperty('deleted') === false) &&\n\t\t\t\t\t\t<Icon28CancelOutline onClick={()=>{\n\t\t\t\t\t\t\tthis.setState({ popout:\n\t\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\tmode: 'destructive',\n\t\t\t\t\t\t\t\t\t\t\taction: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.get('stickers.cancel_moderation',{ stickers_id: i });\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: null });\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\tmode: 'cancel'\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t\tonClose={()=>{ this.setState({ popout: null }); }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<h2>Подтвердите действие</h2>\n\t\t\t\t\t\t\t\t\t\t<p>Вы уверены, что хотите отменить модерацию стикеров?</p>\n\t\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}} fill={'#ff5c5c'}/>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({user_stickers_history});\n\t}\n\tasync updateQuestions() {\n\t\tlet response = await this.get('questions.get');\n\t\tlet questions = response.questions;\n\t\tlet questions_panel = [];\n\t\tfor(let val of questions){\n\t\t\tquestions_panel.push(<CardElement link={val.link} text={val.text}/>);\n\t\t}\n\n\t\tthis.setState({ questions_panel: questions_panel.length > 0 ? questions_panel : null })\n\t}\n\tasync updateReportReasons() {\n\t\tlet response = await this.get('report.getReasons');\n\t\tlet report_reasons = response.report_reasons;\n\t\tlet report_reasons_panel = [];\n\t\tfor(let i = 0; i < report_reasons.length; i++){\n\t\t\tlet val = report_reasons[i];\n\t\t\treport_reasons_panel.push(<CellButton onClick={()=>{ this.report_stickers(this.state.sticker_info.id, i); }} >{val}</CellButton>);\n\t\t}\n\n\t\tthis.setState({ report_reasons_panel: report_reasons_panel.length > 0 ? report_reasons_panel : null })\n\t}\n\tasync updateModeration() {\n\t\tlet stickers = await this.get('moderation.getStickers');\n\t\tstickers = stickers.stickers;\n\t\tlet stickers_panel_moderation = [];\n\t\tfor (let i = 0; i < stickers.length; i++) {\n\t\t\tlet stickers_ = [];\n\t\t\tfor (let j = 0; j < stickers[i].stickers.length; j++) {\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<StickerImg mode={\"small\"} src={stickers[i].stickers[j]}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers_ = stickers_;\n\t\t\tstickers_panel_moderation.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={stickers[i].title}\n\t\t\t\t\tdescription={stickers[i].author}\n\t\t\t\t\tsrc={stickers[i].preview}\n\t\t\t\t\tprice={stickers[i].price}\n\t\t\t\t\tid={stickers[i]}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tlet stickers_data = e.currentTarget.id;\n\t\t\t\t\t\tconsole.log(stickers_data);\n\t\t\t\t\t\tthis.setState({moderation_stickers_info: stickers_data});\n\t\t\t\t\t\tthis.go('moderation_stickers_info');\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({stickers_panel_moderation});\n\t\tconsole.log(stickers_panel_moderation);\n\t}\n\tasync get(method, params) {\n\t\tif(params === undefined || params === null) params = {};\n\t\tparams.url = window.location.search.replace('?', '');\n\t\tlet str = [];\n\t\tfor (let p in params)\n\t\t\tif (params.hasOwnProperty(p)) {\n\t\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(params[p]));\n\t\t\t}\n\t\tparams = str.join(\"&\");\n\t\tlet response = await fetch('https://ih1705413.vds.myihor.ru:4040/'+method+'?'+params, {method: 'GET'})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\treturn res;\n\t\t\t});\n\t\tconsole.log(response);\n\t\treturn response;\n\t}\n\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\turlToBase64(url){\n\t\treturn new Promise(resolve => {\n\t\t\tlet img = new Image();\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.onload = function(){\n\t\t\t\tlet canvas = document.createElement('CANVAS'),\n\t\t\t\t\tctx = canvas.getContext('2d'), dataURL;\n\t\t\t\tcanvas.height = img.height;\n\t\t\t\tcanvas.width = img.width;\n\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t\tdataURL = canvas.toDataURL(\"image/png\");\n\t\t\t\tcanvas = null;\n\t\t\t\tresolve(dataURL);\n\t\t\t};\n\t\t\timg.src = url;\n\t\t});\n\t}\n\tbase64ToMultipart(base64) {\n\t\treturn new Promise(resolve => {\n\t\t\tfetch(base64)\n\t\t\t\t.then(res => res.blob())\n\t\t\t\t.then(blob => {\n\t\t\t\t\tconst fd = new FormData();\n\t\t\t\t\tconst file = new File([blob], \"sticker.png\");\n\t\t\t\t\tfd.append('file', file);\n\t\t\t\t\tresolve(fd);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tback = () => {\n\t\tif(this.state.popout !== null){\n\t\t\tif(this.state.popout.props.actionsLayout){\n\t\t\t\tthis.setState({ popout: null });\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\tif(activePanel === 'create' && this.state.create_panel.hasOwnProperty('stickers_id')){\n\t\t\tthis.setState({ create_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] } });\n\t\t}else if(activePanel === 'create' && this.state.createStickerContextOpened){\n\t\t\tthis.setState({ createStickerContextOpened: false });\n\t\t}\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tif((activeStory === 'tab_main' && activePanel==='main') || (activeStory === 'tab_other' && activePanel==='profile')){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({[panel_to_change]: p});\n\t\t\t\tthis.change_hash(p);\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\tif(panel.startsWith('sticker_info_')){\n\t\t\tlet stickers_id = panel.split('_')[2];\n\t\t\tif(this.state.stickers.hasOwnProperty(stickers_id)){\n\t\t\t\tthis.setState({ sticker_info: this.state.stickers[stickers_id] });\n\t\t\t\tpanel = 'sticker_info';\n\t\t\t}else{\n\t\t\t\tpanel = 'main';\n\t\t\t}\n\t\t}else if (panel.startsWith('stickers_report_')){\n\t\t\tlet stickers_id = panel.split('_')[2];\n\t\t\tif(this.state.stickers.hasOwnProperty(stickers_id)){\n\t\t\t\tthis.setState({ sticker_info: this.state.stickers[stickers_id] });\n\t\t\t\tpanel = 'stickers_report';\n\t\t\t}else{\n\t\t\t\tpanel = 'main';\n\t\t\t}\n\t\t}else if (panel === 'stickers_report'){\n\t\t\tthis.setState({ report_other_visible: false });\n\t\t}\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\tlet history_to_change = activeStory === 'tab_main' ? 'historyShop' : activeStory === 'tab_other' ? 'historyOther' : '';\n\t\t\twindow.history.pushState({panel: panel}, 'Title');\n\t\t\tthis.setState({[panel_to_change]: panel, [history_to_change]: history, snackbar: null});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tlet activeStory = this.state.activeStory;\n\t\tif(panel === 'sticker_info' || panel === 'stickers_report'){\n\t\t\tpanel = panel+'_'+this.state.sticker_info.id;\n\t\t}\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": activeStory+'_'+panel});\n\t}\n\n\tonStoryChange (e) {\n\t\tlet story = e.currentTarget.dataset.story;\n\t\tthis.setState({ activeStory: story, snackbar: null });\n\n\t\tif(this.state.activeStory===story){\n\t\t\tif(story==='tab_main' && this.state.activePanelShop !== 'main'){\n\t\t\t\tthis.back();\n\t\t\t}else if(story==='tab_other' && this.state.activePanelOther !== 'profile'){\n\t\t\t\tthis.back();\n\t\t\t}\n\t\t}else{\n\t\t\tlet panel_ = story === 'tab_main' ? 'activePanelShop' : story === 'tab_other' ? 'activePanelOther' : '';\n\t\t\tlet panel = this.state[panel_];\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.change_hash(panel);\n\t\t\t}, 150);\n\t\t}\n\t}\n\tonChange(e) {\n\t\tconst { name, value } = e.currentTarget;\n\t\tlet create_panel = this.state.create_panel;\n\t\tcreate_panel[name] = value;\n\t\tthis.setState({ create_panel: create_panel });\n\t}\n\ttoggleCreateStickerContext () {\n\t\tthis.setState({ createStickerContextOpened: !this.state.createStickerContextOpened });\n\t}\n\tasync uploadFile(element, evt) {\n\t\tlet tgt = evt.target || window.event.srcElement,\n\t\t\tfiles = tgt.files;\n\t\tconst t = this;\n\n\t\tif (FileReader && files && files.length) {\n\t\t\tfor (let file of files) {\n\t\t\t\tlet fr = new FileReader();\n\t\t\t\tfr.onload = async function () {\n\t\t\t\t\tlet res = fr.result; //base64 result, to get src -> array[0].props.src\n\t\t\t\t\tlet res1 = t.state.create_panel;\n\t\t\t\t\tif (file.type.includes('image')) {\n\t\t\t\t\t\tif (element === 'upload_sticker_img') {\n\t\t\t\t\t\t\tlet res10 = res1.hasOwnProperty('uploaded_stickers_img') ? res1.uploaded_stickers_img : [];\n\t\t\t\t\t\t\tlet stickers_count = await res10.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val !== undefined;\n\t\t\t\t\t\t\t}).length + 1;\n\t\t\t\t\t\t\tif (stickers_count <= 48) {\n\t\t\t\t\t\t\t\tres10.push(\n\t\t\t\t\t\t\t\t\t<StickerImg\n\t\t\t\t\t\t\t\t\t\tmode={'small'}\n\t\t\t\t\t\t\t\t\t\tid={'uploaded_sticker_' + res10.length}\n\t\t\t\t\t\t\t\t\t\tsrc={res}\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\t\t\t\t\t\tlet res01 = t.state.create_panel;\n\t\t\t\t\t\t\t\t\t\t\tdelete res01.uploaded_stickers_img[id];\n\t\t\t\t\t\t\t\t\t\t\tt.setState({create_panel: res01});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tres1.uploaded_stickers_img = res10;\n\t\t\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres1[element] = res;\n\t\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tres1[element] = null;\n\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tawait fr.readAsDataURL(file);\n\t\t\t}\n\t\t}\n\t\t// Not supported\n\t\telse {\n\t\t\t// fallback -- perhaps submit the input to an iframe and temporarily store\n\t\t\t// them on the server until the user's session ends.\n\t\t}\n\t}\n\tasync showSnackBar (text, icon, style){\n\t\tthis.setState({ snackbar: null });\n\t\tawait this.sleep(150);\n\t\tthis.setState({ snackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t\tbefore={<Avatar size={24} style={style}>{icon}</Avatar>}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\n\tasync sync(stickers_id) {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tupload_url1 = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\"method\": \"docs.getUploadServer\", \"request_id\": \"upload_server\", \"params\": {\"group_id\":\"193090865\", \"v\":\"5.00\", \"access_token\":access_token}});\n\t\t\tupload_url1 = upload_url1.response.upload_url;\n\t\t\tlet stickers = this.state.stickers[stickers_id].stickers;\n\n\t\t\tif (this.state.stickers[stickers_id].hasOwnProperty('data')) {\n\t\t\t\tfor(var i = 0; i < this.state.stickers[stickers_id].data.length; i++){\n\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\"params\": {\n\t\t\t\t\t\t\t\t\t\"owner_id\": this.state.stickers[stickers_id].data[i].owner_id,\n\t\t\t\t\t\t\t\t\t\"doc_id\": this.state.stickers[stickers_id].data[i].doc_id,\n\t\t\t\t\t\t\t\t\t\"v\": \"5.103\",\n\t\t\t\t\t\t\t\t\t\"access_token\": access_token\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log('error del...');\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let i = 0; i < stickers.length; i++){\n\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\tlet sticker_url = stickers[i].props.src;\n\t\t\t\t\tawait this.urlToBase64('https://murmuring-bastion-20764.herokuapp.com/'+sticker_url).then(async base64Img => {\n\t\t\t\t\t\tawait this.base64ToMultipart(base64Img).then(async multipart => {\n\t\t\t\t\t\t\tawait fetch('https://murmuring-bastion-20764.herokuapp.com/'+upload_url1, {method: 'POST', body: multipart})\n\t\t\t\t\t\t\t\t.then(res => res.json())\n\t\t\t\t\t\t\t\t.then(async res => {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet file = res.file;\n\t\t\t\t\t\t\t\t\t\tlet save = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\t\t\"method\": \"docs.save\",\n\t\t\t\t\t\t\t\t\t\t\t\"request_id\": \"save_graffiti\",\n\t\t\t\t\t\t\t\t\t\t\t\"params\": {\"file\": file, \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tawait this.get('stickers.sync', {\n\t\t\t\t\t\t\t\t\t\t\tid_: i,\n\t\t\t\t\t\t\t\t\t\t\tid: stickers_id,\n\t\t\t\t\t\t\t\t\t\t\towner_id: save.response.graffiti.owner_id,\n\t\t\t\t\t\t\t\t\t\t\tdoc_id: save.response.graffiti.id,\n\t\t\t\t\t\t\t\t\t\t\timg: save.response.graffiti.url,\n\t\t\t\t\t\t\t\t\t\t\taccess_key: save.response.graffiti.access_key\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('error uploading...');\n\t\t\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showSnackBar('Стикеры синхронизированы', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync install(stickers_id) {\n\t\tthis.showSnackBar('Идёт установка стикеров, пожалуйста не выходите из приложения - иначе они могут установиться не правильно', <Icon16Spinner fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tlet stickers = await this.get('stickers.get');\n\t\t\tstickers = stickers.stickers[stickers_id];\n\t\t\tlet data = stickers.data;\n\t\t\tif(this.state.user.hasOwnProperty('stickers_cache')){\n\t\t\t\tif(this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){\n\t\t\t\t\tfor(var i = 0; i < this.state.user.stickers_cache[stickers_id].length; i++){\n\t\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\t\"params\": {\"owner_id\": this.state.user.id, \"doc_id\": this.state.user.stickers_cache[stickers_id][i], \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('error del...');\n\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i = 0; i < data.length; i++){\n\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet obj = data[i];\n\t\t\t\t\t\tlet add = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\"method\": \"docs.add\",\n\t\t\t\t\t\t\t\"request_id\": \"add_doc\",\n\t\t\t\t\t\t\t\"params\": {\"owner_id\": obj.owner_id, \"doc_id\": obj.doc_id, \"access_key\": obj.access_key, \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet added = await this.get('stickers.add', { stickers_id: stickers_id, i: i, doc_id: add.response });\n\t\t\t\t\t\tif(added.access === false){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\tconsole.log('error add...');\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\tawait this.sleep(1000);\n\t\t\t}\n\t\t\tthis.showSnackBar('Стикеры установлены', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t}catch (e) {\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync delete (stickers_id) {\n\t\tthis.showSnackBar('Идёт очистка стикеров, пожалуйста не выходите из приложения - иначе они могут очиститься не правильно', <Icon16Spinner fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tif(this.state.user.hasOwnProperty('stickers_cache')) {\n\t\t\t\tif (this.state.user.stickers_cache.hasOwnProperty(stickers_id + '')) {\n\t\t\t\t\tfor(var i = 0; i < this.state.user.stickers_cache[stickers_id].length; i++){\n\t\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\t\"params\": {\"owner_id\": this.state.user.id, \"doc_id\": this.state.user.stickers_cache[stickers_id][i], \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('error delete...');\n\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t\tawait this.get('stickers.delete', { stickers_id: stickers_id });\n\t\t\t\t\tthis.showSnackBar('Стикеры очищены', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t\t\t}\n\t\t\t}\n\t\t}catch (e) {\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync create_stickers () {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\tlet { title, description, price, upload_preview_img, uploaded_stickers_img } = this.state.create_panel;\n\t\tlet preview = '';\n\t\tlet stickers = [];\n\t\tlet uploaded = 0;\n\t\tawait request({\n\t\t\turl: 'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',\n\t\t\tmethod: 'POST',\n\t\t\tform: {\n\t\t\t\timage: upload_preview_img.replace('data:image/png;base64,','')\n\t\t\t}\n\t\t}, (error, response, body)=>{\n\t\t\tif(response.statusCode === 200){\n\t\t\t\tbody = JSON.parse(body);\n\t\t\t\tlet url = body.data.url;\n\t\t\t\tpreview = url;\n\t\t\t\tuploaded++;\n\t\t\t}else{\n\t\t\t\tconsole.log('error', body);\n\t\t\t}\n\t\t});\n\n\t\tfor(let sticker of uploaded_stickers_img){\n\t\t\tif(sticker !== undefined) {\n\t\t\t\tawait request({\n\t\t\t\t\turl: 'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tform: {\n\t\t\t\t\t\timage: sticker.props.src.replace('data:image/png;base64,', '')\n\t\t\t\t\t}\n\t\t\t\t}, (error, response, body) => {\n\t\t\t\t\tif (response.statusCode === 200) {\n\t\t\t\t\t\tbody = JSON.parse(body);\n\t\t\t\t\t\tlet url = body.data.url;\n\t\t\t\t\t\tstickers.push(url);\n\t\t\t\t\t\tuploaded++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('error', body);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tawait this.sleep(500);\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i < 2; i++ ){\n\t\t\tif(uploaded === (uploaded_stickers_img.length+1)){\n\t\t\t\tbreak;\n\t\t\t}else{\n\t\t\t\ti--;\n\t\t\t\tawait this.sleep(500);\n\t\t\t}\n\t\t}\n\n\t\tlet resp = await this.get('stickers.create', { title, description, price, preview, stickers, stickers_id: this.state.create_panel.hasOwnProperty('stickers_id') ? parseInt(this.state.create_panel.stickers_id) : null });\n\t\tif(resp.status === 'ok'){\n\t\t\tthis.setState({ create_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] } });\n\t\t\tawait this.updateUser();\n\t\t\tthis.go('stickers_history');\n\t\t}\n\t\tthis.setState({ popout: null });\n\t}\n\tgo_to_edit () {\n\t\tlet create_panel = this.state.create_panel;\n\t\tlet stickers_ = this.state.sticker_info.stickers;\n\t\tlet stickers = [];\n\t\tcreate_panel.stickers_id = this.state.sticker_info.id;\n\t\tcreate_panel.title = this.state.sticker_info.title;\n\t\tcreate_panel.description = this.state.sticker_info.description;\n\t\tcreate_panel.price = this.state.sticker_info.price;\n\t\tcreate_panel.upload_preview_img = this.state.sticker_info.preview;\n\t\tfor (let i = 0; i < stickers_.length; i++) {\n\t\t\tlet sticker = stickers_[i];\n\t\t\tstickers.push(\n\t\t\t\t<StickerImg\n\t\t\t\t\tmode={'small'}\n\t\t\t\t\tid={'uploaded_sticker_' + i}\n\t\t\t\t\tsrc={sticker.props.src}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tlet create_panel_ = this.state.create_panel;\n\t\t\t\t\t\tdelete create_panel_.uploaded_stickers_img[id];\n\t\t\t\t\t\tthis.setState({create_panel: create_panel_});\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcreate_panel.uploaded_stickers_img = stickers;\n\t\tthis.setState({ create_panel: create_panel, activeStory: 'tab_other' });\n\t\tsetTimeout(()=>{\n\t\t\tthis.go('create');\n\t\t},150);\n\t}\n\tasync report_stickers (stickers_id, report_reason) {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\tif(typeof report_reason === 'number'){\n\t\t\tawait this.get('report.send', {stickers_id, report_reason_id: report_reason});\n\t\t}else{\n\t\t\tawait this.get('report.send', {stickers_id, report_reason_text: report_reason});\n\t\t}\n\t\tthis.setState({ popout: null });\n\t\tthis.back();\n\t\tthis.showSnackBar('Жалоба отправлена, спасибо!', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Epic activeStory={this.state.activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_main'}\n\t\t\t\t\t\tdata-story=\"tab_main\"\n\t\t\t\t\t><Icon28MarketOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_other'}\n\t\t\t\t\t\tdata-story=\"tab_other\"\n\t\t\t\t\t><Icon28UserOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"tab_main\" activePanel={this.state.activePanelShop} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"main\" separator={false}>\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tseparator={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСтикеры\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.state.stickers_panel_new.length > 0 &&\n\t\t\t\t\t\t\t<Tabs>\n\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex_main: 0 })}\n\t\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex_main === 0}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tНовинки\n\t\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex_main: 1 })}\n\t\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex_main === 1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tПопулярные\n\t\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickers: true });\n\t\t\t\t\t\t\tawait this.updateStickers();\n\t\t\t\t\t\t\tawait this.updateQuestions();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickers: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickers}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.stickers_panel_new.length > 0 ?\n\t\t\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex_main}\n\t\t\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex_main: slideIndex}); }}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.stickers_panel_new}\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.stickers_panel_popular}\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\t\ticon={<Icon56GalleryOutline/>}\n\t\t\t\t\t\t\t\t\t\tstretched\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tСтикеров пока что нет\n\t\t\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{this.state.snackbar && this.state.snackbar}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"sticker_info\">\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tИнформация\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersInfo: true });\n\t\t\t\t\t\t\tawait this.updateStickersInfo();\n\t\t\t\t\t\t\tawait this.updateQuestions();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersInfo: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickersInfo}>\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<StickerButton\n\t\t\t\t\t\t\t\t\ttitle={this.state.sticker_info.title}\n\t\t\t\t\t\t\t\t\tdescription={this.state.sticker_info.author+'\\nПродано: '+(this.state.sticker_info.sales === 0 ? 0 : this.state.sticker_info.sales.length)}\n\t\t\t\t\t\t\t\t\tsrc={this.state.sticker_info.preview}\n\t\t\t\t\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\t\t\t\t\tmore={\n\t\t\t\t\t\t\t\t\t\tthis.state.sticker_info.author_id + '' === this.state.user.id + '' ?\n\t\t\t\t\t\t\t\t\t\t\t<Icon28WriteOutline onClick={()=>{ this.go_to_edit(); } } fill={'#ffa000'}/> :\n\t\t\t\t\t\t\t\t\t\t\t<Icon28ReportOutline onClick={async ()=>{ await this.updateReportReasons(); this.go('stickers_report'); } } fill={'#eb4250'}/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div style={{ marginLeft: '8px', marginRight: '8px' }}>\n\t\t\t\t\t\t\t\t\t<StickerDescription>{this.state.sticker_info.description}</StickerDescription>\n\t\t\t\t\t\t\t\t\t<div style={{ marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t\t\t{this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0 ?\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>{ this.install(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Установить'}</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.user.hasOwnProperty('stickers_cache') ? this.state.user.stickers_cache.hasOwnProperty(this.state.sticker_info.id) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }} mode={\"secondary\"} onClick={()=>{ this.delete(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Очистить'}</Button> : null : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button size={\"xl\"} stretched mode=\"commerce\">{'Получить за '+this.state.sticker_info.price+' руб.'}</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{/*this.state.user.is_admin*/ false && <div style={{ display: 'flex', marginTop: '10px' }}><Button onClick={()=> { this.sync(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Синхронизировать'}</Button></div>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"small\"}>\n\t\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers}\n\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Div>\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.questions_panel &&\n\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t\t<h4>Ответы на вопросы</h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t\t<CardElements>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.questions_panel}\n\t\t\t\t\t\t\t\t\t\t</CardElements>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.state.snackbar && this.state.snackbar}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"input_captcha\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tВвод капчи\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t<img width={'60%'} src={this.state.captcha.url}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\talign={'center'}\n\t\t\t\t\t\t\t\tvalue={this.state.captcha.text}\n\t\t\t\t\t\t\t\tonChange={(e)=> { let c = this.state.captcha; c.text = e.currentTarget.value; this.setState({ captcha: c }); }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button size=\"xl\" onClick={()=> { let c = this.state.captcha; c.done = true; this.setState({ captcha: c });  }}>Отправить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"stickers_report\">\n\t\t\t\t\t\t<PanelHeaderSimple left={<PanelHeaderClose onClick={()=>{ this.back(); }} />}><PanelHeaderContent>\n\t\t\t\t\t\t\tЖалоба\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Причина жалобы</Header>}>\n\t\t\t\t\t\t\t{this.state.report_reasons_panel && this.state.report_reasons_panel}\n\t\t\t\t\t\t\t<CellButton onClick={()=>{ this.setState({ report_other_visible: !this.state.report_other_visible }); }}>Другое</CellButton>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.report_other_visible &&\n\t\t\t\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t\t\t\t<Textarea value={this.state.report_reason_text} onChange={(e)=>{ this.setState({ report_reason_text: e.currentTarget.value }); }} top=\"Опишите подробнее\" />\n\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>{ this.report_stickers(this.state.sticker_info.id, this.state.report_reason_text); }} disabled={this.state.report_reason_text.length===0} size=\"xl\">Отправить</Button>\n\t\t\t\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Group>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"tab_other\" activePanel={this.state.activePanelOther} popout={this.state.popout} history={this.state.historyOther} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"profile\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tПрофиль\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedProfile: true });\n\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\tthis.setState({ refreshedProfile: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedProfile}>\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t<Avatar src={this.state.user.photo_100} size={100}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"large\"}}>\n\t\t\t\t\t\t\t\t\t{this.state.user.first_name+' '+this.state.user.last_name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<Group separator=\"hide\">\n\t\t\t\t\t\t\t\t\t<Cell asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.balance_manipulation ? '180deg' : '0'})` }} />} onClick={()=> { this.setState({ balance_manipulation: !this.state.balance_manipulation }); }} indicator={this.state.user.balance+' ₽'}>Ваш баланс</Cell>\n\t\t\t\t\t\t\t\t\t{this.state.balance_manipulation && <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"l\" onClick={async ()=>{\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\t\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\t\t\tawait bridge.sendPromise(\"VKWebAppOpenPayForm\", {\"app_id\": 7363654, \"action\": \"transfer-to-group\", \"params\": { group_id: 193090865 }});\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: null });\n\t\t\t\t\t\t\t\t\t\t}}  before={<Icon16Down/>}>Пополнить</Button>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Up/>} mode=\"secondary\" style={{ marginLeft: 8 }} onClick={()=>{ if(this.state.user.balance>0){\n\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tthis.showSnackBar('Ваш баланс равен нулю', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t\t\t\t\t\t\t\t\t} }}>Вывести</Button>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t\t<Group separator=\"hide\" header={<Header mode=\"primary\">Ваши стикеры</Header>}>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"big\"}>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.user_stickers}\n\t\t\t\t\t\t\t\t\t\t\t<StickerImg mode={'big'} onClick={()=> { this.go(\"create\"); }}>\n\t\t\t\t\t\t\t\t\t\t\t\t+\n\t\t\t\t\t\t\t\t\t\t\t</StickerImg>\n\t\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t{this.state.snackbar && this.state.snackbar}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"create\">\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.createStickerContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tДобавить стикеры\n\t\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContext opened={this.state.createStickerContextOpened} onClose={ () => { this.toggleCreateStickerContext(); }}>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={<Icon28HistoryForwardOutline/>}\n\t\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); this.go(\"stickers_history\") }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.user.is_admin &&\n\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\tbefore={<Icon28BugOutline/>}\n\t\t\t\t\t\t\t\t\t\tonClick={ async () => {\n\t\t\t\t\t\t\t\t\t\t\tawait this.updateModeration();\n\t\t\t\t\t\t\t\t\t\t\tthis.toggleCreateStickerContext();\n\t\t\t\t\t\t\t\t\t\t\tthis.go(\"moderation\")\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tМодерация\n\t\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</PanelHeaderContext>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Название стикер-пака\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.title}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? '' : 'Максимальная длина - 20' : 'Пожалуйста, введите название'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Описание\"\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.description}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? '' : 'Максимальная длина - 100' : 'Пожалуйста, введите описание'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\ttop=\"Цена\"\n\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.price}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'error' : 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'Число должно быть целым' : '' : 'Максимальная цена- 1 000 руб.' : 'Минимальная цена - 1 руб.'}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\tsrc={this.state.create_panel.upload_preview_img && this.state.create_panel.upload_preview_img}\n\t\t\t\t\t\t\t\ttitle={'Превью'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите главную фотографию стикер-пака (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_preview_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\ttitle={'Стикеры'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите все стикеры (минимум - 4, максимум - 48), которые будут содержаться в паке (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_sticker_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ paddingBottom: \"16px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.create_panel.uploaded_stickers_img}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button size=\"xl\" onClick={()=>{ this.create_stickers(); }} disabled={this.state.create_panel.title ? this.state.create_panel.description ? this.state.create_panel.price > 0 ? this.state.create_panel.title.length <= 20 ? this.state.create_panel.description.length <= 100 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ?  true : this.state.create_panel.upload_preview_img ? this.state.create_panel.uploaded_stickers_img ? this.state.create_panel.uploaded_stickers_img.filter(function(val){ return val !== undefined; }).length >= 4 ? false : true : true : true : true : true : true : true : true : true }>Продолжить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id={\"stickers_history\"}>\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersHistory: true });\n\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersHistory: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickersHistory}>\n\t\t\t\t\t\t\t{this.state.user_stickers_history && this.state.user_stickers_history.length > 0 ? <Div>\n\t\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t\t{this.state.user_stickers_history}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\ticon={<Icon56HistoryOutline/>}\n\t\t\t\t\t\t\t\t\theader={'Пусто'}\n\t\t\t\t\t\t\t\t\tstretched\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tВы пока еще не создавали стикеры\n\t\t\t\t\t\t\t\t</Placeholder>}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id={\"moderation\"}>\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t\tseparator={false}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tМодерация\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<Tabs>\n\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex_moderation: 0 })}\n\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex_moderation === 0}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tСтикеры\n\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex_moderation: 1 })}\n\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex_moderation === 1}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tЖалобы\n\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex_moderation: 2 })}\n\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex_moderation === 2}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tВывод средств\n\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex_moderation}\n\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex_moderation: slideIndex}); }}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.stickers_panel_moderation.length > 0 ?\n\t\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.stickers_panel_moderation}\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", height: \"75vh\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", width: \"100%\", height: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<Icon56GalleryOutline/>}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tСтикеров пока что нет\n\t\t\t\t\t\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.report_panel_moderation.length > 0 ?\n\t\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", height: \"75vh\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", width: \"100%\", height: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<Icon56CheckCircleDeviceOutline/>}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tЖалоб пока что нет\n\t\t\t\t\t\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.withdraw_panel_moderation.length > 0 ?\n\t\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\n\t\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", height: \"75vh\" }}>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", width: \"100%\", height: \"100%\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={<Icon56MoneyTransferOutline/>}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tЗапросов на вывод средств пока что нет\n\t\t\t\t\t\t\t\t\t\t\t\t</Placeholder>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t\t{this.state.snackbar && this.state.snackbar}\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"moderation_sticker_info\">\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tИнформация\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<StickerButton\n\t\t\t\t\t\t\t\ttitle={this.state.sticker_info.title}\n\t\t\t\t\t\t\t\tdescription={this.state.sticker_info.author}\n\t\t\t\t\t\t\t\tsrc={this.state.sticker_info.preview}\n\t\t\t\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\t\t\t\tmore={\n\t\t\t\t\t\t\t\t\tthis.state.moderation_stickers_info.hasOwnProperty('stickers_id') ?\n\t\t\t\t\t\t\t\t\t\t<Icon28WriteOutline fill={'#ffa000'}/> :\n\t\t\t\t\t\t\t\t\t\t<Icon28AddCircleOutline fill={'#4bb34b'}/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div style={{ marginLeft: '8px', marginRight: '8px' }}>\n\t\t\t\t\t\t\t\t<StickerDescription>{this.state.sticker_info.description}</StickerDescription>\n\t\t\t\t\t\t\t\t<div style={{ marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>{  }} size={\"xl\"} stretched>{'Одобрить'}</Button>\n\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }} mode={\"destructive\"} onClick={()=>{  }} size={\"xl\"} stretched>{'Отклонить'}</Button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/*this.state.user.is_admin*/ false && <div style={{ display: 'flex', marginTop: '10px' }}><Button onClick={()=> { this.sync(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Синхронизировать'}</Button></div>}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t<StickerGrid mode={\"small\"}>\n\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers_}\n\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Div>\n\n\t\t\t\t\t\t{this.state.snackbar && this.state.snackbar}\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}