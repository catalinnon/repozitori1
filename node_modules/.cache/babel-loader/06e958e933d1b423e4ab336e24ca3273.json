{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./App.css';import{Panel,PanelHeader,Div,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderButton,Header}from'@vkontakte/vkui';import Icon28MarketOutline from'@vkontakte/icons/dist/28/market_outline';import Icon28UserOutline from'@vkontakte/icons/dist/28/user_outline';import Icon24Done from'@vkontakte/icons/dist/24/done';import{CardButton}from\"./components/CardButton\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){var activeStory=_this.state.activeStory;var activePanel=activeStory==='tab_main'?_this.state.activePanelShop:activeStory==='tab_other'?_this.state.activePanelOther:'';if(activeStory==='tab_main'&&activePanel==='main'||activeStory==='tab_other'&&activePanel==='profile'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{var history=activeStory==='tab_main'?_this.state.historyShop:activeStory==='tab_other'?_this.state.historyOther:'';if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();var p=history[history.length-1];_this.setState({activePanel:p});}}};_this.state={popout:React.createElement(ScreenSpinner,null),activeStory:'tab_main',slideTabIndex:0,activePanelShop:\"main\",historyShop:[\"main\"],activePanelOther:\"profile\",historyOther:[\"profile\"],stickers:[{title:\"Бисквит\",author:\"Ирина Брэдкэт\",preview:\"https://vk.com/sticker/2-533-cover-140b-0\",price:1,description:\"Хвост торчком, большие ушки —\\nБерегитесь, печенюшки!\",stickers:['https://vk.com/sticker/1-18945-64','https://vk.com/sticker/1-18946-64','https://vk.com/sticker/1-18947-64','https://vk.com/sticker/1-18948-64','https://vk.com/sticker/1-18949-64','https://vk.com/sticker/1-18950-64','https://vk.com/sticker/1-18951-64','https://vk.com/sticker/1-18952-64']},{title:\"Илай\",author:\"Ирина Брэдкэт\",preview:\"https://vk.com/sticker/1-18781-128\",price:1,description:\"Вышел мишка из берлоги — поселился в диалоге.\",stickers:['https://vk.com/sticker/1-18781-128','https://vk.com/sticker/1-18782-128','https://vk.com/sticker/1-18783-128','https://vk.com/sticker/1-18784-128','https://vk.com/sticker/1-18785-128','https://vk.com/sticker/1-18786-128','https://vk.com/sticker/1-18787-128','https://vk.com/sticker/1-18788-128']}],stickers_panel:null,sticker_info:{title:\"\",author:\"\",preview:\"\",price:0,description:\"\",stickers:[]},user:{first_name:'',last_name:'',photo_100:'',stickers:[0],balance:0},create_panel:{title:\"\",preview:\"\",price:0,description:\"\",stickers:[]}};_this.onStoryChange=_this.onStoryChange.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.uploadFile=_this.uploadFile.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();_this2.back(e);});bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;console.log(type,data);if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}else if(type==='VKWebAppGetUserInfoResult'){data.stickers=[0];data.balance=0;_this2.setState({popout:null,user:data});_this2.initializeApp();}});bridge.send('VKWebAppGetUserInfo');}},{key:\"initializeApp\",value:function initializeApp(){var _this3=this;var stickers_panel=[];var stickers=this.state.stickers;for(var i=0;i<stickers.length;i++){var stickers_=[];for(var j=0;j<stickers[i].stickers.length;j++){stickers_.push(React.createElement(\"img\",{width:64,height:64,src:stickers[i].stickers[j]}));}stickers[i].stickers=stickers_;stickers[i].id=i;stickers_panel.push(React.createElement(Cell,{id:\"sticker_\"+i,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[1]);_this3.go(\"sticker_info\");_this3.setState({sticker_info:stickers[id]});},before:React.createElement(Avatar,{mode:\"app\",size:78},React.createElement(\"img\",{width:64,height:64,src:stickers[i].preview})),description:stickers[i].author,size:\"l\",bottomContent:React.createElement(Button,{mode:\"commerce\"},stickers[i].price+' руб.')},stickers[i].title));}this.setState({stickers_panel:stickers_panel});var user_stickers=[];for(var i=0;i<this.state.user.stickers.length;i++){var sticker=this.state.stickers[i];user_stickers.push(React.createElement(Avatar,{size:96},React.createElement(\"img\",{width:96,height:96,src:sticker.preview,id:\"user_sticker_\"+i,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);_this3.setState({activeStory:\"tab_main\",sticker_info:_this3.state.stickers[id]});_this3.go(\"sticker_info\");}})));}this.setState({user_stickers:user_stickers});}},{key:\"go\",value:function go(panel){var _this$setState;var activeStory=this.state.activeStory;var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';var history=activeStory==='tab_main'?this.state.historyShop:activeStory==='tab_other'?this.state.historyOther:'';history.push(panel);var history_to_change=activeStory==='tab_main'?'historyShop':activeStory==='tab_other'?'historyOther':'';window.history.pushState({panel:panel},'Title');this.setState((_this$setState={},_defineProperty(_this$setState,panel_to_change,panel),_defineProperty(_this$setState,history_to_change,history),_this$setState));}},{key:\"onStoryChange\",value:function onStoryChange(e){var story=e.currentTarget.dataset.story;if(this.state.activeStory===story){if(story==='tab_main'&&this.state.activePanelShop!=='main'){this.back();}else if(story==='tab_other'&&this.state.activePanelOther!=='profile'){this.back();}}this.setState({activeStory:story});}},{key:\"onChange\",value:function onChange(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;var create_panel=this.state.create_panel;create_panel[name]=value;this.setState({create_panel:create_panel});}},{key:\"uploadFile\",value:function uploadFile(element,evt){var tgt=evt.target||window.event.srcElement,files=tgt.files;console.log(files);var t=this;if(FileReader&&files&&files.length){var fr=new FileReader();fr.onload=function(){var res=fr.result;//base64 result, to get src -> array[0].props.src\nvar res1=t.state.create_panel;if(files[files.length-1].type.includes('image')){if(element==='upload_sticker_img'){var res10=res1.hasOwnProperty('uploaded_stickers_img')?res1.uploaded_stickers_img:[];res10.push(React.createElement(\"img\",{id:'uploaded_sticker_'+res10.length,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var res01=t.state.create_panel;delete res01.uploaded_stickers_img[id];t.setState({create_panel:res01});},width:64,height:64,src:res}));var stickers_count=res10.filter(function(val){return val!==undefined;}).length;if(stickers_count<100){res1.uploaded_stickers_img=res10;t.setState({create_panel:res1});}}else{res1[element]=res;t.setState({create_panel:res1});}}else{res1[element]=null;t.setState({create_panel:res1});}};fr.readAsDataURL(files[0]);}// Not supported\nelse{// fallback -- perhaps submit the input to an iframe and temporarily store\n// them on the server until the user's session ends.\n}}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(Epic,{activeStory:this.state.activeStory,tabbar:React.createElement(Tabbar,null,React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_main',\"data-story\":\"tab_main\"},React.createElement(Icon28MarketOutline,null)),React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_other',\"data-story\":\"tab_other\"},React.createElement(Icon28UserOutline,null)))},React.createElement(View,{id:\"tab_main\",activePanel:this.state.activePanelShop,popout:this.state.popout,history:this.state.historyShop,onSwipeBack:this.back},React.createElement(Panel,{id:\"main\",separator:false},React.createElement(PanelHeader,null,\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),React.createElement(Separator,null),React.createElement(Gallery,{slideWidth:\"100%\",style:{height:\"100%\",margin:\"8px\"},slideIndex:this.state.slideTabIndex,onChange:function onChange(slideIndex){_this4.setState({slideTabIndex:slideIndex});}},React.createElement(\"div\",null,React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:\"medium\"}},React.createElement(\"b\",null,\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0438\")),React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel)),React.createElement(\"div\",null,React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:\"medium\"}},React.createElement(\"b\",null,\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435\")),React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel)))),React.createElement(Panel,{id:\"sticker_info\"},React.createElement(PanelHeader,null,\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),React.createElement(Div,null,React.createElement(Cell,{before:React.createElement(Avatar,{mode:\"app\",size:78},React.createElement(\"img\",{width:64,height:64,src:this.state.sticker_info.preview})),description:this.state.sticker_info.author},this.state.sticker_info.title),React.createElement(\"br\",null),React.createElement(\"div\",{style:{color:\"#7f8285\"},dangerouslySetInnerHTML:{__html:this.state.sticker_info.description.replace('\\n','<br/>')}}),React.createElement(\"div\",{style:{display:'flex',marginTop:'10px'}},this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0?React.createElement(Button,{size:\"xl\",stretched:true},'Установить'):React.createElement(Button,{size:\"xl\",stretched:true,mode:\"commerce\"},'Получить за '+this.state.sticker_info.price+' руб.')),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",marginTop:\"18px\"}},React.createElement(\"div\",{style:{minWidth:\"64px\",maxWidth:\"296px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 64px)\",gridGap:\"10px\"}},this.state.sticker_info.stickers))))),React.createElement(View,{id:\"tab_other\",activePanel:this.state.activePanelOther,popout:this.state.popout,history:this.state.historyShop,onSwipeBack:this.back},React.createElement(Panel,{id:\"profile\"},React.createElement(PanelHeader,null,\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"),React.createElement(Div,null,React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}},React.createElement(Avatar,{src:this.state.user.photo_100,size:100})),React.createElement(\"br\",null),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",fontSize:\"large\"}},this.state.user.first_name+' '+this.state.user.last_name),React.createElement(\"br\",null),React.createElement(Group,{separator:\"hide\"},React.createElement(Cell,{expandable:true,onClick:function onClick(){},indicator:this.state.user.balance+' ₽'},\"\\u0412\\u0430\\u0448 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\")),React.createElement(Group,{separator:\"hide\",header:React.createElement(Header,{mode:\"primary\"},\"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")},React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",marginTop:\"18px\"}},React.createElement(\"div\",{style:{minWidth:\"96px\",maxWidth:\"320px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 96px)\",gridGap:\"10px\"}},this.state.user_stickers,React.createElement(Avatar,{size:96},React.createElement(\"div\",{style:{borderRadius:48,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",height:\"100%\",color:\"#7f8285\",fontSize:76},onClick:function onClick(){_this4.go(\"create\");}},\"+\"))))))),React.createElement(Panel,{id:\"create\"},React.createElement(PanelHeader,{right:React.createElement(PanelHeaderButton,{disabled:this.state.create_panel.title?this.state.create_panel.description?this.state.create_panel.price>0?this.state.create_panel.title.length<=20?this.state.create_panel.description.length<=100?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?true:this.state.create_panel.upload_preview_img?this.state.create_panel.uploaded_stickers_img?this.state.create_panel.uploaded_stickers_img.filter(function(val){return val!==undefined;}).length>0?false:true:true:true:true:true:true:true:true:true},React.createElement(Icon24Done,null))},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"),React.createElement(FormLayout,null,React.createElement(Input,{type:\"text\",top:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440-\\u043F\\u0430\\u043A\\u0430\",name:\"title\",value:this.state.create_panel.title,onChange:this.onChange,status:this.state.create_panel.title?this.state.create_panel.title.length<=20?'valid':'error':'error',bottom:this.state.create_panel.title?this.state.create_panel.title.length<=20?'':'Максимальная длина - 20':'Пожалуйста, введите название'}),React.createElement(Input,{type:\"text\",top:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",name:\"description\",value:this.state.create_panel.description,onChange:this.onChange,status:this.state.create_panel.description?this.state.create_panel.description.length<=100?'valid':'error':'error',bottom:this.state.create_panel.description?this.state.create_panel.description.length<=100?'':'Максимальная длина - 100':'Пожалуйста, введите описание'}),React.createElement(Input,{type:\"number\",top:\"\\u0426\\u0435\\u043D\\u0430\",name:\"price\",value:this.state.create_panel.price,onChange:this.onChange,status:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'error':'valid':'error':'error',bottom:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'Число должно быть целым':'':'Максимальная цена- 1 000 руб.':'Минимальная цена - 1 руб.'}),React.createElement(\"div\",null,React.createElement(\"input\",{type:\"file\",ref:function ref(_ref2){return _this4.upload_preview=_ref2;},style:{display:\"none\"},onChange:function onChange(event){_this4.uploadFile('upload_preview_img',event);}}),React.createElement(Cell,{onClick:function onClick(){_this4.upload_preview.click();},before:React.createElement(Avatar,{mode:\"app\",size:78,src:this.state.create_panel.upload_preview_img&&this.state.create_panel.upload_preview_img}),multiline:true,description:'Загрузите главную фотографию стикер-пака (128×128px)'},\"\\u041F\\u0440\\u0435\\u0432\\u044C\\u044E\")),React.createElement(\"div\",null,React.createElement(\"input\",{type:\"file\",ref:function ref(_ref3){return _this4.upload_stickers=_ref3;},style:{display:\"none\"},onChange:function onChange(event){_this4.uploadFile('upload_sticker_img',event);}}),React.createElement(Cell,{onClick:function onClick(){_this4.upload_stickers.click();},multiline:true,description:'Загрузите все стикеры, которые будут содержаться в паке (128×128px)'},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",paddingBottom:\"16px\"}},React.createElement(\"div\",{style:{minWidth:\"64px\",maxWidth:\"296px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 64px)\",gridGap:\"10px\"}},this.state.create_panel.uploaded_stickers_img))))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/VKStickers2/src/App.js"],"names":["React","bridge","Panel","PanelHeader","Div","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderButton","Header","Icon28MarketOutline","Icon28UserOutline","Icon24Done","CardButton","App","props","back","activeStory","state","activePanel","activePanelShop","activePanelOther","send","history","historyShop","historyOther","length","pop","p","setState","popout","slideTabIndex","stickers","title","author","preview","price","description","stickers_panel","sticker_info","user","first_name","last_name","photo_100","balance","create_panel","onStoryChange","bind","onChange","uploadFile","componentDidMount","initializeApp","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","i","stickers_","j","push","id","parseInt","currentTarget","split","user_stickers","sticker","panel","panel_to_change","history_to_change","pushState","story","dataset","name","element","evt","tgt","target","event","srcElement","files","t","FileReader","fr","onload","res","result","res1","includes","res10","hasOwnProperty","uploaded_stickers_img","res01","stickers_count","filter","val","undefined","readAsDataURL","height","margin","slideIndex","display","alignItems","justifyContent","fontSize","marginTop","color","__html","replace","indexOf","minWidth","maxWidth","gridTemplateColumns","gridGap","borderRadius","width","toString","upload_preview_img","ref","upload_preview","click","upload_stickers","paddingBottom","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './App.css'\n\nimport { Panel, PanelHeader, Div , View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderButton, Header,   } from '@vkontakte/vkui';\n\nimport Icon28MarketOutline from '@vkontakte/icons/dist/28/market_outline';\nimport Icon28UserOutline from '@vkontakte/icons/dist/28/user_outline';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\n\nimport { CardButton } from \"./components/CardButton\";\n\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: <ScreenSpinner/>,\n\t\t\tactiveStory: 'tab_main',\n\t\t\tslideTabIndex: 0,\n\t\t\tactivePanelShop: \"main\",\n\t\t\thistoryShop: [\"main\"],\n\t\t\tactivePanelOther: \"profile\",\n\t\t\thistoryOther: [\"profile\"],\n\t\t\tstickers: [ { title: \"Бисквит\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\", price: 1, description: \"Хвост торчком, большие ушки —\\nБерегитесь, печенюшки!\", stickers: [ 'https://vk.com/sticker/1-18945-64', 'https://vk.com/sticker/1-18946-64', 'https://vk.com/sticker/1-18947-64', 'https://vk.com/sticker/1-18948-64', 'https://vk.com/sticker/1-18949-64', 'https://vk.com/sticker/1-18950-64', 'https://vk.com/sticker/1-18951-64', 'https://vk.com/sticker/1-18952-64' ] }, { title: \"Илай\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/1-18781-128\", price: 1, description: \"Вышел мишка из берлоги — поселился в диалоге.\", stickers: [ 'https://vk.com/sticker/1-18781-128', 'https://vk.com/sticker/1-18782-128', 'https://vk.com/sticker/1-18783-128', 'https://vk.com/sticker/1-18784-128', 'https://vk.com/sticker/1-18785-128', 'https://vk.com/sticker/1-18786-128', 'https://vk.com/sticker/1-18787-128', 'https://vk.com/sticker/1-18788-128' ] } ],\n\t\t\tstickers_panel: null,\n\t\t\tsticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers: [] },\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: '',\n\t\t\t\tstickers:[ 0 ],\n\t\t\t\tbalance: 0\n\t\t\t},\n\t\t\tcreate_panel: { title: \"\", preview: \"\", price: 0, description: \"\", stickers: [] }\n\t\t};\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.uploadFile = this.uploadFile.bind(this);\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tconsole.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tdata.stickers = [ 0 ];\n\t\t\t\tdata.balance = 0;\n\t\t\t\tthis.setState({ popout: null, user: data });\n\t\t\t\tthis.initializeApp();\n\t\t\t}\n\t\t});\n\t\tbridge.send('VKWebAppGetUserInfo');\n\t}\n\n\tinitializeApp() {\n\t\tvar stickers_panel = [];\n\t\tvar stickers = this.state.stickers;\n\t\tfor(var i = 0; i < stickers.length; i++){\n\t\t\tvar stickers_ = [];\n\t\t\tfor(var j = 0; j < stickers[i].stickers.length; j++){\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<img width={64} height={64} src={stickers[i].stickers[j]}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers = stickers_;\n\t\t\tstickers[i].id = i;\n\t\t\tstickers_panel.push(\n\t\t\t\t<Cell id={\"sticker_\"+i} onClick={(e)=> { var id = parseInt(e.currentTarget.id.split('_')[1]); this.go(\"sticker_info\"); this.setState({ sticker_info: stickers[id] }); }} before={<Avatar mode=\"app\" size={78}><img width={64} height={64} src={stickers[i].preview}/></Avatar>} description={stickers[i].author} size={\"l\"} bottomContent={<Button mode=\"commerce\">{stickers[i].price+' руб.'}</Button> } >{stickers[i].title}</Cell>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ stickers_panel });\n\n\t\tvar user_stickers = [];\n\t\tfor(var i = 0; i < this.state.user.stickers.length; i++){\n\t\t\tvar sticker = this.state.stickers[i];\n\t\t\tuser_stickers.push(\n\t\t\t\t<Avatar size={96}><img width={96} height={96} src={sticker.preview} id={\"user_sticker_\"+i} onClick={(e)=> { var id = parseInt(e.currentTarget.id.split('_')[2]); this.setState({ activeStory: \"tab_main\", sticker_info: this.state.stickers[id] }); this.go(\"sticker_info\"); }}/></Avatar>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ user_stickers });\n\t}\n\tback = () => {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\tif((activeStory === 'tab_main' && activePanel==='main') || (activeStory === 'tab_other' && activePanel==='profile')){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel: p});\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\thistory.push(panel);\n\t\tlet history_to_change = activeStory === 'tab_main' ? 'historyShop' : activeStory === 'tab_other' ? 'historyOther' : '';\n\t\twindow.history.pushState({panel: panel}, 'Title');\n\t\tthis.setState({ [panel_to_change]: panel, [history_to_change]: history });\n\t}\n\n\tonStoryChange (e) {\n\t\tvar story = e.currentTarget.dataset.story;\n\t\tif(this.state.activeStory===story){\n\t\t\tif(story==='tab_main' && this.state.activePanelShop !== 'main'){\n\t\t\t\tthis.back();\n\t\t\t}else if(story==='tab_other' && this.state.activePanelOther !== 'profile'){\n\t\t\t\tthis.back();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ activeStory: story });\n\t}\n\n\tonChange(e) {\n\t\tconst { name, value } = e.currentTarget;\n\t\tvar create_panel = this.state.create_panel;\n\t\tcreate_panel[name] = value;\n\t\tthis.setState({ create_panel: create_panel });\n\t}\n\n\tuploadFile(element, evt) {\n\t\tvar tgt = evt.target || window.event.srcElement,\n\t\t\tfiles = tgt.files;\n\t\tconsole.log(files);\n\t\tconst t = this\n\t\tif (FileReader && files && files.length) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function () {\n\t\t\t\tvar res = fr.result; //base64 result, to get src -> array[0].props.src\n\t\t\t\tvar res1 = t.state.create_panel;\n\t\t\t\tif(files[files.length-1].type.includes('image')){\n\t\t\t\t\tif(element==='upload_sticker_img'){\n\t\t\t\t\t\tvar res10 = res1.hasOwnProperty('uploaded_stickers_img') ? res1.uploaded_stickers_img : [];\n\t\t\t\t\t\tres10.push(\n\t\t\t\t\t\t\t<img id={'uploaded_sticker_'+res10.length} onClick={(e)=>{ var id = parseInt(e.currentTarget.id.split('_')[2]); var res01 = t.state.create_panel; delete res01.uploaded_stickers_img[id];  t.setState({ create_panel: res01 }); }} width={64} height={64} src={res}/>\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvar stickers_count = res10.filter(function(val){ return val !== undefined; }).length;\n\t\t\t\t\t\tif(stickers_count<100){\n\t\t\t\t\t\t\tres1.uploaded_stickers_img = res10;\n\t\t\t\t\t\t\tt.setState({ create_panel: res1 });\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tres1[element] = res;\n\t\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tres1[element] = null;\n\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfr.readAsDataURL(files[0]);\n\t\t}\n\n\t\t// Not supported\n\t\telse {\n\t\t\t// fallback -- perhaps submit the input to an iframe and temporarily store\n\t\t\t// them on the server until the user's session ends.\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Epic activeStory={this.state.activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_main'}\n\t\t\t\t\t\tdata-story=\"tab_main\"\n\t\t\t\t\t><Icon28MarketOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_other'}\n\t\t\t\t\t\tdata-story=\"tab_other\"\n\t\t\t\t\t><Icon28UserOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"tab_main\" activePanel={this.state.activePanelShop} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back}>\n\t\t\t\t\t<Panel id=\"main\" separator={false}>\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex}\n\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex: slideIndex}); }}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Новинки</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Популярные</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"sticker_info\">\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<Cell before={<Avatar mode=\"app\" size={78}><img width={64} height={64} src={this.state.sticker_info.preview}/></Avatar>} description={this.state.sticker_info.author}>{this.state.sticker_info.title}</Cell>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<div style={{ color: \"#7f8285\" }} dangerouslySetInnerHTML={{ __html: this.state.sticker_info.description.replace('\\n','<br/>') }} />\n\t\t\t\t\t\t\t<div style={{display: 'flex', marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t{this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0 ? <Button size={\"xl\"} stretched>{'Установить'}</Button> : <Button size={\"xl\"} stretched mode=\"commerce\">{'Получить за '+this.state.sticker_info.price+' руб.'}</Button>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"tab_other\" activePanel={this.state.activePanelOther} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back}>\n\t\t\t\t\t<Panel id=\"profile\">\n\t\t\t\t\t\t<PanelHeader>Профиль</PanelHeader>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\"}}>\n\t\t\t\t\t\t\t\t<Avatar src={this.state.user.photo_100} size={100}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<div style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\", fontSize: \"large\"}}>\n\t\t\t\t\t\t\t\t{this.state.user.first_name+' '+this.state.user.last_name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<Group separator=\"hide\">\n\t\t\t\t\t\t\t\t<Cell expandable onClick={()=> {  }} indicator={this.state.user.balance+' ₽'}>Ваш баланс</Cell>\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t<Group separator=\"hide\" header={<Header mode=\"primary\">Ваши стикеры</Header>}>\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t<div style={{ minWidth: \"96px\", maxWidth: \"320px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 96px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t\t{this.state.user_stickers}\n\t\t\t\t\t\t\t\t\t\t<Avatar size={96}><div style={{ borderRadius: 48, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", width: \"100%\", height: \"100%\", color: \"#7f8285\", fontSize: 76 }} onClick={()=> { this.go(\"create\"); }}>+</div></Avatar>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"create\">\n\t\t\t\t\t\t<PanelHeader\n\t\t\t\t\t\t\tright={<PanelHeaderButton disabled={this.state.create_panel.title ? this.state.create_panel.description ? this.state.create_panel.price > 0 ? this.state.create_panel.title.length <= 20 ? this.state.create_panel.description.length <= 100 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ?  true : this.state.create_panel.upload_preview_img ? this.state.create_panel.uploaded_stickers_img ? this.state.create_panel.uploaded_stickers_img.filter(function(val){ return val !== undefined; }).length > 0 ? false : true : true : true : true : true : true : true : true : true }><Icon24Done/></PanelHeaderButton>}\n\t\t\t\t\t\t>Добавить стикеры</PanelHeader>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Название стикер-пака\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.title}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? '' : 'Максимальная длина - 20' : 'Пожалуйста, введите название'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Описание\"\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.description}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? '' : 'Максимальная длина - 100' : 'Пожалуйста, введите описание'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\ttop=\"Цена\"\n\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.price}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'error' : 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'Число должно быть целым' : '' : 'Максимальная цена- 1 000 руб.' : 'Минимальная цена - 1 руб.'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input type=\"file\" ref={(ref) => this.upload_preview = ref} style={{display: \"none\"}}  onChange={(event)=> {this.uploadFile('upload_preview_img', event)}}/>\n\t\t\t\t\t\t\t\t<Cell onClick={()=> { this.upload_preview.click(); }} before={<Avatar mode=\"app\" size={78} src={this.state.create_panel.upload_preview_img && this.state.create_panel.upload_preview_img} />} multiline description={'Загрузите главную фотографию стикер-пака (128×128px)'} >Превью</Cell>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<input type=\"file\" ref={(ref) => this.upload_stickers = ref} style={{display: \"none\"}}  onChange={(event)=> {this.uploadFile('upload_sticker_img', event)}}/>\n\t\t\t\t\t\t\t\t<Cell onClick={()=> { this.upload_stickers.click(); }} multiline description={'Загрузите все стикеры, которые будут содержаться в паке (128×128px)'} >Стикеры</Cell>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", paddingBottom: \"16px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.create_panel.uploaded_stickers_img}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n\t}\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}