{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import{Panel,PanelHeader,Div,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderContext,Header,PanelHeaderSimple,PanelHeaderContent,Placeholder}from'@vkontakte/vkui';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import Icon16Down from'@vkontakte/icons/dist/16/down';import Icon16Up from'@vkontakte/icons/dist/16/up';import Icon28HistoryForwardOutline from'@vkontakte/icons/dist/28/history_forward_outline';import Icon28MarketOutline from'@vkontakte/icons/dist/28/market_outline';import Icon28UserOutline from'@vkontakte/icons/dist/28/user_outline';import Icon56HistoryOutline from'@vkontakte/icons/dist/56/history_outline';import{StickerImg}from\"./components/StickerImg\";import{StickerButton}from\"./components/StickerButton\";import{StickerDescription}from\"./components/StickerDescription\";import{StickerGrid}from\"./components/StickerGrid\";import{StickerUploadButton}from\"./components/StickerUploadButton\";var access_token='',upload_url='';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){var activeStory=_this.state.activeStory;var activePanel=activeStory==='tab_main'?_this.state.activePanelShop:activeStory==='tab_other'?_this.state.activePanelOther:'';var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';if(activeStory==='tab_main'&&activePanel==='main'||activeStory==='tab_other'&&activePanel==='profile'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{var history=activeStory==='tab_main'?_this.state.historyShop:activeStory==='tab_other'?_this.state.historyOther:'';if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();var p=history[history.length-1];_this.setState(_defineProperty({},panel_to_change,p));}}};_this.state={popout:React.createElement(ScreenSpinner,null),activeStory:'tab_main',slideTabIndex:0,activePanelShop:\"main\",historyShop:[\"main\"],activePanelOther:\"profile\",historyOther:[\"profile\"],createStickerContextOpened:false,balance_manipulation:false,stickers:[{title:\"Бисквит\",author:\"Ирина Брэдкэт\",preview:\"https://vk.com/sticker/2-533-cover-140b-0\",price:1,description:\"Хвост торчком, большие ушки —\\nБерегитесь, печенюшки!\",stickers:['https://vk.com/sticker/1-18945-64','https://vk.com/sticker/1-18946-64','https://vk.com/sticker/1-18947-64','https://vk.com/sticker/1-18948-64','https://vk.com/sticker/1-18949-64','https://vk.com/sticker/1-18950-64','https://vk.com/sticker/1-18951-64','https://vk.com/sticker/1-18952-64']},{title:\"Илай\",author:\"Ирина Брэдкэт\",preview:\"https://vk.com/sticker/1-18781-128\",price:1,description:\"Вышел мишка из берлоги — поселился в диалоге.\",stickers:['https://vk.com/sticker/1-18781-128','https://vk.com/sticker/1-18782-128','https://vk.com/sticker/1-18783-128','https://vk.com/sticker/1-18784-128','https://vk.com/sticker/1-18785-128','https://vk.com/sticker/1-18786-128','https://vk.com/sticker/1-18787-128','https://vk.com/sticker/1-18788-128']}],stickers_panel:null,sticker_info:{title:\"\",author:\"\",preview:\"\",price:0,description:\"\",stickers:[]},user:{first_name:'',last_name:'',photo_100:'',stickers:[],balance:0,stickers_history:[]},create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]}};_this.onStoryChange=_this.onStoryChange.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.uploadFile=_this.uploadFile.bind(_assertThisInitialized(_this));_this.toggleCreateStickerContext=_this.toggleCreateStickerContext.bind(_assertThisInitialized(_this));_this.install=_this.install.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();_this2.back(e);});bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;console.log(type,data);if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}else if(type==='VKWebAppGetUserInfoResult'){data.stickers=[0];data.history=[];data.balance=0;data.stickers_history=[{title:\"Илай\",preview:\"https://vk.com/sticker/1-18781-128\",added:false},{title:\"Бисквит\",author:\"Илья Ульянов\",preview:\"https://vk.com/sticker/2-533-cover-140b-0\"}];_this2.setState({popout:null,user:data});_this2.initializeApp();}});bridge.send('VKWebAppGetUserInfo');}},{key:\"initializeApp\",value:function initializeApp(){var _this3=this;var stickers_panel=[];var stickers=this.state.stickers;for(var i=0;i<stickers.length;i++){var stickers_=[];for(var j=0;j<stickers[i].stickers.length;j++){stickers_.push(React.createElement(StickerImg,{mode:\"small\",src:stickers[i].stickers[j]}));}stickers[i].stickers=stickers_;stickers[i].id=i;stickers_panel.push(React.createElement(StickerButton,{title:stickers[i].title,author:stickers[i].author,src:stickers[i].preview,price:stickers[i].price,id:\"sticker_\"+i,mode:\"cell\",onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[1]);_this3.setState({sticker_info:stickers[id]});_this3.go(\"sticker_info\");}}));}this.setState({stickers_panel:stickers_panel});var user_stickers=[];for(var i=0;i<this.state.user.stickers.length;i++){var sticker=this.state.stickers[i];user_stickers.push(React.createElement(StickerButton,{src:sticker.preview,id:\"user_sticker_\"+i,mode:\"img\",onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);_this3.setState({activeStory:\"tab_main\",sticker_info:_this3.state.stickers[id]});setTimeout(function(){_this3.go(\"sticker_info\");},50);}}));}this.setState({user_stickers:user_stickers});var user_stickers_history=[];for(var i=0;i<this.state.user.stickers_history.length;i++){var sticker=this.state.user.stickers_history[i];user_stickers_history.push(React.createElement(StickerButton,{title:sticker.title,src:sticker.preview,mode2:sticker.hasOwnProperty('added')?sticker.added?'commerce':'destructive':'primary',button:sticker.hasOwnProperty('added')?sticker.added?'Одобрено':'Отклонено':'На проверке',mode:\"cell\"}));}this.setState({user_stickers_history:user_stickers_history});}},{key:\"go\",value:function go(panel){var _this$setState2;var activeStory=this.state.activeStory;var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';var history=activeStory==='tab_main'?this.state.historyShop:activeStory==='tab_other'?this.state.historyOther:'';history.push(panel);var history_to_change=activeStory==='tab_main'?'historyShop':activeStory==='tab_other'?'historyOther':'';window.history.pushState({panel:panel},'Title');this.setState((_this$setState2={},_defineProperty(_this$setState2,panel_to_change,panel),_defineProperty(_this$setState2,history_to_change,history),_this$setState2));}},{key:\"onStoryChange\",value:function onStoryChange(e){var story=e.currentTarget.dataset.story;if(this.state.activeStory===story){if(story==='tab_main'&&this.state.activePanelShop!=='main'){this.back();}else if(story==='tab_other'&&this.state.activePanelOther!=='profile'){this.back();}}this.setState({activeStory:story});}},{key:\"onChange\",value:function onChange(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;var create_panel=this.state.create_panel;create_panel[name]=value;this.setState({create_panel:create_panel});}},{key:\"uploadFile\",value:function uploadFile(element,evt){var tgt=evt.target||window.event.srcElement,files=tgt.files;var t=this;if(FileReader&&files&&files.length){var fr=new FileReader();fr.onload=function(){var res=fr.result;//base64 result, to get src -> array[0].props.src\nvar res1=t.state.create_panel;if(files[files.length-1].type.includes('image')){if(element==='upload_sticker_img'){var res10=res1.hasOwnProperty('uploaded_stickers_img')?res1.uploaded_stickers_img:[];res10.push(React.createElement(StickerImg,{mode:'small',id:'uploaded_sticker_'+res10.length,src:res,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var res01=t.state.create_panel;delete res01.uploaded_stickers_img[id];t.setState({create_panel:res01});}}));var stickers_count=res10.filter(function(val){return val!==undefined;}).length;if(stickers_count<100){res1.uploaded_stickers_img=res10;t.setState({create_panel:res1});}}else{res1[element]=res;t.setState({create_panel:res1});}}else{res1[element]=null;t.setState({create_panel:res1});}};fr.readAsDataURL(files[0]);}// Not supported\nelse{// fallback -- perhaps submit the input to an iframe and temporarily store\n// them on the server until the user's session ends.\n}}},{key:\"toggleCreateStickerContext\",value:function toggleCreateStickerContext(){this.setState({createStickerContextOpened:!this.state.createStickerContextOpened});}},{key:\"urlToBase64\",value:function urlToBase64(url,callback){var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){var canvas=document.createElement('CANVAS'),ctx=canvas.getContext('2d'),dataURL;canvas.height=img.height;canvas.width=img.width;ctx.drawImage(img,0,0);dataURL=canvas.toDataURL(\"image/png\");callback(dataURL);canvas=null;};img.src=url;}},{key:\"base64ToMultipart\",value:function base64ToMultipart(base64,callback){fetch(base64).then(function(res){return res.blob();}).then(function(blob){var fd=new FormData();var file=new File([blob],\"sticker.png\");fd.append('file',file);callback(fd);});}},{key:\"install\",value:function(){var _install=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(stickers_id){var stickers,i,sticker_url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 3:access_token=_context.sent;access_token=access_token.access_token;_context.next=7;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.getUploadServer\",\"request_id\":\"upload_server\",\"params\":{\"v\":\"5.103\",\"access_token\":access_token}});case 7:upload_url=_context.sent;upload_url=upload_url;console.log(upload_url);stickers=this.state.stickers[stickers_id].stickers;for(i in stickers){sticker_url=stickers[i].props.src;this.urlToBase64(sticker_url,function(base64Img){this.base64ToMultipart(base64Img,function(multipart){console.log('base64',base64Img);console.log('multipart',multipart);}.bind(this));}.bind(this));}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);console.log('error',_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,this,[[0,14]]);}));function install(_x){return _install.apply(this,arguments);}return install;}()},{key:\"render\",value:function render(){var _this4=this;return React.createElement(Epic,{activeStory:this.state.activeStory,tabbar:React.createElement(Tabbar,null,React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_main',\"data-story\":\"tab_main\"},React.createElement(Icon28MarketOutline,null)),React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_other',\"data-story\":\"tab_other\"},React.createElement(Icon28UserOutline,null)))},React.createElement(View,{id:\"tab_main\",activePanel:this.state.activePanelShop,popout:this.state.popout,history:this.state.historyShop,onSwipeBack:this.back},React.createElement(Panel,{id:\"main\",separator:false},React.createElement(PanelHeader,null,\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),React.createElement(Separator,null),React.createElement(Gallery,{slideWidth:\"100%\",style:{height:\"100%\",margin:\"8px\"},slideIndex:this.state.slideTabIndex,onChange:function onChange(slideIndex){_this4.setState({slideTabIndex:slideIndex});}},React.createElement(\"div\",null,React.createElement(\"div\",{className:\"centered\",style:{fontSize:\"medium\"}},React.createElement(\"b\",null,\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0438\")),React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel)),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"centered\",style:{fontSize:\"medium\"}},React.createElement(\"b\",null,\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435\")),React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel)))),React.createElement(Panel,{id:\"sticker_info\"},React.createElement(PanelHeader,null,\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),React.createElement(Div,null,React.createElement(Cell,{before:React.createElement(StickerImg,{mode:'medium',src:this.state.sticker_info.preview}),description:this.state.sticker_info.author},this.state.sticker_info.title),React.createElement(\"br\",null),React.createElement(StickerDescription,null,this.state.sticker_info.description),React.createElement(\"div\",{style:{marginTop:'10px'}},this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0?React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{onClick:function onClick(){_this4.install(_this4.state.sticker_info.id);},size:\"xl\",stretched:true},'Установить'),\" \",React.createElement(Button,{style:{marginLeft:'8px'},mode:\"secondary\",size:\"xl\",stretched:true},'Очистить')):React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{size:\"xl\",stretched:true,mode:\"commerce\"},'Получить за '+this.state.sticker_info.price+' руб.'))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"small\"},this.state.sticker_info.stickers))))),React.createElement(View,{id:\"tab_other\",activePanel:this.state.activePanelOther,popout:this.state.popout,history:this.state.historyOther,onSwipeBack:this.back,header:false},React.createElement(Panel,{id:\"profile\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")),React.createElement(Div,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(Avatar,{src:this.state.user.photo_100,size:100})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"centered\",style:{fontSize:\"large\"}},this.state.user.first_name+' '+this.state.user.last_name),React.createElement(\"br\",null),React.createElement(Group,{separator:\"hide\"},React.createElement(Cell,{expandable:true,onClick:function onClick(){_this4.setState({balance_manipulation:!_this4.state.balance_manipulation});},indicator:this.state.user.balance+' ₽'},\"\\u0412\\u0430\\u0448 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\"),this.state.balance_manipulation&&React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'8px'}},React.createElement(Button,{size:\"l\",before:React.createElement(Icon16Down,null)},\"\\u041F\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C\"),React.createElement(Button,{size:\"l\",before:React.createElement(Icon16Up,null),mode:\"secondary\",style:{marginLeft:8}},\"\\u0412\\u044B\\u0432\\u0435\\u0441\\u0442\\u0438\"))),React.createElement(Group,{separator:\"hide\",header:React.createElement(Header,{mode:\"primary\"},\"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")},React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"big\"},this.state.user_stickers,React.createElement(StickerImg,{mode:'big',onClick:function onClick(){_this4.go(\"create\");}},\"+\")))))),React.createElement(Panel,{id:\"create\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,{aside:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.createStickerContextOpened?'180deg':'0',\")\")}}),onClick:function onClick(){_this4.toggleCreateStickerContext();}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")),React.createElement(PanelHeaderContext,{opened:this.state.createStickerContextOpened,onClose:function onClose(){_this4.toggleCreateStickerContext();}},React.createElement(List,null,React.createElement(Cell,{before:React.createElement(Icon28HistoryForwardOutline,null),onClick:function onClick(){_this4.toggleCreateStickerContext();_this4.go(\"stickers_history\");}},\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"))),React.createElement(FormLayout,null,React.createElement(Input,{type:\"text\",top:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440-\\u043F\\u0430\\u043A\\u0430\",name:\"title\",value:this.state.create_panel.title,onChange:this.onChange,status:this.state.create_panel.title?this.state.create_panel.title.length<=20?'valid':'error':'error',bottom:this.state.create_panel.title?this.state.create_panel.title.length<=20?'':'Максимальная длина - 20':'Пожалуйста, введите название'}),React.createElement(Input,{type:\"text\",top:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",name:\"description\",value:this.state.create_panel.description,onChange:this.onChange,status:this.state.create_panel.description?this.state.create_panel.description.length<=100?'valid':'error':'error',bottom:this.state.create_panel.description?this.state.create_panel.description.length<=100?'':'Максимальная длина - 100':'Пожалуйста, введите описание'}),React.createElement(Input,{type:\"number\",top:\"\\u0426\\u0435\\u043D\\u0430\",name:\"price\",value:this.state.create_panel.price,onChange:this.onChange,status:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'error':'valid':'error':'error',bottom:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'Число должно быть целым':'':'Максимальная цена- 1 000 руб.':'Минимальная цена - 1 руб.'}),React.createElement(StickerUploadButton,{src:this.state.create_panel.upload_preview_img&&this.state.create_panel.upload_preview_img,title:'Превью',description:'Загрузите главную фотографию стикер-пака (128×128px)',onChange:function onChange(event){_this4.uploadFile('upload_preview_img',event);}}),React.createElement(StickerUploadButton,{title:'Стикеры',description:'Загрузите все стикеры (минимум - 4), которые будут содержаться в паке (128×128px)',onChange:function onChange(event){_this4.uploadFile('upload_sticker_img',event);}}),React.createElement(\"div\",{className:\"centered\",style:{paddingBottom:\"16px\"}},React.createElement(\"div\",{style:{minWidth:\"64px\",maxWidth:\"296px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 64px)\",gridGap:\"10px\"}},this.state.create_panel.uploaded_stickers_img)),React.createElement(Button,{size:\"xl\",disabled:this.state.create_panel.title?this.state.create_panel.description?this.state.create_panel.price>0?this.state.create_panel.title.length<=20?this.state.create_panel.description.length<=100?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?true:this.state.create_panel.upload_preview_img?this.state.create_panel.uploaded_stickers_img?this.state.create_panel.uploaded_stickers_img.filter(function(val){return val!==undefined;}).length>=4?false:true:true:true:true:true:true:true:true:true},\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"))),React.createElement(Panel,{id:\"stickers_history\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\")),this.state.user_stickers_history&&this.state.user_stickers_history.length>0?React.createElement(Div,null,React.createElement(List,null,this.state.user_stickers_history)):React.createElement(Placeholder,{icon:React.createElement(Icon56HistoryOutline,null),header:'Пусто',stretched:true},\"\\u0412\\u044B \\u043F\\u043E\\u043A\\u0430 \\u0435\\u0449\\u0435 \\u043D\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u043B\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/VKStickers2/src/App.js"],"names":["React","bridge","Panel","PanelHeader","Div","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderContext","Header","PanelHeaderSimple","PanelHeaderContent","Placeholder","Icon16Dropdown","Icon16Down","Icon16Up","Icon28HistoryForwardOutline","Icon28MarketOutline","Icon28UserOutline","Icon56HistoryOutline","StickerImg","StickerButton","StickerDescription","StickerGrid","StickerUploadButton","access_token","upload_url","App","props","back","activeStory","state","activePanel","activePanelShop","activePanelOther","panel_to_change","send","history","historyShop","historyOther","length","pop","p","setState","popout","slideTabIndex","createStickerContextOpened","balance_manipulation","stickers","title","author","preview","price","description","stickers_panel","sticker_info","user","first_name","last_name","photo_100","balance","stickers_history","create_panel","onStoryChange","bind","onChange","uploadFile","toggleCreateStickerContext","install","componentDidMount","initializeApp","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","added","i","stickers_","j","push","id","parseInt","currentTarget","split","user_stickers","sticker","setTimeout","user_stickers_history","hasOwnProperty","panel","history_to_change","pushState","story","dataset","name","element","evt","tgt","target","event","srcElement","files","t","FileReader","fr","onload","res","result","res1","includes","res10","uploaded_stickers_img","res01","stickers_count","filter","val","undefined","readAsDataURL","url","callback","img","Image","crossOrigin","canvas","createElement","ctx","getContext","dataURL","height","width","drawImage","toDataURL","src","base64","fetch","then","blob","fd","FormData","file","File","append","stickers_id","sendPromise","sticker_url","urlToBase64","base64Img","base64ToMultipart","multipart","margin","slideIndex","fontSize","marginTop","indexOf","display","marginLeft","justifyContent","transform","toString","upload_preview_img","paddingBottom","minWidth","maxWidth","gridTemplateColumns","gridGap","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\n\nimport { Panel, PanelHeader, Div , View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder  } from '@vkontakte/vkui';\n\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon16Down from '@vkontakte/icons/dist/16/down';\nimport Icon16Up from '@vkontakte/icons/dist/16/up';\nimport Icon28HistoryForwardOutline from '@vkontakte/icons/dist/28/history_forward_outline';\nimport Icon28MarketOutline from '@vkontakte/icons/dist/28/market_outline';\nimport Icon28UserOutline from '@vkontakte/icons/dist/28/user_outline';\nimport Icon56HistoryOutline from '@vkontakte/icons/dist/56/history_outline';\n\nimport {StickerImg} from \"./components/StickerImg\";\nimport {StickerButton} from \"./components/StickerButton\";\nimport {StickerDescription} from \"./components/StickerDescription\";\nimport {StickerGrid} from \"./components/StickerGrid\";\nimport {StickerUploadButton} from \"./components/StickerUploadButton\";\n\nvar access_token = '', upload_url = '';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: <ScreenSpinner/>,\n\t\t\tactiveStory: 'tab_main',\n\t\t\tslideTabIndex: 0,\n\t\t\tactivePanelShop: \"main\",\n\t\t\thistoryShop: [\"main\"],\n\t\t\tactivePanelOther: \"profile\",\n\t\t\thistoryOther: [\"profile\"],\n\t\t\tcreateStickerContextOpened: false,\n\t\t\tbalance_manipulation: false,\n\t\t\tstickers: [ { title: \"Бисквит\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\", price: 1, description: \"Хвост торчком, большие ушки —\\nБерегитесь, печенюшки!\", stickers: [ 'https://vk.com/sticker/1-18945-64', 'https://vk.com/sticker/1-18946-64', 'https://vk.com/sticker/1-18947-64', 'https://vk.com/sticker/1-18948-64', 'https://vk.com/sticker/1-18949-64', 'https://vk.com/sticker/1-18950-64', 'https://vk.com/sticker/1-18951-64', 'https://vk.com/sticker/1-18952-64' ] }, { title: \"Илай\", author: \"Ирина Брэдкэт\", preview: \"https://vk.com/sticker/1-18781-128\", price: 1, description: \"Вышел мишка из берлоги — поселился в диалоге.\", stickers: [ 'https://vk.com/sticker/1-18781-128', 'https://vk.com/sticker/1-18782-128', 'https://vk.com/sticker/1-18783-128', 'https://vk.com/sticker/1-18784-128', 'https://vk.com/sticker/1-18785-128', 'https://vk.com/sticker/1-18786-128', 'https://vk.com/sticker/1-18787-128', 'https://vk.com/sticker/1-18788-128' ] } ],\n\t\t\tstickers_panel: null,\n\t\t\tsticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers: [] },\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: '',\n\t\t\t\tstickers:[ ],\n\t\t\t\tbalance: 0,\n\t\t\t\tstickers_history: [ ]\n\t\t\t},\n\t\t\tcreate_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] }\n\t\t};\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.uploadFile = this.uploadFile.bind(this);\n\t\tthis.toggleCreateStickerContext = this.toggleCreateStickerContext.bind(this);\n\t\tthis.install = this.install.bind(this);\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tconsole.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tdata.stickers = [ 0 ];\n\t\t\t\tdata.history = [];\n\t\t\t\tdata.balance = 0;\n\t\t\t\tdata.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n\t\t\t\tthis.setState({ popout: null, user: data });\n\t\t\t\tthis.initializeApp();\n\t\t\t}\n\t\t});\n\t\tbridge.send('VKWebAppGetUserInfo');\n\t}\n\n\tinitializeApp() {\n\t\tvar stickers_panel = [];\n\t\tvar stickers = this.state.stickers;\n\t\tfor(var i = 0; i < stickers.length; i++){\n\t\t\tvar stickers_ = [];\n\t\t\tfor(var j = 0; j < stickers[i].stickers.length; j++){\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<StickerImg mode={\"small\"} src={stickers[i].stickers[j]}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers = stickers_;\n\t\t\tstickers[i].id = i;\n\t\t\tstickers_panel.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={stickers[i].title}\n\t\t\t\t\tauthor={stickers[i].author}\n\t\t\t\t\tsrc={stickers[i].preview}\n\t\t\t\t\tprice={stickers[i].price}\n\t\t\t\t\tid={\"sticker_\" + i}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tonClick={(e)=> {\n\t\t\t\t\t\tvar id = parseInt(e.currentTarget.id.split('_')[1]);\n\t\t\t\t\t\tthis.setState({sticker_info: stickers[id]});\n\t\t\t\t\t\tthis.go(\"sticker_info\");\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ stickers_panel });\n\n\t\tvar user_stickers = [];\n\t\tfor(var i = 0; i < this.state.user.stickers.length; i++){\n\t\t\tvar sticker = this.state.stickers[i];\n\t\t\tuser_stickers.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tid={\"user_sticker_\" + i}\n\t\t\t\t\tmode={\"img\"}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tvar id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tthis.setState({activeStory: \"tab_main\", sticker_info: this.state.stickers[id]});\n\t\t\t\t\t\tsetTimeout(() => { this.go(\"sticker_info\"); }, 50)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ user_stickers });\n\n\t\tvar user_stickers_history = [];\n\t\tfor (var i = 0; i < this.state.user.stickers_history.length; i++) {\n\t\t\tvar sticker = this.state.user.stickers_history[i];\n\t\t\tuser_stickers_history.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={sticker.title}\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tmode2={sticker.hasOwnProperty('added') ? (sticker.added ? 'commerce' : 'destructive') : 'primary'}\n\t\t\t\t\tbutton={sticker.hasOwnProperty('added') ? (sticker.added ? 'Одобрено' : 'Отклонено') : 'На проверке'}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({ user_stickers_history });\n\t}\n\tback = () => {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tif((activeStory === 'tab_main' && activePanel==='main') || (activeStory === 'tab_other' && activePanel==='profile')){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({[panel_to_change]: p});\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\thistory.push(panel);\n\t\tlet history_to_change = activeStory === 'tab_main' ? 'historyShop' : activeStory === 'tab_other' ? 'historyOther' : '';\n\t\twindow.history.pushState({panel: panel}, 'Title');\n\t\tthis.setState({ [panel_to_change]: panel, [history_to_change]: history });\n\t}\n\n\tonStoryChange (e) {\n\t\tvar story = e.currentTarget.dataset.story;\n\t\tif(this.state.activeStory===story){\n\t\t\tif(story==='tab_main' && this.state.activePanelShop !== 'main'){\n\t\t\t\tthis.back();\n\t\t\t}else if(story==='tab_other' && this.state.activePanelOther !== 'profile'){\n\t\t\t\tthis.back();\n\t\t\t}\n\t\t}\n\t\tthis.setState({ activeStory: story });\n\t}\n\n\tonChange(e) {\n\t\tconst { name, value } = e.currentTarget;\n\t\tvar create_panel = this.state.create_panel;\n\t\tcreate_panel[name] = value;\n\t\tthis.setState({ create_panel: create_panel });\n\t}\n\n\tuploadFile(element, evt) {\n\t\tvar tgt = evt.target || window.event.srcElement,\n\t\t\tfiles = tgt.files;\n\t\tconst t = this;\n\t\tif (FileReader && files && files.length) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function () {\n\t\t\t\tvar res = fr.result; //base64 result, to get src -> array[0].props.src\n\t\t\t\tvar res1 = t.state.create_panel;\n\t\t\t\tif(files[files.length-1].type.includes('image')){\n\t\t\t\t\tif(element==='upload_sticker_img'){\n\t\t\t\t\t\tvar res10 = res1.hasOwnProperty('uploaded_stickers_img') ? res1.uploaded_stickers_img : [];\n\t\t\t\t\t\tres10.push(\n\t\t\t\t\t\t    <StickerImg\n\t\t\t\t\t\t\t\tmode={'small'}\n                                id={'uploaded_sticker_'+res10.length}\n                                src={res}\n\t\t\t\t\t\t\t\tonClick={(e)=>{ var id = parseInt(e.currentTarget.id.split('_')[2]); var res01 = t.state.create_panel; delete res01.uploaded_stickers_img[id];  t.setState({ create_panel: res01 }); }}\n                            />\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvar stickers_count = res10.filter(function(val){ return val !== undefined; }).length;\n\t\t\t\t\t\tif(stickers_count<100){\n\t\t\t\t\t\t\tres1.uploaded_stickers_img = res10;\n\t\t\t\t\t\t\tt.setState({ create_panel: res1 });\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tres1[element] = res;\n\t\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tres1[element] = null;\n\t\t\t\t\tt.setState({ create_panel: res1});\n\t\t\t\t}\n\t\t\t}\n\t\t\tfr.readAsDataURL(files[0]);\n\t\t}\n\n\t\t// Not supported\n\t\telse {\n\t\t\t// fallback -- perhaps submit the input to an iframe and temporarily store\n\t\t\t// them on the server until the user's session ends.\n\t\t}\n\t}\n\n\ttoggleCreateStickerContext () {\n\t\tthis.setState({ createStickerContextOpened: !this.state.createStickerContextOpened });\n\t}\n\n\turlToBase64(url, callback){\n\t\tvar img = new Image();\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.onload = function(){\n\t\t\tvar canvas = document.createElement('CANVAS'),\n\t\t\t\tctx = canvas.getContext('2d'), dataURL;\n\t\t\tcanvas.height = img.height;\n\t\t\tcanvas.width = img.width;\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t\tdataURL = canvas.toDataURL(\"image/png\");\n\t\t\tcallback(dataURL);\n\t\t\tcanvas = null;\n\t\t};\n\t\timg.src = url;\n\t}\n\n\tbase64ToMultipart(base64, callback) {\n\t\tfetch(base64)\n\t\t\t.then(res => res.blob())\n\t\t\t.then(blob => {\n\t\t\t\tconst fd = new FormData();\n\t\t\t\tconst file = new File([blob], \"sticker.png\");\n\t\t\t\tfd.append('file', file);\n\t\t\t\tcallback(fd);\n\t\t\t});\n\t}\n\n\tasync install(stickers_id) {\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tupload_url = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\"method\": \"docs.getUploadServer\", \"request_id\": \"upload_server\", \"params\": {\"v\":\"5.103\", \"access_token\":access_token}});\n\t\t\tupload_url = upload_url;\n\t\t\tconsole.log(upload_url);\n\t\t\tvar stickers = this.state.stickers[stickers_id].stickers;\n\t\t\tfor(var i in stickers){\n\t\t\t\tvar sticker_url = stickers[i].props.src;\n\t\t\t\tthis.urlToBase64(sticker_url, function(base64Img){\n\t\t\t\t\tthis.base64ToMultipart(base64Img, function (multipart) {\n\t\t\t\t\t\tconsole.log('base64',base64Img);\n\t\t\t\t\t\tconsole.log('multipart',multipart);\n\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t}catch (e) {\n\t\t\tconsole.log('error',e);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Epic activeStory={this.state.activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_main'}\n\t\t\t\t\t\tdata-story=\"tab_main\"\n\t\t\t\t\t><Icon28MarketOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_other'}\n\t\t\t\t\t\tdata-story=\"tab_other\"\n\t\t\t\t\t><Icon28UserOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"tab_main\" activePanel={this.state.activePanelShop} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back}>\n\t\t\t\t\t<Panel id=\"main\" separator={false}>\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex}\n\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex: slideIndex}); }}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Новинки</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"medium\"}}>\n\t\t\t\t\t\t\t\t\t<b>Популярные</b>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.stickers_panel}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"sticker_info\">\n\t\t\t\t\t\t<PanelHeader>Магазин</PanelHeader>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<Cell before={<StickerImg mode={'medium'} src={this.state.sticker_info.preview}/>} description={this.state.sticker_info.author}>{this.state.sticker_info.title}</Cell>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<StickerDescription>{this.state.sticker_info.description}</StickerDescription>\n\t\t\t\t\t\t\t<div style={{ marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t{this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0 ? <div style={{ display: 'flex' }}><Button onClick={()=>{ this.install(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Установить'}</Button> <Button style={{ marginLeft: '8px' }} mode={\"secondary\"} size={\"xl\"} stretched>{'Очистить'}</Button></div>: <div style={{ display: 'flex' }}><Button size={\"xl\"} stretched mode=\"commerce\">{'Получить за '+this.state.sticker_info.price+' руб.'}</Button></div>}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t<StickerGrid mode={\"small\"}>\n\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers}\n\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"tab_other\" activePanel={this.state.activePanelOther} popout={this.state.popout} history={this.state.historyOther} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"profile\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tПрофиль\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t<Avatar src={this.state.user.photo_100} size={100}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"large\"}}>\n\t\t\t\t\t\t\t\t{this.state.user.first_name+' '+this.state.user.last_name}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<Group separator=\"hide\">\n\t\t\t\t\t\t\t\t<Cell expandable onClick={()=> { this.setState({ balance_manipulation: !this.state.balance_manipulation }); }} indicator={this.state.user.balance+' ₽'}>Ваш баланс</Cell>\n\t\t\t\t\t\t\t\t{this.state.balance_manipulation && <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Down/>}>Пополнить</Button>\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Up/>} mode=\"secondary\" style={{ marginLeft: 8 }}>Вывести</Button>\n\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t<Group separator=\"hide\" header={<Header mode=\"primary\">Ваши стикеры</Header>}>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"big\"}>\n\t\t\t\t\t\t\t\t\t\t{this.state.user_stickers}\n\t\t\t\t\t\t\t\t\t\t<StickerImg mode={'big'} onClick={()=> { this.go(\"create\"); }}>\n                                            +\n                                        </StickerImg>\n\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"create\">\n\t\t\t\t\t\t<PanelHeaderSimple>\n\t\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.createStickerContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tДобавить стикеры\n\t\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContext opened={this.state.createStickerContextOpened} onClose={ () => { this.toggleCreateStickerContext(); }}>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={<Icon28HistoryForwardOutline/>}\n\t\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); this.go(\"stickers_history\") }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</PanelHeaderContext>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Название стикер-пака\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.title}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? '' : 'Максимальная длина - 20' : 'Пожалуйста, введите название'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Описание\"\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.description}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? '' : 'Максимальная длина - 100' : 'Пожалуйста, введите описание'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\ttop=\"Цена\"\n\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.price}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'error' : 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'Число должно быть целым' : '' : 'Максимальная цена- 1 000 руб.' : 'Минимальная цена - 1 руб.'}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\tsrc={this.state.create_panel.upload_preview_img && this.state.create_panel.upload_preview_img}\n\t\t\t\t\t\t\t\ttitle={'Превью'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите главную фотографию стикер-пака (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_preview_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\ttitle={'Стикеры'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите все стикеры (минимум - 4), которые будут содержаться в паке (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_sticker_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ paddingBottom: \"16px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.create_panel.uploaded_stickers_img}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button size=\"xl\" disabled={this.state.create_panel.title ? this.state.create_panel.description ? this.state.create_panel.price > 0 ? this.state.create_panel.title.length <= 20 ? this.state.create_panel.description.length <= 100 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ?  true : this.state.create_panel.upload_preview_img ? this.state.create_panel.uploaded_stickers_img ? this.state.create_panel.uploaded_stickers_img.filter(function(val){ return val !== undefined; }).length >= 4 ? false : true : true : true : true : true : true : true : true : true }>Продолжить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id={\"stickers_history\"}>\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t{this.state.user_stickers_history && this.state.user_stickers_history.length > 0 ? <Div>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t{this.state.user_stickers_history}\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\ticon={<Icon56HistoryOutline/>}\n\t\t\t\t\t\t\t\theader={'Пусто'}\n\t\t\t\t\t\t\t\tstretched\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tВы пока еще не создавали стикеры\n\t\t\t\t\t\t\t</Placeholder>}\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n\t}\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}