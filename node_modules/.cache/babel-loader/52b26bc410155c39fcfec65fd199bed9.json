{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\DeathDate\\\\src\\\\App.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css';\nimport eruda from 'eruda';\nimport html2canvas from 'html2canvas';\nimport { Div, Panel, Title, Headline, View, FixedLayout, Button, ScreenSpinner, platform, ANDROID } from '@vkontakte/vkui';\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\nimport Icon24ImageFilterOutline from '@vkontakte/icons/dist/24/image_filter_outline';\nconst blueBackground = {\n  backgroundColor: 'var(--accent)'\n},\n      redBackground = {\n  backgroundColor: 'var(--dynamic_red)'\n},\n      os = platform();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.back = () => {\n      if (this.state.popout !== null) {\n        this.setState({\n          popout: null\n        });\n        return;\n      }\n\n      let _this$state = this.state,\n          activePanel = _this$state.activePanel,\n          history = _this$state.history;\n\n      if (activePanel === 'main') {\n        bridge.send('VKWebAppClose', {\n          status: 'success'\n        });\n      } else {\n        if (history.length === 1) {\n          bridge.send('VKWebAppClose', {\n            status: 'success'\n          });\n        } else if (history.length > 1) {\n          history.pop();\n          activePanel = history[history.length - 1];\n          this.setState({\n            activePanel\n          });\n          this.change_hash(activePanel);\n        }\n      }\n    };\n\n    this.state = {\n      popout: null,\n      history: ['main'],\n      activePanel: 'main',\n      time: '',\n      screen: false,\n      scheme: 'bright_light',\n      paralel: false\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.initializeApp = this.initializeApp.bind(this);\n    this.back = this.back.bind(this);\n    this.go = this.go.bind(this);\n    this.change_hash = this.change_hash.bind(this);\n    this.generateRandomTime = this.generateRandomTime.bind(this);\n    this.updateTime = this.updateTime.bind(this); //eruda.init();\n  }\n\n  async componentDidMount() {\n    let generated = await this.generateRandomTime(false);\n    this.updateTime();\n    window.addEventListener('popstate', e => {\n      e.preventDefault();\n      this.back(e);\n    });\n    bridge.subscribe(async ({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type !== undefined) console.log(type, data);\n\n      if (type === 'VKWebAppUpdateConfig') {\n        const schemeAttribute = document.createAttribute('scheme');\n        schemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'space_gray';\n        document.body.attributes.setNamedItem(schemeAttribute);\n        this.setState({\n          scheme: schemeAttribute.value\n        });\n\n        if (bridge.supports('VKWebAppSetViewSettings')) {\n          bridge.send('VKWebAppSetViewSettings', {\n            status_bar_style: 'dark',\n            action_bar_color: 'none'\n          });\n        }\n      } else if (type === 'VKWebAppViewRestore') {\n        this.setState({\n          popout: null,\n          screen: false\n        });\n        let shapes = document.getElementsByClassName('bg_shape_container');\n\n        for (let element of shapes) {\n          try {\n            console.log('delete', element);\n            element.remove();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n    });\n    this.initializeApp();\n  }\n\n  async initializeApp() {\n    try {\n      let sValues = await bridge.sendPromise('VKWebAppStorageGet', {\n        keys: ['date1', 'date2', 'reason1', 'reason2']\n      });\n      this.setState({\n        sValues: sValues.keys\n      });\n    } catch (e) {}\n\n    let hash = window.location.hash;\n\n    if (hash) {\n      hash = hash.replace('#', '');\n      this.go(hash);\n    } else {\n      this.change_hash('main');\n    }\n\n    let imgs = ['https://image.flaticon.com/icons/svg/2893/2893113.svg', 'https://image.flaticon.com/icons/svg/2893/2893195.svg', 'https://image.flaticon.com/icons/svg/2484/2484569.svg', 'https://image.flaticon.com/icons/svg/2484/2484597.svg'];\n    let bgInterval = setInterval(() => {\n      let shape_container = document.createElement('div');\n      shape_container.className = 'bg_shape_container';\n      let shape = document.createElement('img');\n      shape.className = 'bg_shape light_outline';\n      shape.src = imgs[this.random(0, imgs.length)];\n      shape.style.left = this.random(-15, 90) + 'vw';\n      shape_container.appendChild(shape);\n      document.getElementById('bg_shapes').appendChild(shape_container);\n\n      for (let i = 0; i < 5; i++) {\n        shape.style.setProperty('--offset-x-' + i, this.random(-20, 20) + 'vw');\n      }\n\n      setTimeout(() => {\n        try {\n          shape_container.remove();\n        } catch (e) {}\n      }, 10000);\n    }, 600);\n    await this.sleep(500);\n    bridge.send('VKWebAppInit');\n  }\n\n  async generateRandomTime(isParalel) {\n    let timeDate = await new Date(Date.now() + this.random(1 * 60 * 60 * 1000, 100 * 365 * 24 * 60 * 60 * 1000));\n    let reasons = ['голода', 'жажды', 'диеты', 'нехватки кислорода'];\n\n    if (!this.state.reason2) {\n      if (this.state.sValues === undefined) {\n        let rId = this.random(0, reasons.length);\n\n        if (isParalel) {\n          await this.setState({\n            reason2: reasons[rId]\n          });\n          await this.setState({\n            timeDate2: timeDate\n          });\n\n          if (bridge.supports('VKWebAppStorageSet')) {\n            try {\n              await bridge.sendPromise('VKWebAppStorageSet', {\n                key: 'date2',\n                value: timeDate.toString()\n              });\n              await bridge.sendPromise('VKWebAppStorageSet', {\n                key: 'reason2',\n                value: rId.toString()\n              });\n            } catch (e) {\n              console.error('e1', e);\n            }\n          }\n        } else {\n          await this.setState({\n            reason: reasons[rId]\n          });\n          await this.setState({\n            timeDate\n          });\n\n          if (bridge.supports('VKWebAppStorageSet')) {\n            try {\n              await bridge.sendPromise('VKWebAppStorageSet', {\n                key: 'date1',\n                value: timeDate.toString()\n              });\n              await bridge.sendPromise('VKWebAppStorageSet', {\n                key: 'reason1',\n                value: rId.toString()\n              });\n            } catch (e) {\n              console.error('e2', e);\n            }\n          }\n        }\n      } else {\n        let sValues = this.state.sValues;\n        let data = {};\n\n        for (let value of sValues) {\n          data[value.key] = Number(value.value);\n        }\n\n        if (isParalel) {\n          await this.setState({\n            reason2: reasons[data.reason2]\n          });\n          await this.setState({\n            timeDate2: data.date2\n          });\n        } else {\n          await this.setState({\n            reason: reasons[data.reason1]\n          });\n          await this.setState({\n            timeDate: data.date1\n          });\n        }\n      }\n    }\n\n    await this.setState({\n      paralel: isParalel\n    });\n    return true;\n  }\n\n  updateTime() {\n    setInterval(() => {\n      try {\n        let timeMs = (this.state.paralel ? this.state.timeDate2.getTime() : this.state.timeDate.getTime()) - Date.now();\n        let years, days, hours, minutes, seconds;\n        let yMs = 1000 * 60 * 60 * 24 * 365,\n            dMs = yMs / 365,\n            hMs = dMs / 24,\n            minMs = hMs / 60,\n            sMs = minMs / 60;\n        years = Math.floor(timeMs / yMs);\n        timeMs -= yMs;\n        days = Math.floor(timeMs / dMs) % 365;\n        timeMs -= dMs;\n        hours = Math.floor(timeMs / hMs) % 24;\n        timeMs -= hMs;\n        minutes = Math.floor(timeMs / minMs) % 60;\n        timeMs -= minMs;\n        seconds = Math.floor(timeMs / sMs) % 60;\n        timeMs -= sMs;\n        let times = [[years, 'лет'], [days, 'дней'], [hours, 'ч.'], [minutes, 'мин.'], [seconds, 'сек.']],\n            timesText = [];\n\n        for (let i = 0; i < times.length; i++) {\n          if (times[i][0] > 0) timesText.push(times[i][0] + ' ' + times[i][1]);\n        }\n\n        this.setState({\n          time: timesText.join(', ')\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    }, 500);\n  }\n\n  go(panel) {\n    let history = this.state.history;\n\n    if (history[history.length - 1] !== panel) {\n      history.push(panel);\n      window.history.pushState({\n        activePanel: panel\n      }, 'Title');\n      this.setState({\n        activePanel: panel,\n        history,\n        snackbar: null\n      });\n    }\n\n    this.change_hash(panel);\n  }\n\n  change_hash(panel) {\n    bridge.send(\"VKWebAppSetLocation\", {\n      \"location\": panel\n    });\n  }\n\n  sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  random(min, max) {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n\n  render() {\n    return React.createElement(View, {\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      history: this.state.history,\n      onSwipeBack: this.back,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(Panel, {\n      id: \"main\",\n      style: {\n        height: '100vh',\n        width: '100vw'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"bg_shapes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        width: '80vw',\n        textAlign: 'center',\n        paddingBottom: ''\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(Title, {\n      level: \"1\",\n      weight: \"semibold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"\\u041C\\u043D\\u0435 \\u043E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \", React.createElement(\"span\", {\n      style: {\n        backgroundImage: 'linear-gradient(to left, #fc6076 0%, #ff9a44 100%)',\n        color: 'white',\n        lineHeight: '18px',\n        padding: '4px 4px 8px 4px',\n        display: 'inline-block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, \"\\u0436\\u0438\\u0442\\u044C\")), React.createElement(Title, {\n      level: \"2\",\n      weight: \"semibold\",\n      style: {\n        marginTop: '12px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, this.state.time), React.createElement(Headline, {\n      weight: \"semibold\",\n      style: {\n        marginTop: '12px',\n        color: 'white',\n        background: 'linear-gradient(to right, #ed6ea0 0%, #ec8c69 100%)',\n        padding: '4px',\n        display: 'inline-block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, 'Я умру из-за ' + (this.state.paralel ? this.state.reason2 : this.state.reason)), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }), React.createElement(Button, {\n      before: React.createElement(Icon24ImageFilterOutline, {\n        width: 20,\n        height: 20,\n        style: {\n          paddingRight: '4px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }),\n      size: \"l\",\n      style: {\n        marginTop: '12px',\n        display: this.state.screen && 'none'\n      },\n      onClick: async () => {\n        await this.generateRandomTime(!this.state.paralel);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, this.state.paralel ? 'Вернуться' : 'Паралельная вселенная')), React.createElement(FixedLayout, {\n      vertical: \"bottom\",\n      style: {\n        marginBottom: os === ANDROID ? '36px' : '12px',\n        display: this.state.screen && 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(Div, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: async () => {\n        this.setState({\n          popout: React.createElement(ScreenSpinner, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 256\n            },\n            __self: this\n          }),\n          screen: true\n        });\n        await this.sleep(250);\n        html2canvas(document.getElementsByClassName('View__panels')[0]).then(async canvas => {\n          let blob = canvas.toDataURL('image/png');\n\n          try {\n            await bridge.send('VKWebAppShowStoryBox', {\n              background_type: 'image',\n              blob,\n              attachment: {\n                url: 'https://vk.com/app7549544',\n                text: 'open',\n                type: 'url'\n              }\n            });\n          } catch (e) {}\n\n          this.setState({\n            popout: null,\n            screen: false\n          });\n        });\n      },\n      before: React.createElement(Icon28StoryOutline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }),\n      size: \"xl\",\n      mode: \"commerce\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0432 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\")))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/DeathDate/src/App.js"],"names":["React","bridge","eruda","html2canvas","Div","Panel","Title","Headline","View","FixedLayout","Button","ScreenSpinner","platform","ANDROID","Icon28StoryOutline","Icon24ImageFilterOutline","blueBackground","backgroundColor","redBackground","os","App","Component","constructor","props","back","state","popout","setState","activePanel","history","send","status","length","pop","change_hash","time","screen","scheme","paralel","componentDidMount","bind","initializeApp","go","generateRandomTime","updateTime","generated","window","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","body","attributes","setNamedItem","supports","status_bar_style","action_bar_color","shapes","getElementsByClassName","element","remove","error","sValues","sendPromise","keys","hash","location","replace","imgs","bgInterval","setInterval","shape_container","createElement","className","shape","src","random","style","left","appendChild","getElementById","i","setProperty","setTimeout","sleep","isParalel","timeDate","Date","now","reasons","reason2","rId","timeDate2","key","toString","reason","Number","date2","reason1","date1","timeMs","getTime","years","days","hours","minutes","seconds","yMs","dMs","hMs","minMs","sMs","Math","floor","times","timesText","push","join","panel","pushState","snackbar","ms","Promise","resolve","min","max","render","height","width","position","top","transform","textAlign","paddingBottom","backgroundImage","color","lineHeight","padding","display","marginTop","background","paddingRight","marginBottom","then","canvas","blob","toDataURL","background_type","attachment","url","text"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\nimport eruda from 'eruda';\nimport html2canvas from 'html2canvas';\n\nimport { Div, Panel, Title, Headline, View, FixedLayout, Button, ScreenSpinner, platform, ANDROID } from '@vkontakte/vkui';\n\nimport Icon28StoryOutline from '@vkontakte/icons/dist/28/story_outline';\nimport Icon24ImageFilterOutline from '@vkontakte/icons/dist/24/image_filter_outline';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, redBackground = {\n\tbackgroundColor: 'var(--dynamic_red)'\n}, os = platform();\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tpopout: null,\n\t\t\thistory: ['main'],\n\t\t\tactivePanel: 'main',\n\t\t\ttime: '',\n\t\t\tscreen: false,\n\t\t\tscheme: 'bright_light',\n\t\t\tparalel: false,\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t\tthis.generateRandomTime = this.generateRandomTime.bind(this);\n\t\tthis.updateTime = this.updateTime.bind(this);\n\t\t//eruda.init();\n\t}\n\n\tasync componentDidMount () {\n\t\tlet generated = await this.generateRandomTime(false);\n\n\t\tthis.updateTime();\n\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.back(e);\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = false ? data.scheme ? data.scheme : 'bright_light' : 'space_gray';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t\tthis.setState({ scheme: schemeAttribute.value });\n\t\t\t\tif(bridge.supports('VKWebAppSetViewSettings')){\n\t\t\t\t\tbridge.send('VKWebAppSetViewSettings', {status_bar_style: 'dark', action_bar_color: 'none'});\n\t\t\t\t}\n\t\t\t}else if (type === 'VKWebAppViewRestore') {\n\t\t\t\tthis.setState({ popout: null, screen: false });\n\t\t\t\tlet shapes = document.getElementsByClassName('bg_shape_container');\n\t\t\t\tfor(let element of shapes){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tconsole.log('delete', element);\n\t\t\t\t\t\telement.remove();\n\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.initializeApp();\n\t}\n\n\tasync initializeApp() {\n\t\ttry{\n\t\t\tlet sValues = await bridge.sendPromise('VKWebAppStorageGet', {keys: ['date1', 'date2', 'reason1', 'reason2']});\n\t\t\tthis.setState({ sValues: sValues.keys });\n\t\t}catch (e) {}\n\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tthis.go(hash);\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\n\t\tlet imgs = ['https://image.flaticon.com/icons/svg/2893/2893113.svg',\n\t\t\t'https://image.flaticon.com/icons/svg/2893/2893195.svg',\n\t\t\t'https://image.flaticon.com/icons/svg/2484/2484569.svg',\n\t\t\t'https://image.flaticon.com/icons/svg/2484/2484597.svg'];\n\n\t\tlet bgInterval = setInterval(()=>{\n\t\t\tlet shape_container = document.createElement('div');\n\t\t\tshape_container.className = 'bg_shape_container';\n\t\t\tlet shape = document.createElement('img');\n\t\t\tshape.className = 'bg_shape light_outline';\n\t\t\tshape.src = imgs[this.random(0, imgs.length)];\n\t\t\tshape.style.left = (this.random(-15, 90)) + 'vw';\n\t\t\tshape_container.appendChild(shape);\n\t\t\tdocument.getElementById('bg_shapes').appendChild(shape_container);\n\t\t\tfor(let i = 0; i < 5; i++){\n\t\t\t\tshape.style.setProperty('--offset-x-' + i, this.random(-20, 20) +'vw');\n\t\t\t}\n\t\t\tsetTimeout(()=>{\n\t\t\t\ttry{\n\t\t\t\t\tshape_container.remove();\n\t\t\t\t}catch (e) {}\n\t\t\t}, 10000);\n\t\t}, 600);\n\t\tawait this.sleep(500);\n        bridge.send('VKWebAppInit');\n\t}\n\n\tasync generateRandomTime(isParalel){\n\t\tlet timeDate = await new Date(Date.now() + this.random(1 * 60 * 60 * 1000, 100 * 365 * 24 * 60 * 60 * 1000));\n\t\tlet reasons = ['голода', 'жажды', 'диеты', 'нехватки кислорода'];\n\t\tif (!this.state.reason2) {\n\t\t\tif(this.state.sValues === undefined) {\n\t\t\t\tlet rId = this.random(0, reasons.length);\n\t\t\t\tif (isParalel) {\n\t\t\t\t\tawait this.setState({reason2: reasons[rId]});\n\t\t\t\t\tawait this.setState({timeDate2: timeDate});\n\t\t\t\t\tif(bridge.supports('VKWebAppStorageSet')){\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'date2', value: timeDate.toString()});\n\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'reason2', value: rId.toString()});\n\t\t\t\t\t\t}catch (e) {console.error('e1',e);}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tawait this.setState({reason: reasons[rId]});\n\t\t\t\t\tawait this.setState({timeDate});\n\t\t\t\t\tif(bridge.supports('VKWebAppStorageSet')) {\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'date1', value: timeDate.toString()});\n\t\t\t\t\t\t\tawait bridge.sendPromise('VKWebAppStorageSet', {key: 'reason1', value: rId.toString()});\n\t\t\t\t\t\t}catch (e) {console.error('e2',e);}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tlet sValues = this.state.sValues;\n\t\t\t\tlet data = {};\n\t\t\t\tfor(let value of sValues){\n\t\t\t\t\tdata[value.key] = Number(value.value);\n\t\t\t\t}\n\t\t\t\tif (isParalel) {\n\t\t\t\t\tawait this.setState({reason2: reasons[data.reason2]});\n\t\t\t\t\tawait this.setState({timeDate2: data.date2});\n\t\t\t\t} else {\n\t\t\t\t\tawait this.setState({reason: reasons[data.reason1]});\n\t\t\t\t\tawait this.setState({timeDate: data.date1});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tawait this.setState({paralel: isParalel});\n\t\treturn true;\n\t}\n\tupdateTime() {\n\t\tsetInterval(()=>{\n\t\t\ttry{\n\t\t\t\tlet timeMs = (this.state.paralel ? this.state.timeDate2.getTime() : this.state.timeDate.getTime()) - Date.now();\n\n\t\t\t\tlet years, days, hours, minutes, seconds;\n\t\t\t\tlet yMs = 1000 * 60 * 60 * 24 * 365,\n\t\t\t\t\tdMs = yMs / 365,\n\t\t\t\t\thMs = dMs / 24,\n\t\t\t\t\tminMs = hMs / 60,\n\t\t\t\t\tsMs = minMs / 60;\n\n\t\t\t\tyears = Math.floor(timeMs / yMs); timeMs -= yMs;\n\t\t\t\tdays = Math.floor(timeMs / dMs) % 365; timeMs -= dMs;\n\t\t\t\thours = Math.floor(timeMs / hMs) % 24; timeMs -= hMs;\n\t\t\t\tminutes = Math.floor(timeMs / minMs) % 60; timeMs -= minMs;\n\t\t\t\tseconds = Math.floor(timeMs / sMs) % 60; timeMs -= sMs;\n\n\t\t\t\tlet times = [ [ years, 'лет' ],\n\t\t\t\t\t\t[ days, 'дней' ],\n\t\t\t\t\t\t[ hours, 'ч.' ],\n\t\t\t\t\t\t[ minutes, 'мин.' ],\n\t\t\t\t\t\t[ seconds, 'сек.' ]],\n\n\t\t\t\t\ttimesText = [];\n\n\t\t\t\tfor(let i = 0; i < times.length; i++){\n\t\t\t\t\tif (times[i][0] > 0) timesText.push(times[i][0] + ' ' + times[i][1]);\n\t\t\t\t}\n\n\t\t\t\tthis.setState({ time: timesText.join(', ') });\n\t\t\t}catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\tback = () => {\n\t\tif(this.state.popout !== null){\n\t\t\tthis.setState({ popout: null });\n\t\t\treturn ;\n\t\t}\n\t\tlet { activePanel, history } = this.state;\n\t\tif(activePanel === 'main'){\n\t\t\tbridge.send('VKWebAppClose', {status: 'success'});\n\t\t}else {\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send('VKWebAppClose', {status: 'success'});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tactivePanel = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel});\n\t\t\t\tthis.change_hash(activePanel);\n\t\t\t}\n\t\t}\n\t};\n\tgo(panel) {\n\t\tlet history = this.state.history;\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\twindow.history.pushState({activePanel: panel}, 'Title');\n\t\t\tthis.setState({activePanel: panel, history, snackbar: null});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": panel});\n\t}\n\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\trandom(min, max) {\n\t\treturn Math.floor(Math.random() * (max - min) + min);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} history={this.state.history} onSwipeBack={this.back}>\n\t\t\t\t<Panel id='main' style={{ height: '100vh', width: '100vw' }}>\n\t\t\t\t\t<div id='bg_shapes'/>\n\t\t\t\t\t<div style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', width: '80vw', textAlign: 'center', paddingBottom: '' }}>\n\t\t\t\t\t\t<Title level='1' weight='semibold'>Мне осталось <span style={{ backgroundImage: 'linear-gradient(to left, #fc6076 0%, #ff9a44 100%)', color: 'white', lineHeight: '18px', padding: '4px 4px 8px 4px', display: 'inline-block' }}>жить</span></Title>\n\t\t\t\t\t\t<Title level='2' weight='semibold' style={{ marginTop: '12px' }}>{this.state.time}</Title>\n\t\t\t\t\t\t<Headline weight='semibold' style={{ marginTop: '12px', color: 'white', background: 'linear-gradient(to right, #ed6ea0 0%, #ec8c69 100%)', padding: '4px', display: 'inline-block' }}>{ 'Я умру из-за ' + ( this.state.paralel ? this.state.reason2: this.state.reason ) }</Headline><br/>\n\t\t\t\t\t\t<Button before={<Icon24ImageFilterOutline width={20} height={20} style={{ paddingRight: '4px' }}/>} size='l' style={{ marginTop: '12px', display: this.state.screen && 'none' }} onClick={async ()=>{ await this.generateRandomTime(!this.state.paralel); }}>{ this.state.paralel ? 'Вернуться' : 'Паралельная вселенная' }</Button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<FixedLayout vertical='bottom' style={{ marginBottom: os === ANDROID ? '36px' : '12px', display: this.state.screen && 'none' }}>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<Button onClick={async ()=>{\n\t\t\t\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/>, screen: true });\n\t\t\t\t\t\t\t\tawait this.sleep(250);\n\t\t\t\t\t\t\t\thtml2canvas(document.getElementsByClassName('View__panels')[0]).then(async canvas => {\n\t\t\t\t\t\t\t\t\tlet blob = canvas.toDataURL('image/png');\n\t\t\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\t\t\tawait bridge.send('VKWebAppShowStoryBox', { background_type: 'image', blob, attachment: { url: 'https://vk.com/app7549544', text: 'open', type: 'url' } });\n\t\t\t\t\t\t\t\t\t}catch (e) {}\n\t\t\t\t\t\t\t\t\tthis.setState({ popout: null, screen: false });\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} before={<Icon28StoryOutline/>} size='xl' mode='commerce'>Поделиться в истории</Button>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t</FixedLayout>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}