{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./App.css';import eruda from'eruda';import{Panel,PanelHeader,Div,Footer,View,ScreenSpinner,ModalPage,ModalCard,ModalRoot,ModalPageHeader,List,Cell,CellButton,InfoRow,Progress,Gallery,Counter,FormLayout,Input,Placeholder,Snackbar,Avatar,Group,Alert,Epic,Tabbar,TabbarItem,Card,CardGrid,Link,Tooltip,Tabs,TabsItem,platform,IOS,PanelHeaderSimple,PanelHeaderContent,PanelHeaderContext}from'@vkontakte/vkui';import Icon24Write from'@vkontakte/icons/dist/24/write';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import{CardButton}from\"./components/CardButton\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.goBack=function(){var panel=_this.state.activePanel;if(panel==='main'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{var history=_this.state.history;if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();var p=history[history.length-1];_this.setState({activePanel:p});}}};_this.state={activePanel:'main',history:[\"main\"],mainContextOpened:false,popout:React.createElement(ScreenSpinner,null),user:{first_name:'',last_name:'',photo_100:''},end:0,cardsMap:[],cards:null,maxCards:30,gold:'https://i.ibb.co/kHKsYbz/gold.png',emerald:'https://i.ibb.co/6bpJt6Y/emerald.png',iron:'https://i.ibb.co/KLs7Pjb/iron.png',cobblestone:'https://i.ibb.co/mvvLWTF/cobblestone.png'};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.setCards=_this.setCards.bind(_assertThisInitialized(_this));_this.toggleMainContext=_this.toggleMainContext.bind(_assertThisInitialized(_this));_this.goBack=_this.goBack.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;eruda.init({tool:['console']});window.addEventListener('popstate',function(e){e.preventDefault();_this2.goBack(e);});bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;console.log(type,data);if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}else if(type==='VKWebAppGetUserInfoResult'){_this2.setState({popout:null,user:data});_this2.initializeApp();}});bridge.send('VKWebAppGetUserInfo');}},{key:\"initializeApp\",value:function initializeApp(){var _this3=this;this.setCards();setInterval(function(){if(_this3.state.activePanel==='mine'){var end=_this3.state.end-1;_this3.setState({end:end});if(end<0){_this3.setCards();}}},1000);}},{key:\"goToPage\",value:function goToPage(page){this.state.history.push(page);window.history.pushState({panel:page},'Title');this.setState({activePanel:page});}},{key:\"randInt\",value:function randInt(min,max){return Math.floor(Math.random()*Math.floor(max+1))+min;}},{key:\"setCards\",value:function setCards(){var _this4=this;this.setState({end:5});var cardsMap=[];for(var i=0;i<this.state.maxCards;i++){cardsMap.push(i);}this.setState({cardsMap:cardsMap});var cards=[];var _this$state=this.state,cobblestone=_this$state.cobblestone,iron=_this$state.iron,emerald=_this$state.emerald,gold=_this$state.gold;for(var i=1;i<=this.state.maxCards;i++){var ore1=this.randInt(0,1);var resource=i%this.randInt(i,this.state.maxCards-i)===0?ore1===0?gold:emerald:ore1===0?cobblestone:iron;var card=React.createElement(\"div\",{className:\"card\",id:\"card_\"+(i-1)+'_'+resource,onClick:function onClick(e){var cards=_this4.state.cards;var id=e.currentTarget.id.split('_');cards[id[1]]=React.createElement(\"div\",{className:\"card\"});_this4.setState({cards:cards});},style:{width:50,height:50}},React.createElement(\"div\",{className:\"card_content\"},\" \",React.createElement(\"img\",{src:resource,style:{height:\"80%\"}})));cards.push(card);}this.setState({cards:cards});}},{key:\"toggleMainContext\",value:function toggleMainContext(){this.setState({mainContextOpened:!this.state.mainContextOpened});}},{key:\"render\",value:function render(){var _this5=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout,header:false,history:this.state.history,onSwipeBack:this.goBack},React.createElement(Panel,{id:\"main\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,{aside:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.mainContextOpened?'180deg':'0',\")\")}}),before:React.createElement(Avatar,{size:36,src:this.state.user.photo_100}),onClick:function onClick(){_this5.toggleMainContext();}},this.state.user.first_name+' '+this.state.user.last_name)),React.createElement(PanelHeaderContext,{opened:this.state.mainContextOpened,onClose:function onClose(){_this5.toggleMainContext();}},React.createElement(List,null,React.createElement(Cell,{before:React.createElement(Icon24Write,null),onClick:function onClick(){_this5.toggleMainContext();}},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043D\\u0438\\u043A\"))),React.createElement(Group,null,React.createElement(List,null,React.createElement(Cell,{indicator:\"10/100\"},\"\\u0423\\u0440\\u043E\\u0432\\u0435\\u043D\\u044C: 1\"),React.createElement(Progress,{style:{marginLeft:\"16px\",marginRight:\"16px\"},value:40}),React.createElement(\"br\",null),React.createElement(Cell,{indicator:\"1 000\"},\"\\u041C\\u043E\\u043D\\u0435\\u0442\\u044B\"),React.createElement(Cell,{indicator:\"10/30\"},\"\\u0414\\u043E\\u0441\\u0442\\u0438\\u0436\\u0435\\u043D\\u0438\\u044F\"))),React.createElement(CardButton,{title:\"\\u0428\\u0430\\u0445\\u0442\\u0430\",desc:\"\\u0414\\u043E\\u0431\\u044B\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u044B \\u0432\\u043C\\u0435\\u0441\\u0442\\u0435 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u0438\\u043C\\u0438 \\u0438\\u0433\\u0440\\u043E\\u043A\\u0430\\u043C\\u0438 \\u043F\\u043E \\u0431\\u043B\\u0438\\u0437\\u043E\\u0441\\u0442\\u0438.\",bg:\"linear-gradient(71deg, #439ce0, #75b2e0)\",img:\"https://i.ibb.co/bXzgD6b/icon-mine.png\",goRef:function goRef(){_this5.goToPage('mine');}}),React.createElement(CardButton,{title:\"\\u0412\\u0435\\u0440\\u0441\\u0442\\u0430\\u043A\",desc:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442\\u044B \\u0438\\u0437 \\u0441\\u0432\\u043E\\u0438\\u0445 \\u0434\\u043E\\u0431\\u044B\\u0442\\u044B\\u0445 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043E\\u0432, \\u043F\\u0435\\u0440\\u0435\\u043F\\u043B\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435 \\u0440\\u0443\\u0434\\u0443.\",bg:\"linear-gradient(251deg, #306fb8, #1f5899)\",img:\"https://i.ibb.co/vLYrt3C/icon-craft.png\",goRef:function goRef(){}}),React.createElement(CardButton,{title:\"\\u0418\\u043D\\u0432\\u0435\\u043D\\u0442\\u0430\\u0440\\u044C\",desc:\"\\u0421\\u0432\\u043E\\u0438 \\u0434\\u043E\\u0431\\u044B\\u0442\\u044B\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u044B \\u0438 \\u043E\\u0441\\u0442\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442\\u044B \\u043D\\u0430\\u0445\\u043E\\u0434\\u044F\\u0442\\u0441\\u044F \\u0437\\u0434\\u0435\\u0441\\u044C.\",bg:\"linear-gradient(71deg, #65aae6, #8fceff)\",img:\"https://i.ibb.co/YX3qSSy/ic-inventory.png\",goRef:function goRef(){}}),React.createElement(CardButton,{title:\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\",desc:\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0439\\u0442\\u0435 \\u0435\\u0436\\u0435\\u0434\\u043D\\u0435\\u0432\\u043D\\u044B\\u0435 \\u043F\\u043E\\u0434\\u0430\\u0440\\u043A\\u0438, \\u0438 \\u043F\\u043E\\u043A\\u0443\\u043F\\u0430\\u0439\\u0442\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0435 \\u043F\\u043E\\u043C\\u043E\\u0433\\u0443\\u0442 \\u0432\\u0430\\u043C \\u0440\\u0430\\u0437\\u0432\\u0438\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F.\",bg:\"linear-gradient(71deg, #d12e2e, #eb5050)\",img:\"https://i.ibb.co/tzVxBgz/icon-shop.png\",goRef:function goRef(){}})),React.createElement(Panel,{id:\"mine\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u0428\\u0430\\u0445\\u0442\\u0430\")),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}},React.createElement(\"div\",{className:\"grid\"},this.state.cards)),React.createElement(Div,null,React.createElement(Footer,null,\"\\u0414\\u043E \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438: \",this.state.end))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/Miner/src/App.js"],"names":["React","bridge","eruda","Panel","PanelHeader","Div","Footer","View","ScreenSpinner","ModalPage","ModalCard","ModalRoot","ModalPageHeader","List","Cell","CellButton","InfoRow","Progress","Gallery","Counter","FormLayout","Input","Placeholder","Snackbar","Avatar","Group","Alert","Epic","Tabbar","TabbarItem","Card","CardGrid","Link","Tooltip","Tabs","TabsItem","platform","IOS","PanelHeaderSimple","PanelHeaderContent","PanelHeaderContext","Icon24Write","Icon16Dropdown","CardButton","App","props","goBack","panel","state","activePanel","send","history","length","pop","p","setState","mainContextOpened","popout","user","first_name","last_name","photo_100","end","cardsMap","cards","maxCards","gold","emerald","iron","cobblestone","componentDidMount","bind","initializeApp","setCards","toggleMainContext","init","tool","window","addEventListener","e","preventDefault","subscribe","detail","type","data","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","setInterval","page","push","pushState","min","max","Math","floor","random","i","ore1","randInt","resource","card","id","currentTarget","split","width","height","transform","marginLeft","marginRight","goToPage","display","alignItems","justifyContent","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './App.css'\nimport eruda from 'eruda';\n\nimport { Panel, PanelHeader, Div , Footer, View , ScreenSpinner , ModalPage , ModalCard , ModalRoot , ModalPageHeader\n\t, List , Cell , CellButton , InfoRow , Progress , Gallery , Counter , FormLayout , Input , Placeholder , Snackbar , Avatar , Group , Alert, Epic, Tabbar, TabbarItem, Card, CardGrid, Link\n\t, Tooltip , Tabs , TabsItem, platform, IOS, PanelHeaderSimple, PanelHeaderContent, PanelHeaderContext  } from '@vkontakte/vkui';\nimport Icon24Write from '@vkontakte/icons/dist/24/write';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\n\nimport { CardButton } from \"./components/CardButton\";\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'main',\n\t\t\thistory: [\"main\"],\n\t\t\tmainContextOpened: false,\n\t\t\tpopout: <ScreenSpinner/>,\n\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: ''\n\t\t\t},\n\t\t\tend: 0,\n\t\t\tcardsMap: [],\n\t\t\tcards: null,\n\t\t\tmaxCards: 30,\n\t\t\tgold: 'https://i.ibb.co/kHKsYbz/gold.png',\n\t\t\temerald: 'https://i.ibb.co/6bpJt6Y/emerald.png',\n\t\t\tiron: 'https://i.ibb.co/KLs7Pjb/iron.png',\n\t\t\tcobblestone: 'https://i.ibb.co/mvvLWTF/cobblestone.png'\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.setCards = this.setCards.bind(this);\n\t\tthis.toggleMainContext = this.toggleMainContext.bind(this);\n\t\tthis.goBack = this.goBack.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\teruda.init({ tool: ['console'] });\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tthis.goBack(e);\n\t\t});\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tconsole.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tthis.setState({ popout: null, user: data });\n\t\t\t\tthis.initializeApp();\n\t\t\t}\n\t\t});\n\t\tbridge.send('VKWebAppGetUserInfo');\n\t}\n\n\tinitializeApp() {\n\t\tthis.setCards();\n\t\tsetInterval(()=>{\n\t\t\tif(this.state.activePanel === 'mine'){\n\t\t\t\tvar end = this.state.end-1;\n\t\t\t\tthis.setState({end});\n\t\t\t\tif(end<0){\n\t\t\t\t\tthis.setCards();\n\t\t\t\t}\n\t\t\t}\n\t\t},1000);\n\t}\n\n\tgoBack = () => {\n\t\tlet panel = this.state.activePanel;\n\t\tif(panel==='main'){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = this.state.history;\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({activePanel: p});\n\t\t\t}\n\t\t}\n\t};\n\n\tgoToPage(page) {\n\t\tthis.state.history.push(page);\n\t\twindow.history.pushState({panel: page}, 'Title');\n\t\tthis.setState({activePanel: page});\n\t}\n\n\trandInt(min, max) {\n\t\treturn Math.floor(Math.random() * Math.floor(max+1))+min;\n\t}\n\n\tsetCards() {\n\t\tthis.setState({ end: 5 });\n\t\tvar cardsMap = [];\n\t\tfor(var i = 0; i < this.state.maxCards; i++){\n\t\t\tcardsMap.push(i);\n\t\t}\n\t\tthis.setState({ cardsMap});\n\t\tvar cards = [];\n\n\t\tconst { cobblestone, iron, emerald, gold } = this.state;\n\t\tfor(var i = 1; i <= this.state.maxCards; i++){\n\t\t\tvar ore1 = this.randInt(0,1);\n\t\t\tvar resource = i%this.randInt(i, this.state.maxCards-i)===0 ? (ore1===0 ? gold : emerald) : (ore1===0 ? cobblestone : iron);\n\t\t\tvar card = <div className={\"card\"} id={\"card_\"+(i-1)+'_'+resource} onClick={(e)=> {\n\t\t\t\tvar cards = this.state.cards;\n\t\t\t\tvar id = e.currentTarget.id.split('_');\n\t\t\t\tcards[id[1]] = <div className={\"card\"}/>;\n\t\t\t\tthis.setState({cards: cards});\n\t\t\t}} style={{ width: 50, height: 50}}><div className={\"card_content\"}> <img src={resource} style={{height: \"80%\"}}/></div></div>;\n\t\t\tcards.push(card);\n\t\t}\n\t\tthis.setState({ cards });\n\t}\n\n\ttoggleMainContext () {\n\t\tthis.setState({ mainContextOpened: !this.state.mainContextOpened });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} header={false} history={this.state.history} onSwipeBack={this.goBack}>\n\t\t\t\t<Panel id=\"main\">\n\t\t\t\t\t<PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.mainContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\tbefore={<Avatar size={36} src={this.state.user.photo_100} />}\n\t\t\t\t\t\t\tonClick={ () => { this.toggleMainContext(); }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.state.user.first_name + ' ' + this.state.user.last_name}\n\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t<PanelHeaderContext opened={this.state.mainContextOpened} onClose={ () => { this.toggleMainContext(); }}>\n\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\tbefore={<Icon24Write/>}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleMainContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tИзменить ник\n\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</PanelHeaderContext>\n\n\t\t\t\t\t<Group>\n\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t<Cell indicator=\"10/100\">Уровень: 1</Cell>\n\t\t\t\t\t\t\t<Progress style={{ marginLeft: \"16px\", marginRight: \"16px\" }} value={40} />\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<Cell indicator=\"1 000\">Монеты</Cell>\n\t\t\t\t\t\t\t<Cell indicator=\"10/30\">Достижения</Cell>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Group>\n\t\t\t\t\t<CardButton\n\t\t\t\t\t\ttitle='Шахта'\n\t\t\t\t\t\tdesc='Добывайте ресурсы вместе с другими игроками по близости.'\n\t\t\t\t\t\tbg='linear-gradient(71deg, #439ce0, #75b2e0)'\n\t\t\t\t\t\timg='https://i.ibb.co/bXzgD6b/icon-mine.png'\n\t\t\t\t\t\tgoRef={ () => { this.goToPage('mine'); } }\n\t\t\t\t\t/>\n\t\t\t\t\t<CardButton\n\t\t\t\t\t\ttitle='Верстак'\n\t\t\t\t\t\tdesc='Создавайте предметы из своих добытых ресурсов, переплавляйте руду.'\n\t\t\t\t\t\tbg='linear-gradient(251deg, #306fb8, #1f5899)'\n\t\t\t\t\t\timg='https://i.ibb.co/vLYrt3C/icon-craft.png'\n\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t/>\n\t\t\t\t\t<CardButton\n\t\t\t\t\t\ttitle='Инвентарь'\n\t\t\t\t\t\tdesc='Свои добытые ресурсы и остальные предметы находятся здесь.'\n\t\t\t\t\t\tbg='linear-gradient(71deg, #65aae6, #8fceff)'\n\t\t\t\t\t\timg='https://i.ibb.co/YX3qSSy/ic-inventory.png'\n\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t/>\n\t\t\t\t\t<CardButton\n\t\t\t\t\t\ttitle='Магазин'\n\t\t\t\t\t\tdesc='Получайте ежедневные подарки, и покупайте товары, которые помогут вам развиваться.'\n\t\t\t\t\t\tbg='linear-gradient(71deg, #d12e2e, #eb5050)'\n\t\t\t\t\t\timg='https://i.ibb.co/tzVxBgz/icon-shop.png'\n\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t/>\n\t\t\t\t</Panel>\n\t\t\t\t<Panel id=\"mine\">\n\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\tШахта\n\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n\t\t\t\t\t\t<div className={\"grid\"}>\n\t\t\t\t\t\t\t{this.state.cards}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Footer>\n\t\t\t\t\t\t\tДо перезагрузки: {this.state.end}\n\t\t\t\t\t\t</Footer>\n\t\t\t\t\t</Div>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}