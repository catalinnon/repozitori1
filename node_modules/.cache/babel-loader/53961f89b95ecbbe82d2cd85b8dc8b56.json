{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\VKStickers2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./css/App.css';import{Panel,PanelHeader,Div,View,ScreenSpinner,List,Cell,Gallery,FormLayout,Input,Avatar,Group,Epic,Tabbar,TabbarItem,Separator,Button,PanelHeaderContext,Header,PanelHeaderSimple,PanelHeaderContent,Placeholder,Tabs,TabsItem,PullToRefresh,Snackbar,Textarea,PanelHeaderBack,PanelHeaderClose,CellButton,Alert}from'@vkontakte/vkui';import Icon16Spinner from'@vkontakte/icons/dist/16/spinner';import Icon16Done from'@vkontakte/icons/dist/16/done';import Icon16Cancel from'@vkontakte/icons/dist/16/cancel';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import Icon16Down from'@vkontakte/icons/dist/16/down';import Icon16Up from'@vkontakte/icons/dist/16/up';import Icon28ReportOutline from'@vkontakte/icons/dist/28/report_outline';import Icon28ShareOutline from'@vkontakte/icons/dist/28/share_outline';import Icon28CancelOutline from'@vkontakte/icons/dist/28/cancel_outline';import Icon28WriteOutline from'@vkontakte/icons/dist/28/write_outline';import Icon28HistoryForwardOutline from'@vkontakte/icons/dist/28/history_forward_outline';import Icon28MarketOutline from'@vkontakte/icons/dist/28/market_outline';import Icon28UserOutline from'@vkontakte/icons/dist/28/user_outline';import Icon56HistoryOutline from'@vkontakte/icons/dist/56/history_outline';import{StickerImg}from\"./components/StickerImg\";import{StickerButton}from\"./components/StickerButton\";import{StickerDescription}from\"./components/StickerDescription\";import{StickerGrid}from\"./components/StickerGrid\";import{StickerUploadButton}from\"./components/StickerUploadButton\";import{CardElements}from\"./components/CardElements\";import{CardElement}from\"./components/CardElement\";import request from\"request\";var access_token='',upload_url1='';var blueBackground={backgroundColor:'var(--accent)'},redBackground={backgroundColor:'var(--dynamic_red)'};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.back=function(){var activeStory=_this.state.activeStory;var activePanel=activeStory==='tab_main'?_this.state.activePanelShop:activeStory==='tab_other'?_this.state.activePanelOther:'';var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';if(activeStory==='tab_main'&&activePanel==='main'||activeStory==='tab_other'&&activePanel==='profile'){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else{var history=activeStory==='tab_main'?_this.state.historyShop:activeStory==='tab_other'?_this.state.historyOther:'';if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();var p=history[history.length-1];_this.setState(_defineProperty({},panel_to_change,p));_this.change_hash(p);}}};_this.state={initialized:false,popout:React.createElement(ScreenSpinner,null),activeStory:'tab_main',slideTabIndex:0,activePanelShop:\"main\",historyShop:[\"main\"],activePanelOther:\"profile\",historyOther:[\"profile\"],createStickerContextOpened:false,balance_manipulation:false,report_other_visible:false,report_reason_text:'',stickers_panel:null,sticker_info:{title:\"\",author:\"\",preview:\"\",price:0,description:\"\",stickers:[],sales:0},user:{first_name:'',last_name:'',photo_100:'',stickers:[],balance:0,stickers_history:[]},create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]},captcha:{text:'',url:'',done:false}};_this.onStoryChange=_this.onStoryChange.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.uploadFile=_this.uploadFile.bind(_assertThisInitialized(_this));_this.toggleCreateStickerContext=_this.toggleCreateStickerContext.bind(_assertThisInitialized(_this));_this.sync=_this.sync.bind(_assertThisInitialized(_this));_this.install=_this.install.bind(_assertThisInitialized(_this));_this.delete=_this.delete.bind(_assertThisInitialized(_this));_this.create_stickers=_this.create_stickers.bind(_assertThisInitialized(_this));_this.go_to_edit=_this.go_to_edit.bind(_assertThisInitialized(_this));_this.report_stickers=_this.report_stickers.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.updateStickers=_this.updateStickers.bind(_assertThisInitialized(_this));_this.updateStickersInfo=_this.updateStickersInfo.bind(_assertThisInitialized(_this));_this.updateUser=_this.updateUser.bind(_assertThisInitialized(_this));_this.updateQuestions=_this.updateQuestions.bind(_assertThisInitialized(_this));_this.back=_this.back.bind(_assertThisInitialized(_this));_this.go=_this.go.bind(_assertThisInitialized(_this));_this.change_hash=_this.change_hash.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.addEventListener('popstate',function(e){e.preventDefault();var activeStory=_this2.state.activeStory;var activePanel=activeStory==='tab_main'?_this2.state.activePanelShop:activeStory==='tab_other'?_this2.state.activePanelOther:'';if(activePanel!=='input_captcha'){_this2.back(e);}});bridge.subscribe(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var _ref$detail,type,data,schemeAttribute,login,c,i,request_params,params,method,request_id,key,value,res_back;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;if(type!==undefined)console.log(type,data);if(!(type==='VKWebAppUpdateConfig')){_context.next=8;break;}schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);_context.next=59;break;case 8:if(!(type==='VKWebAppGetUserInfoResult')){_context.next=16;break;}if(_this2.state.initialized){_context.next=14;break;}_context.next=12;return _this2.get('users.auth');case 12:login=_context.sent;if(login.access){/*\n                        data.stickers = [ 0 ];\n                        data.balance = 0;\n                        data.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n                        */_this2.setState({initialized:true,popout:null});_this2.initializeApp();}case 14:_context.next=59;break;case 16:if(!(type==='VKWebAppViewRestore')){_context.next=20;break;}if(_this2.state.popout!==null){_this2.setState({popout:null});}_context.next=59;break;case 20:if(!(type==='VKWebAppCallAPIMethodFailed')){_context.next=59;break;}if(!(data.error_data.error_reason.error_code===14)){_context.next=59;break;}c=_this2.state.captcha;c.done=null;c.url=data.error_data.error_reason.captcha_img;c.sid=data.error_data.error_reason.captcha_sid;_this2.setState({captcha:c,popout:null});_this2.go('input_captcha');i=0;case 29:if(!(i<2)){_context.next=40;break;}if(!(_this2.state.captcha.done===null)){_context.next=36;break;}i--;_context.next=34;return _this2.sleep(1000);case 34:_context.next=37;break;case 36:return _context.abrupt(\"break\",40);case 37:i++;_context.next=29;break;case 40:_this2.setState({popout:React.createElement(ScreenSpinner,null)});request_params=data.error_data.error_reason.request_params;params={};method='';request_id='';for(i=0;i<request_params.length;i++){key=request_params[i].key;value=request_params[i].value;if(key!=='api_id'&&key!=='format'&&key!=='oauth'){if(key==='method'){method=value;}else if(key==='request_id'){request_id=value;}else{params[key]=value;}}}params.access_token=access_token;params.captcha_sid=_this2.state.captcha.sid;params.captcha_key=_this2.state.captcha.text;_context.prev=49;_context.next=52;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":method,\"request_id\":request_id,\"params\":params});case 52:res_back=_context.sent;_this2.setState({captcha:{text:'',url:'',done:false}});_this2.back();_context.next=59;break;case 57:_context.prev=57;_context.t0=_context[\"catch\"](49);case 59:case\"end\":return _context.stop();}}},_callee,null,[[49,57]]);}));return function(_x){return _ref2.apply(this,arguments);};}());this.initializeApp();}},{key:\"initializeApp\",value:function(){var _initializeApp=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var hash,hash_;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.updateStickers();case 2:_context2.next=4;return this.updateUser();case 4:_context2.next=6;return this.updateQuestions();case 6:_context2.next=8;return this.updateReportReasons();case 8:hash=window.location.hash;if(hash){hash=hash.replace('#','');hash_=hash.split('_');this.setState({activeStory:hash_[0]+'_'+hash_[1]});this.go(hash.substring((hash_[0]+'_'+hash_[1]+'_').length));}else{this.change_hash('main');}case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function initializeApp(){return _initializeApp.apply(this,arguments);}return initializeApp;}()},{key:\"updateStickers\",value:function(){var _updateStickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this3=this;var response,stickers_panel_new,stickers,i,stickers_,j,stickers_panel_popular;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.get('stickers.get');case 2:response=_context4.sent;this.setState({stickers:response.stickers});stickers_panel_new=[];stickers=this.state.stickers;for(i=0;i<stickers.length;i++){stickers_=[];for(j=0;j<stickers[i].data.length;j++){stickers_.push(React.createElement(StickerImg,{mode:\"small\",src:stickers[i].data[j].url}));}stickers[i].stickers=stickers_;stickers[i].id=i;stickers_panel_new.push(React.createElement(StickerButton,{title:stickers[i].title,description:stickers[i].author,src:stickers[i].preview,price:stickers[i].price,id:\"sticker_\"+i,mode:\"cell\",onClick:/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var id,response,user_;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:id=parseInt(e.currentTarget.id.split('_')[1]);_this3.setState({sticker_info:stickers[id],popout:React.createElement(ScreenSpinner,null)});_context3.next=4;return _this3.get('users.get');case 4:response=_context3.sent;_context3.next=7;return bridge.sendPromise('VKWebAppGetUserInfo');case 7:user_=_context3.sent;_this3.setState({user:_objectSpread({},user_,{},response.user),popout:null});_this3.go('sticker_info');case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}()}));}stickers_panel_new=stickers_panel_new.reverse();stickers_panel_popular=stickers_panel_new.sort(function(itemA,itemB){return(itemA.sales===0?0:itemA.sales.length)-(itemB.sales===0?0:itemB.sales.length);}).reverse();this.setState({stickers_panel_new:stickers_panel_new,stickers_panel_popular:stickers_panel_popular});case 10:case\"end\":return _context4.stop();}}},_callee4,this);}));function updateStickers(){return _updateStickers.apply(this,arguments);}return updateStickers;}()},{key:\"updateStickersInfo\",value:function(){var _updateStickersInfo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return this.updateStickers();case 2:_context5.next=4;return this.updateUser();case 4:this.setState({sticker_info:this.state.stickers[this.state.sticker_info.id]});case 5:case\"end\":return _context5.stop();}}},_callee5,this);}));function updateStickersInfo(){return _updateStickersInfo.apply(this,arguments);}return updateStickersInfo;}()},{key:\"updateUser\",value:function(){var _updateUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _this4=this;var response,user_,user_stickers,i,sticker,user_stickers_history,_loop,_i;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.get('users.get');case 2:response=_context7.sent;_context7.next=5;return bridge.sendPromise('VKWebAppGetUserInfo');case 5:user_=_context7.sent;this.setState({user:_objectSpread({},user_,{},response.user)});user_stickers=[];for(i=0;i<this.state.user.stickers.length;i++){sticker=this.state.stickers[i];user_stickers.push(React.createElement(StickerButton,{src:sticker.preview,id:\"user_sticker_\"+i,mode:\"img\",onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);_this4.setState({activeStory:\"tab_main\",sticker_info:_this4.state.stickers[id]});setTimeout(function(){_this4.go('sticker_info');},50);}}));}this.setState({user_stickers:user_stickers});user_stickers_history=[];_loop=function _loop(_i){var sticker=_this4.state.user.stickers_history[_i];user_stickers_history.push(React.createElement(StickerButton,{title:sticker.title,src:sticker.preview,mode2:sticker.hasOwnProperty('added')?sticker.added?'commerce':'destructive':'primary',button:sticker.hasOwnProperty('added')?sticker.added?'Одобрено':'Отклонено':'На проверке',mode:\"cell\",more:React.createElement(Icon28CancelOutline,{onClick:function onClick(){_this4.setState({popout:React.createElement(Alert,{actionsLayout:\"horizontal\",actions:[{title:'Да',autoclose:true,mode:'destructive',action:function(){var _action=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this4.setState({popout:React.createElement(ScreenSpinner,null)});_context6.next=3;return _this4.get('stickers.cancel_moderation',{stickers_id:_i});case 3:_context6.next=5;return _this4.updateUser();case 5:_this4.setState({popout:null});case 6:case\"end\":return _context6.stop();}}},_callee6);}));function action(){return _action.apply(this,arguments);}return action;}()},{title:'Нет',autoclose:true,mode:'cancel'}],onClose:function onClose(){_this4.setState({popout:null});}},React.createElement(\"h2\",null,\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0435\"),React.createElement(\"p\",null,\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u043E\\u0432?\"))});},fill:'#ff5c5c'})}));};for(_i=0;_i<this.state.user.stickers_history.length;_i++){_loop(_i);}this.setState({user_stickers_history:user_stickers_history});case 14:case\"end\":return _context7.stop();}}},_callee7,this);}));function updateUser(){return _updateUser.apply(this,arguments);}return updateUser;}()},{key:\"updateQuestions\",value:function(){var _updateQuestions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var response,questions,questions_panel,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,val;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return this.get('questions.get');case 2:response=_context8.sent;questions=response.questions;questions_panel=[];_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context8.prev=8;for(_iterator=questions[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){val=_step.value;questions_panel.push(React.createElement(CardElement,{link:val.link,text:val.text}));}_context8.next=16;break;case 12:_context8.prev=12;_context8.t0=_context8[\"catch\"](8);_didIteratorError=true;_iteratorError=_context8.t0;case 16:_context8.prev=16;_context8.prev=17;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}case 19:_context8.prev=19;if(!_didIteratorError){_context8.next=22;break;}throw _iteratorError;case 22:return _context8.finish(19);case 23:return _context8.finish(16);case 24:this.setState({questions_panel:questions_panel.length>0?questions_panel:null});case 25:case\"end\":return _context8.stop();}}},_callee8,this,[[8,12,16,24],[17,,19,23]]);}));function updateQuestions(){return _updateQuestions.apply(this,arguments);}return updateQuestions;}()},{key:\"updateReportReasons\",value:function(){var _updateReportReasons=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var _this5=this;var response,report_reasons,report_reasons_panel,i,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,val;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return this.get('report.getReasons');case 2:response=_context9.sent;report_reasons=response.report_reasons;report_reasons_panel=[];i=0;_iteratorNormalCompletion2=true;_didIteratorError2=false;_iteratorError2=undefined;_context9.prev=9;for(_iterator2=report_reasons[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){val=_step2.value;report_reasons_panel.push(React.createElement(CellButton,{onClick:function onClick(){_this5.report_stickers(_this5.state.sticker_info.id,i);}},val));i++;}_context9.next=17;break;case 13:_context9.prev=13;_context9.t0=_context9[\"catch\"](9);_didIteratorError2=true;_iteratorError2=_context9.t0;case 17:_context9.prev=17;_context9.prev=18;if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return();}case 20:_context9.prev=20;if(!_didIteratorError2){_context9.next=23;break;}throw _iteratorError2;case 23:return _context9.finish(20);case 24:return _context9.finish(17);case 25:this.setState({report_reasons_panel:report_reasons_panel.length>0?report_reasons_panel:null});case 26:case\"end\":return _context9.stop();}}},_callee9,this,[[9,13,17,25],[18,,20,24]]);}));function updateReportReasons(){return _updateReportReasons.apply(this,arguments);}return updateReportReasons;}()},{key:\"get\",value:function(){var _get=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(method,params){var str,p,response;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(params===undefined||params===null)params={};params.url=window.location.search.replace('?','');str=[];for(p in params){if(params.hasOwnProperty(p)){str.push(encodeURIComponent(p)+\"=\"+encodeURIComponent(params[p]));}}params=str.join(\"&\");_context10.next=7;return fetch('https://ih1705413.vds.myihor.ru:4040/'+method+'?'+params,{method:'GET'}).then(function(res){return res.json();}).then(function(res){return res;});case 7:response=_context10.sent;console.log(response);return _context10.abrupt(\"return\",response);case 10:case\"end\":return _context10.stop();}}},_callee10);}));function get(_x3,_x4){return _get.apply(this,arguments);}return get;}()},{key:\"sleep\",value:function sleep(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});}},{key:\"urlToBase64\",value:function urlToBase64(url){return new Promise(function(resolve){var img=new Image();img.crossOrigin='Anonymous';img.onload=function(){var canvas=document.createElement('CANVAS'),ctx=canvas.getContext('2d'),dataURL;canvas.height=img.height;canvas.width=img.width;ctx.drawImage(img,0,0);dataURL=canvas.toDataURL(\"image/png\");canvas=null;resolve(dataURL);};img.src=url;});}},{key:\"base64ToMultipart\",value:function base64ToMultipart(base64){return new Promise(function(resolve){fetch(base64).then(function(res){return res.blob();}).then(function(blob){var fd=new FormData();var file=new File([blob],\"sticker.png\");fd.append('file',file);resolve(fd);});});}},{key:\"go\",value:function go(panel){var activeStory=this.state.activeStory;var panel_to_change=activeStory==='tab_main'?'activePanelShop':activeStory==='tab_other'?'activePanelOther':'';var history=activeStory==='tab_main'?this.state.historyShop:activeStory==='tab_other'?this.state.historyOther:'';if(panel.startsWith('sticker_info_')){var stickers_id=panel.split('_')[2];if(this.state.stickers.hasOwnProperty(stickers_id)){this.setState({sticker_info:this.state.stickers[stickers_id]});panel='sticker_info';}else{panel='main';}}else if(panel==='stickers_report'){this.setState({report_other_visible:false});}if(history[history.length-1]!==panel){var _this$setState2;history.push(panel);var history_to_change=activeStory==='tab_main'?'historyShop':activeStory==='tab_other'?'historyOther':'';window.history.pushState({panel:panel},'Title');this.setState((_this$setState2={},_defineProperty(_this$setState2,panel_to_change,panel),_defineProperty(_this$setState2,history_to_change,history),_this$setState2));}this.change_hash(panel);}},{key:\"change_hash\",value:function change_hash(panel){var activeStory=this.state.activeStory;if(panel==='sticker_info'){panel=panel+'_'+this.state.sticker_info.id;}bridge.send(\"VKWebAppSetLocation\",{\"location\":activeStory+'_'+panel});}},{key:\"onStoryChange\",value:function onStoryChange(e){var _this6=this;var story=e.currentTarget.dataset.story;this.setState({activeStory:story});if(this.state.activeStory===story){if(story==='tab_main'&&this.state.activePanelShop!=='main'){this.back();}else if(story==='tab_other'&&this.state.activePanelOther!=='profile'){this.back();}}else{var panel_=story==='tab_main'?'activePanelShop':story==='tab_other'?'activePanelOther':'';var panel=this.state[panel_];setTimeout(function(){_this6.change_hash(panel);},250);}}},{key:\"onChange\",value:function onChange(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;var create_panel=this.state.create_panel;create_panel[name]=value;this.setState({create_panel:create_panel});}},{key:\"toggleCreateStickerContext\",value:function toggleCreateStickerContext(){this.setState({createStickerContextOpened:!this.state.createStickerContextOpened});}},{key:\"uploadFile\",value:function(){var _uploadFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(element,evt){var tgt,files,t,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_loop2,_iterator3,_step3;return _regeneratorRuntime.wrap(function _callee12$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:tgt=evt.target||window.event.srcElement,files=tgt.files;t=this;if(!(FileReader&&files&&files.length)){_context13.next=30;break;}_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context13.prev=6;_loop2=/*#__PURE__*/_regeneratorRuntime.mark(function _loop2(){var file,fr;return _regeneratorRuntime.wrap(function _loop2$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:file=_step3.value;fr=new FileReader();fr.onload=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var res,res1,res10,stickers_count;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:res=fr.result;//base64 result, to get src -> array[0].props.src\nres1=t.state.create_panel;if(!file.type.includes('image')){_context11.next=16;break;}if(!(element==='upload_sticker_img')){_context11.next=12;break;}res10=res1.hasOwnProperty('uploaded_stickers_img')?res1.uploaded_stickers_img:[];_context11.next=7;return res10.filter(function(val){return val!==undefined;}).length;case 7:_context11.t0=_context11.sent;stickers_count=_context11.t0+1;if(stickers_count<=48){res10.push(React.createElement(StickerImg,{mode:'small',id:'uploaded_sticker_'+res10.length,src:res,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var res01=t.state.create_panel;delete res01.uploaded_stickers_img[id];t.setState({create_panel:res01});}}));res1.uploaded_stickers_img=res10;t.setState({create_panel:res1});}_context11.next=14;break;case 12:res1[element]=res;t.setState({create_panel:res1});case 14:_context11.next=18;break;case 16:res1[element]=null;t.setState({create_panel:res1});case 18:case\"end\":return _context11.stop();}}},_callee11);}));_context12.next=5;return fr.readAsDataURL(file);case 5:case\"end\":return _context12.stop();}}},_loop2);});_iterator3=files[Symbol.iterator]();case 9:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context13.next=14;break;}return _context13.delegateYield(_loop2(),\"t0\",11);case 11:_iteratorNormalCompletion3=true;_context13.next=9;break;case 14:_context13.next=20;break;case 16:_context13.prev=16;_context13.t1=_context13[\"catch\"](6);_didIteratorError3=true;_iteratorError3=_context13.t1;case 20:_context13.prev=20;_context13.prev=21;if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return();}case 23:_context13.prev=23;if(!_didIteratorError3){_context13.next=26;break;}throw _iteratorError3;case 26:return _context13.finish(23);case 27:return _context13.finish(20);case 28:_context13.next=30;break;case 30:case\"end\":return _context13.stop();}}},_callee12,this,[[6,16,20,28],[21,,23,27]]);}));function uploadFile(_x5,_x6){return _uploadFile.apply(this,arguments);}return uploadFile;}()},{key:\"showSnackBar\",value:function showSnackBar(text,icon,style){var _this7=this;this.setState({snackbar:null});this.setState({snackbar:React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this7.setState({snackbar:null});},before:React.createElement(Avatar,{size:24,style:style},icon)},text)});}},{key:\"sync\",value:function(){var _sync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(stickers_id){var _this8=this;var stickers,i,remove,_loop3,_i2;return _regeneratorRuntime.wrap(function _callee16$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});_context18.prev=1;_context18.next=4;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 4:access_token=_context18.sent;access_token=access_token.access_token;_context18.next=8;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.getUploadServer\",\"request_id\":\"upload_server\",\"params\":{\"group_id\":\"193090865\",\"v\":\"5.00\",\"access_token\":access_token}});case 8:upload_url1=_context18.sent;upload_url1=upload_url1.response.upload_url;stickers=this.state.stickers[stickers_id].stickers;if(!this.state.stickers[stickers_id].hasOwnProperty('data')){_context18.next=31;break;}i=0;case 13:if(!(i<this.state.stickers[stickers_id].data.length)){_context18.next=31;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context18.next=27;break;}_context18.prev=15;_context18.next=18;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.stickers[stickers_id].data[i].owner_id,\"doc_id\":this.state.stickers[stickers_id].data[i].doc_id,\"v\":\"5.103\",\"access_token\":access_token}});case 18:remove=_context18.sent;_context18.next=25;break;case 21:_context18.prev=21;_context18.t0=_context18[\"catch\"](15);console.log('error del...');i--;case 25:_context18.next=28;break;case 27:if(this.state.captcha.done===null){i--;}case 28:i++;_context18.next=13;break;case 31:_loop3=/*#__PURE__*/_regeneratorRuntime.mark(function _loop3(_i3){var sticker_url;return _regeneratorRuntime.wrap(function _loop3$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:if(!(_this8.state.captcha.done===false&&_this8.state.activePanelShop==='sticker_info')){_context17.next=6;break;}sticker_url=stickers[_i3].props.src;_context17.next=4;return _this8.urlToBase64('https://murmuring-bastion-20764.herokuapp.com/'+sticker_url).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(base64Img){return _regeneratorRuntime.wrap(function _callee15$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_context16.next=2;return _this8.base64ToMultipart(base64Img).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(multipart){return _regeneratorRuntime.wrap(function _callee14$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return fetch('https://murmuring-bastion-20764.herokuapp.com/'+upload_url1,{method:'POST',body:multipart}).then(function(res){return res.json();}).then(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(res){var file,save;return _regeneratorRuntime.wrap(function _callee13$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.prev=0;file=res.file;_context14.next=4;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.save\",\"request_id\":\"save_graffiti\",\"params\":{\"file\":file,\"v\":\"5.103\",\"access_token\":access_token}});case 4:save=_context14.sent;_context14.next=7;return _this8.get('stickers.sync',{id_:_i3,id:stickers_id,owner_id:save.response.graffiti.owner_id,doc_id:save.response.graffiti.id,img:save.response.graffiti.url,access_key:save.response.graffiti.access_key});case 7:_context14.next=13;break;case 9:_context14.prev=9;_context14.t0=_context14[\"catch\"](0);console.log('error uploading...');_i3--;case 13:_context14.next=15;return _this8.sleep(1000);case 15:case\"end\":return _context14.stop();}}},_callee13,null,[[0,9]]);}));return function(_x10){return _ref7.apply(this,arguments);};}());case 2:case\"end\":return _context15.stop();}}},_callee14);}));return function(_x9){return _ref6.apply(this,arguments);};}());case 2:case\"end\":return _context16.stop();}}},_callee15);}));return function(_x8){return _ref5.apply(this,arguments);};}());case 4:_context17.next=7;break;case 6:if(_this8.state.captcha.done===null){_i3--;}case 7:_i2=_i3;case 8:case\"end\":return _context17.stop();}}},_loop3);});_i2=0;case 33:if(!(_i2<stickers.length)){_context18.next=38;break;}return _context18.delegateYield(_loop3(_i2),\"t1\",35);case 35:_i2++;_context18.next=33;break;case 38:this.showSnackBar('Стикеры синхронизированы',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);_context18.next=45;break;case 41:_context18.prev=41;_context18.t2=_context18[\"catch\"](1);console.log(_context18.t2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 45:this.updateStickersInfo();this.setState({popout:null});case 47:case\"end\":return _context18.stop();}}},_callee16,this,[[1,41],[15,21]]);}));function sync(_x7){return _sync.apply(this,arguments);}return sync;}()},{key:\"install\",value:function(){var _install=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(stickers_id){var stickers,data,i,remove,obj,add,added;return _regeneratorRuntime.wrap(function _callee17$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:this.showSnackBar('Идёт установка стикеров, пожалуйста не выходите из приложения - иначе они могут установиться не правильно',React.createElement(Icon16Spinner,{fill:\"#fff\",width:14,height:14}),blueBackground);this.setState({popout:React.createElement(ScreenSpinner,null)});_context19.prev=2;_context19.next=5;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 5:access_token=_context19.sent;access_token=access_token.access_token;_context19.next=9;return this.get('stickers.get');case 9:stickers=_context19.sent;stickers=stickers.stickers[stickers_id];data=stickers.data;if(!this.state.user.hasOwnProperty('stickers_cache')){_context19.next=35;break;}if(!this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){_context19.next=35;break;}i=0;case 15:if(!(i<this.state.user.stickers_cache[stickers_id].length)){_context19.next=35;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context19.next=29;break;}_context19.prev=17;_context19.next=20;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.user.id,\"doc_id\":this.state.user.stickers_cache[stickers_id][i],\"v\":\"5.103\",\"access_token\":access_token}});case 20:remove=_context19.sent;_context19.next=27;break;case 23:_context19.prev=23;_context19.t0=_context19[\"catch\"](17);console.log('error del...');i--;case 27:_context19.next=30;break;case 29:if(this.state.captcha.done===null){i--;}case 30:_context19.next=32;return this.sleep(1000);case 32:i++;_context19.next=15;break;case 35:i=0;case 36:if(!(i<data.length)){_context19.next=62;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context19.next=56;break;}_context19.prev=38;obj=data[i];_context19.next=42;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.add\",\"request_id\":\"add_doc\",\"params\":{\"owner_id\":obj.owner_id,\"doc_id\":obj.doc_id,\"access_key\":obj.access_key,\"v\":\"5.103\",\"access_token\":access_token}});case 42:add=_context19.sent;_context19.next=45;return this.get('stickers.add',{stickers_id:stickers_id,i:i,doc_id:add.response});case 45:added=_context19.sent;if(!(added.access===false)){_context19.next=48;break;}return _context19.abrupt(\"break\",62);case 48:_context19.next=54;break;case 50:_context19.prev=50;_context19.t1=_context19[\"catch\"](38);console.log('error add...');i--;case 54:_context19.next=57;break;case 56:if(this.state.captcha.done===null){i--;}case 57:_context19.next=59;return this.sleep(1000);case 59:i++;_context19.next=36;break;case 62:this.showSnackBar('Стикеры установлены',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);_context19.next=68;break;case 65:_context19.prev=65;_context19.t2=_context19[\"catch\"](2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 68:this.updateStickersInfo();this.setState({popout:null});case 70:case\"end\":return _context19.stop();}}},_callee17,this,[[2,65],[17,23],[38,50]]);}));function install(_x11){return _install.apply(this,arguments);}return install;}()},{key:\"delete\",value:function(){var _delete2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(stickers_id){var i,remove;return _regeneratorRuntime.wrap(function _callee18$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:this.showSnackBar('Идёт очистка стикеров, пожалуйста не выходите из приложения - иначе они могут очиститься не правильно',React.createElement(Icon16Spinner,{fill:\"#fff\",width:14,height:14}),blueBackground);this.setState({popout:React.createElement(ScreenSpinner,null)});_context20.prev=2;_context20.next=5;return bridge.sendPromise(\"VKWebAppGetAuthToken\",{\"app_id\":7363654,\"scope\":\"docs\"});case 5:access_token=_context20.sent;access_token=access_token.access_token;if(!this.state.user.hasOwnProperty('stickers_cache')){_context20.next=33;break;}if(!this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){_context20.next=33;break;}i=0;case 10:if(!(i<this.state.user.stickers_cache[stickers_id].length)){_context20.next=30;break;}if(!(this.state.captcha.done===false&&this.state.activePanelShop==='sticker_info')){_context20.next=24;break;}_context20.prev=12;_context20.next=15;return bridge.sendPromise(\"VKWebAppCallAPIMethod\",{\"method\":\"docs.delete\",\"request_id\":\"del_doc\",\"params\":{\"owner_id\":this.state.user.id,\"doc_id\":this.state.user.stickers_cache[stickers_id][i],\"v\":\"5.103\",\"access_token\":access_token}});case 15:remove=_context20.sent;_context20.next=22;break;case 18:_context20.prev=18;_context20.t0=_context20[\"catch\"](12);console.log('error delete...');i--;case 22:_context20.next=25;break;case 24:if(this.state.captcha.done===null){i--;}case 25:_context20.next=27;return this.sleep(1000);case 27:i++;_context20.next=10;break;case 30:_context20.next=32;return this.get('stickers.delete',{stickers_id:stickers_id});case 32:this.showSnackBar('Стикеры очищены',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);case 33:_context20.next=38;break;case 35:_context20.prev=35;_context20.t1=_context20[\"catch\"](2);this.showSnackBar('Произошла ошибка при получении данных',React.createElement(Icon16Cancel,{fill:\"#fff\",width:14,height:14}),redBackground);case 38:this.updateStickersInfo();this.setState({popout:null});case 40:case\"end\":return _context20.stop();}}},_callee18,this,[[2,35],[12,18]]);}));function _delete(_x12){return _delete2.apply(this,arguments);}return _delete;}()},{key:\"create_stickers\",value:function(){var _create_stickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19(){var _this$state$create_pa,title,description,price,upload_preview_img,uploaded_stickers_img,preview,stickers,uploaded,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,sticker,i,resp;return _regeneratorRuntime.wrap(function _callee19$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});_this$state$create_pa=this.state.create_panel,title=_this$state$create_pa.title,description=_this$state$create_pa.description,price=_this$state$create_pa.price,upload_preview_img=_this$state$create_pa.upload_preview_img,uploaded_stickers_img=_this$state$create_pa.uploaded_stickers_img;preview='';stickers=[];uploaded=0;_context21.next=7;return request({url:'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',method:'POST',form:{image:upload_preview_img.replace('data:image/png;base64,','')}},function(error,response,body){if(response.statusCode===200){body=JSON.parse(body);var url=body.data.url;console.log(url);preview=url;uploaded++;}else{console.log('error',body);}});case 7:_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context21.prev=10;_iterator4=uploaded_stickers_img[Symbol.iterator]();case 12:if(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done){_context21.next=22;break;}sticker=_step4.value;if(!(sticker!==undefined)){_context21.next=19;break;}_context21.next=17;return request({url:'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',method:'POST',form:{image:sticker.props.src.replace('data:image/png;base64,','')}},function(error,response,body){if(response.statusCode===200){body=JSON.parse(body);var url=body.data.url;console.log(url);stickers.push(url);uploaded++;}else{console.log('error',body);}});case 17:_context21.next=19;return this.sleep(500);case 19:_iteratorNormalCompletion4=true;_context21.next=12;break;case 22:_context21.next=28;break;case 24:_context21.prev=24;_context21.t0=_context21[\"catch\"](10);_didIteratorError4=true;_iteratorError4=_context21.t0;case 28:_context21.prev=28;_context21.prev=29;if(!_iteratorNormalCompletion4&&_iterator4.return!=null){_iterator4.return();}case 31:_context21.prev=31;if(!_didIteratorError4){_context21.next=34;break;}throw _iteratorError4;case 34:return _context21.finish(31);case 35:return _context21.finish(28);case 36:i=0;case 37:if(!(i<2)){_context21.next=48;break;}if(!(uploaded===uploaded_stickers_img.length+1)){_context21.next=42;break;}return _context21.abrupt(\"break\",48);case 42:i--;_context21.next=45;return this.sleep(500);case 45:i++;_context21.next=37;break;case 48:_context21.next=50;return this.get('stickers.create',{title:title,description:description,price:price,preview:preview,stickers:stickers,stickers_id:this.state.create_panel.hasOwnProperty('stickers_id')?parseInt(this.state.create_panel.stickers_id):null});case 50:resp=_context21.sent;if(!(resp.status==='ok')){_context21.next=56;break;}this.setState({create_panel:{title:\"\",preview:\"\",price:1,description:\"\",stickers:[]}});_context21.next=55;return this.updateUser();case 55:this.go('stickers_history');case 56:this.setState({popout:null});case 57:case\"end\":return _context21.stop();}}},_callee19,this,[[10,24,28,36],[29,,31,35]]);}));function create_stickers(){return _create_stickers.apply(this,arguments);}return create_stickers;}()},{key:\"go_to_edit\",value:function go_to_edit(){var _this9=this;var create_panel=this.state.create_panel;var stickers_=this.state.sticker_info.stickers;var stickers=[];create_panel.stickers_id=this.state.sticker_info.id;create_panel.title=this.state.sticker_info.title;create_panel.description=this.state.sticker_info.description;create_panel.price=this.state.sticker_info.price;create_panel.upload_preview_img=this.state.sticker_info.preview;for(var i=0;i<stickers_.length;i++){var sticker=stickers_[i];stickers.push(React.createElement(StickerImg,{mode:'small',id:'uploaded_sticker_'+i,src:sticker.props.src,onClick:function onClick(e){var id=parseInt(e.currentTarget.id.split('_')[2]);var create_panel_=_this9.state.create_panel;delete create_panel_.uploaded_stickers_img[id];_this9.setState({create_panel:create_panel_});}}));}create_panel.uploaded_stickers_img=stickers;this.setState({create_panel:create_panel,activeStory:'tab_other'});setTimeout(function(){_this9.go('create');},250);}},{key:\"report_stickers\",value:function(){var _report_stickers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(stickers_id,report_reason){return _regeneratorRuntime.wrap(function _callee20$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:this.setState({popout:React.createElement(ScreenSpinner,null)});if(!(typeof report_reason==='number')){_context22.next=6;break;}_context22.next=4;return this.get('report.send',{stickers_id:stickers_id,report_reason_id:report_reason});case 4:_context22.next=8;break;case 6:_context22.next=8;return this.get('report.send',{stickers_id:stickers_id,report_reason_text:report_reason});case 8:this.setState({popout:null});this.back();this.showSnackBar('Жалоба отправлена, спасибо!',React.createElement(Icon16Done,{fill:\"#fff\",width:14,height:14}),blueBackground);case 11:case\"end\":return _context22.stop();}}},_callee20,this);}));function report_stickers(_x13,_x14){return _report_stickers.apply(this,arguments);}return report_stickers;}()},{key:\"render\",value:function render(){var _this10=this;return React.createElement(Epic,{activeStory:this.state.activeStory,tabbar:React.createElement(Tabbar,null,React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_main',\"data-story\":\"tab_main\"},React.createElement(Icon28MarketOutline,null)),React.createElement(TabbarItem,{onClick:this.onStoryChange,selected:this.state.activeStory==='tab_other',\"data-story\":\"tab_other\"},React.createElement(Icon28UserOutline,null)))},React.createElement(View,{id:\"tab_main\",activePanel:this.state.activePanelShop,popout:this.state.popout,history:this.state.historyShop,onSwipeBack:this.back,header:false},React.createElement(Panel,{id:\"main\",separator:false},React.createElement(PanelHeaderSimple,{separator:false},\"\\u0421\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\"),React.createElement(Tabs,null,React.createElement(TabsItem,{onClick:function onClick(){return _this10.setState({slideTabIndex:0});},selected:this.state.slideTabIndex===0},\"\\u041D\\u043E\\u0432\\u0438\\u043D\\u043A\\u0438\"),React.createElement(TabsItem,{onClick:function onClick(){return _this10.setState({slideTabIndex:1});},selected:this.state.slideTabIndex===1},\"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435\")),React.createElement(Separator,null),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee21(){return _regeneratorRuntime.wrap(function _callee21$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:_this10.setState({refreshedStickers:true});_context23.next=3;return _this10.updateStickers();case 3:_context23.next=5;return _this10.updateQuestions();case 5:_this10.setState({refreshedStickers:false});case 6:case\"end\":return _context23.stop();}}},_callee21);})),isFetching:this.state.refreshedStickers},React.createElement(Gallery,{slideWidth:\"100%\",style:{height:\"100%\",margin:\"8px\"},slideIndex:this.state.slideTabIndex,onChange:function onChange(slideIndex){_this10.setState({slideTabIndex:slideIndex});}},React.createElement(\"div\",null,React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel_new)),React.createElement(\"div\",null,React.createElement(List,{style:{marginTop:\"15px\"}},this.state.stickers_panel_popular))))),React.createElement(Panel,{id:\"sticker_info\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this10.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee22(){return _regeneratorRuntime.wrap(function _callee22$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_this10.setState({refreshedStickersInfo:true});_context24.next=3;return _this10.updateStickersInfo();case 3:_context24.next=5;return _this10.updateQuestions();case 5:_this10.setState({refreshedStickersInfo:false});case 6:case\"end\":return _context24.stop();}}},_callee22);})),isFetching:this.state.refreshedStickersInfo},React.createElement(Div,null,React.createElement(StickerButton,{title:this.state.sticker_info.title,description:this.state.sticker_info.author+'\\nКуплено: '+(this.state.sticker_info.sales===0?0:this.state.sticker_info.sales.length),src:this.state.sticker_info.preview,mode:\"cell\",more:this.state.sticker_info.author_id+''===this.state.user.id+''?React.createElement(Icon28WriteOutline,{onClick:function onClick(){_this10.go_to_edit();},fill:'#4bb34b'}):React.createElement(Icon28ReportOutline,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee23(){return _regeneratorRuntime.wrap(function _callee23$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:_context25.next=2;return _this10.updateReportReasons();case 2:_this10.go('stickers_report');case 3:case\"end\":return _context25.stop();}}},_callee23);})),fill:'#eb4250'})}),React.createElement(\"div\",{style:{marginLeft:'8px',marginRight:'8px'}},React.createElement(StickerDescription,null,this.state.sticker_info.description),React.createElement(\"div\",{style:{marginTop:'10px'}},this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0?React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{onClick:function onClick(){_this10.install(_this10.state.sticker_info.id);},size:\"xl\",stretched:true},'Установить'),this.state.user.hasOwnProperty('stickers_cache')?this.state.user.stickers_cache.hasOwnProperty(this.state.sticker_info.id)?React.createElement(Button,{style:{marginLeft:'8px'},mode:\"secondary\",onClick:function onClick(){_this10.delete(_this10.state.sticker_info.id);},size:\"xl\",stretched:true},'Очистить'):null:null):React.createElement(\"div\",{style:{display:'flex'}},React.createElement(Button,{size:\"xl\",stretched:true,mode:\"commerce\"},'Получить за '+this.state.sticker_info.price+' руб.')),/*this.state.user.is_admin*/false&&React.createElement(\"div\",{style:{display:'flex',marginTop:'10px'}},React.createElement(Button,{onClick:function onClick(){_this10.sync(_this10.state.sticker_info.id);},size:\"xl\",stretched:true},'Синхронизировать')))),React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"small\"},this.state.sticker_info.stickers))),this.state.questions_panel&&React.createElement(Div,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(\"h4\",null,\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\")),React.createElement(\"div\",{className:\"centered\"},React.createElement(CardElements,null,this.state.questions_panel))),this.state.snackbar)),React.createElement(Panel,{id:\"input_captcha\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u0412\\u0432\\u043E\\u0434 \\u043A\\u0430\\u043F\\u0447\\u0438\")),React.createElement(FormLayout,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(\"img\",{width:'60%',src:this.state.captcha.url})),React.createElement(Input,{align:'center',value:this.state.captcha.text,onChange:function onChange(e){var c=_this10.state.captcha;c.text=e.currentTarget.value;_this10.setState({captcha:c});}}),React.createElement(Button,{size:\"xl\",onClick:function onClick(){var c=_this10.state.captcha;c.done=true;_this10.setState({captcha:c});}},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"))),React.createElement(Panel,{id:\"stickers_report\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderClose,{onClick:function onClick(){_this10.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0416\\u0430\\u043B\\u043E\\u0431\\u0430\")),React.createElement(Group,{header:React.createElement(Header,{mode:\"secondary\"},\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430 \\u0436\\u0430\\u043B\\u043E\\u0431\\u044B\")},this.state.report_reasons_panel&&this.state.report_reasons_panel,React.createElement(CellButton,{onClick:function onClick(){_this10.setState({report_other_visible:!_this10.state.report_other_visible});}},\"\\u0414\\u0440\\u0443\\u0433\\u043E\\u0435\"),this.state.report_other_visible&&React.createElement(FormLayout,null,React.createElement(Textarea,{value:this.state.report_reason_text,onChange:function onChange(e){_this10.setState({report_reason_text:e.currentTarget.value});},top:\"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\"}),React.createElement(Button,{onClick:function onClick(){_this10.report_stickers(_this10.state.sticker_info.id,_this10.state.report_reason_text);},disabled:this.state.report_reason_text.length===0,size:\"xl\"},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"))))),React.createElement(View,{id:\"tab_other\",activePanel:this.state.activePanelOther,popout:this.state.popout,history:this.state.historyOther,onSwipeBack:this.back,header:false},React.createElement(Panel,{id:\"profile\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,null,\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee24(){return _regeneratorRuntime.wrap(function _callee24$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:_this10.setState({refreshedProfile:true});_context26.next=3;return _this10.updateUser();case 3:_this10.setState({refreshedProfile:false});case 4:case\"end\":return _context26.stop();}}},_callee24);})),isFetching:this.state.refreshedProfile},React.createElement(Div,null,React.createElement(\"div\",{className:\"centered\"},React.createElement(Avatar,{src:this.state.user.photo_100,size:100})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"centered\",style:{fontSize:\"large\"}},this.state.user.first_name+' '+this.state.user.last_name),React.createElement(\"br\",null),React.createElement(Group,{separator:\"hide\"},React.createElement(Cell,{asideContent:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.balance_manipulation?'180deg':'0',\")\")}}),onClick:function onClick(){_this10.setState({balance_manipulation:!_this10.state.balance_manipulation});},indicator:this.state.user.balance+' ₽'},\"\\u0412\\u0430\\u0448 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\"),this.state.balance_manipulation&&React.createElement(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginTop:'8px'}},React.createElement(Button,{size:\"l\",before:React.createElement(Icon16Down,null)},\"\\u041F\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C\"),React.createElement(Button,{size:\"l\",before:React.createElement(Icon16Up,null),mode:\"secondary\",style:{marginLeft:8}},\"\\u0412\\u044B\\u0432\\u0435\\u0441\\u0442\\u0438\"))),React.createElement(Group,{separator:\"hide\",header:React.createElement(Header,{mode:\"primary\"},\"\\u0412\\u0430\\u0448\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")},React.createElement(\"div\",{className:\"centered\",style:{marginTop:\"18px\"}},React.createElement(StickerGrid,{mode:\"big\"},this.state.user_stickers,React.createElement(StickerImg,{mode:'big',onClick:function onClick(){_this10.go(\"create\");}},\"+\"))))))),React.createElement(Panel,{id:\"create\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this10.back();}})},React.createElement(PanelHeaderContent,{aside:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.createStickerContextOpened?'180deg':'0',\")\")}}),onClick:function onClick(){_this10.toggleCreateStickerContext();}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")),React.createElement(PanelHeaderContext,{opened:this.state.createStickerContextOpened,onClose:function onClose(){_this10.toggleCreateStickerContext();}},React.createElement(List,null,React.createElement(Cell,{before:React.createElement(Icon28HistoryForwardOutline,null),onClick:function onClick(){_this10.toggleCreateStickerContext();_this10.go(\"stickers_history\");}},\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"))),React.createElement(FormLayout,null,React.createElement(Input,{type:\"text\",top:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440-\\u043F\\u0430\\u043A\\u0430\",name:\"title\",value:this.state.create_panel.title,onChange:this.onChange,status:this.state.create_panel.title?this.state.create_panel.title.length<=20?'valid':'error':'error',bottom:this.state.create_panel.title?this.state.create_panel.title.length<=20?'':'Максимальная длина - 20':'Пожалуйста, введите название'}),React.createElement(Textarea,{type:\"text\",top:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",name:\"description\",value:this.state.create_panel.description,onChange:this.onChange,status:this.state.create_panel.description?this.state.create_panel.description.length<=100?'valid':'error':'error',bottom:this.state.create_panel.description?this.state.create_panel.description.length<=100?'':'Максимальная длина - 100':'Пожалуйста, введите описание'}),React.createElement(Input,{type:\"number\",top:\"\\u0426\\u0435\\u043D\\u0430\",name:\"price\",value:this.state.create_panel.price,onChange:this.onChange,status:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'error':'valid':'error':'error',bottom:this.state.create_panel.price>0?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?'Число должно быть целым':'':'Максимальная цена- 1 000 руб.':'Минимальная цена - 1 руб.'}),React.createElement(StickerUploadButton,{src:this.state.create_panel.upload_preview_img&&this.state.create_panel.upload_preview_img,title:'Превью',description:'Загрузите главную фотографию стикер-пака (128×128px)',onChange:function onChange(event){_this10.uploadFile('upload_preview_img',event);}}),React.createElement(StickerUploadButton,{title:'Стикеры',description:'Загрузите все стикеры (минимум - 4, максимум 48), которые будут содержаться в паке (128×128px)',onChange:function onChange(event){_this10.uploadFile('upload_sticker_img',event);}}),React.createElement(\"div\",{className:\"centered\",style:{paddingBottom:\"16px\"}},React.createElement(\"div\",{style:{minWidth:\"64px\",maxWidth:\"296px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, 64px)\",gridGap:\"10px\"}},this.state.create_panel.uploaded_stickers_img)),React.createElement(Button,{size:\"xl\",onClick:function onClick(){_this10.create_stickers();},disabled:this.state.create_panel.title?this.state.create_panel.description?this.state.create_panel.price>0?this.state.create_panel.title.length<=20?this.state.create_panel.description.length<=100?this.state.create_panel.price<=1000?this.state.create_panel.price.toString().includes('.')?true:this.state.create_panel.upload_preview_img?this.state.create_panel.uploaded_stickers_img?this.state.create_panel.uploaded_stickers_img.filter(function(val){return val!==undefined;}).length>=4?false:true:true:true:true:true:true:true:true:true},\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"))),React.createElement(Panel,{id:\"stickers_history\"},React.createElement(PanelHeaderSimple,{left:React.createElement(PanelHeaderBack,{onClick:function onClick(){_this10.back();}})},React.createElement(PanelHeaderContent,null,\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\")),React.createElement(PullToRefresh,{onRefresh:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee25(){return _regeneratorRuntime.wrap(function _callee25$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_this10.setState({refreshedStickersHistory:true});_context27.next=3;return _this10.updateUser();case 3:_this10.setState({refreshedStickersHistory:false});case 4:case\"end\":return _context27.stop();}}},_callee25);})),isFetching:this.state.refreshedStickersHistory},this.state.user_stickers_history&&this.state.user_stickers_history.length>0?React.createElement(Div,null,React.createElement(List,null,this.state.user_stickers_history)):React.createElement(Placeholder,{icon:React.createElement(Icon56HistoryOutline,null),header:'Пусто',stretched:true},\"\\u0412\\u044B \\u043F\\u043E\\u043A\\u0430 \\u0435\\u0449\\u0435 \\u043D\\u0435 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u043B\\u0438 \\u0441\\u0442\\u0438\\u043A\\u0435\\u0440\\u044B\")))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/VKStickers2/src/App.js"],"names":["React","bridge","Panel","PanelHeader","Div","View","ScreenSpinner","List","Cell","Gallery","FormLayout","Input","Avatar","Group","Epic","Tabbar","TabbarItem","Separator","Button","PanelHeaderContext","Header","PanelHeaderSimple","PanelHeaderContent","Placeholder","Tabs","TabsItem","PullToRefresh","Snackbar","Textarea","PanelHeaderBack","PanelHeaderClose","CellButton","Alert","Icon16Spinner","Icon16Done","Icon16Cancel","Icon16Dropdown","Icon16Down","Icon16Up","Icon28ReportOutline","Icon28ShareOutline","Icon28CancelOutline","Icon28WriteOutline","Icon28HistoryForwardOutline","Icon28MarketOutline","Icon28UserOutline","Icon56HistoryOutline","StickerImg","StickerButton","StickerDescription","StickerGrid","StickerUploadButton","CardElements","CardElement","request","access_token","upload_url1","blueBackground","backgroundColor","redBackground","App","props","back","activeStory","state","activePanel","activePanelShop","activePanelOther","panel_to_change","send","history","historyShop","historyOther","length","pop","p","setState","change_hash","initialized","popout","slideTabIndex","createStickerContextOpened","balance_manipulation","report_other_visible","report_reason_text","stickers_panel","sticker_info","title","author","preview","price","description","stickers","sales","user","first_name","last_name","photo_100","balance","stickers_history","create_panel","captcha","text","url","done","onStoryChange","bind","onChange","uploadFile","toggleCreateStickerContext","sync","install","delete","create_stickers","go_to_edit","report_stickers","componentDidMount","initializeApp","updateStickers","updateStickersInfo","updateUser","updateQuestions","go","window","addEventListener","e","preventDefault","subscribe","detail","type","data","undefined","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","get","login","access","error_data","error_reason","error_code","c","captcha_img","sid","captcha_sid","i","sleep","request_params","params","method","request_id","key","captcha_key","sendPromise","res_back","updateReportReasons","hash","location","replace","hash_","split","substring","response","stickers_panel_new","stickers_","j","push","id","parseInt","currentTarget","user_","reverse","stickers_panel_popular","sort","itemA","itemB","user_stickers","sticker","setTimeout","user_stickers_history","hasOwnProperty","added","autoclose","mode","action","stickers_id","questions","questions_panel","val","link","report_reasons","report_reasons_panel","search","str","encodeURIComponent","join","fetch","then","res","json","ms","Promise","resolve","img","Image","crossOrigin","onload","canvas","createElement","ctx","getContext","dataURL","height","width","drawImage","toDataURL","src","base64","blob","fd","FormData","file","File","append","panel","startsWith","history_to_change","pushState","story","dataset","panel_","name","element","evt","tgt","target","event","srcElement","files","t","FileReader","fr","result","res1","includes","res10","uploaded_stickers_img","filter","stickers_count","res01","readAsDataURL","icon","style","snackbar","upload_url","owner_id","doc_id","remove","sticker_url","urlToBase64","base64Img","base64ToMultipart","multipart","save","id_","graffiti","access_key","showSnackBar","stickers_cache","obj","add","upload_preview_img","uploaded","form","image","error","statusCode","JSON","parse","resp","status","create_panel_","report_reason","report_reason_id","refreshedStickers","margin","slideIndex","marginTop","refreshedStickersInfo","author_id","marginLeft","marginRight","indexOf","display","refreshedProfile","fontSize","transform","justifyContent","toString","paddingBottom","minWidth","maxWidth","gridTemplateColumns","gridGap","refreshedStickersHistory","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './css/App.css'\n\nimport { Panel, PanelHeader, Div , View , ScreenSpinner, List , Cell , Gallery , FormLayout , Input , Avatar , Group , Epic, Tabbar, TabbarItem, Separator, Button, PanelHeaderContext, Header, PanelHeaderSimple, PanelHeaderContent, Placeholder, Tabs,\n\tTabsItem, PullToRefresh, Snackbar, Textarea, PanelHeaderBack, PanelHeaderClose, CellButton, Alert  } from '@vkontakte/vkui';\n\nimport Icon16Spinner from '@vkontakte/icons/dist/16/spinner';\nimport Icon16Done from '@vkontakte/icons/dist/16/done';\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\nimport Icon16Down from '@vkontakte/icons/dist/16/down';\nimport Icon16Up from '@vkontakte/icons/dist/16/up';\nimport Icon28ReportOutline from '@vkontakte/icons/dist/28/report_outline';\nimport Icon28ShareOutline from '@vkontakte/icons/dist/28/share_outline';\nimport Icon28CancelOutline from '@vkontakte/icons/dist/28/cancel_outline';\nimport Icon28WriteOutline from '@vkontakte/icons/dist/28/write_outline';\nimport Icon28HistoryForwardOutline from '@vkontakte/icons/dist/28/history_forward_outline';\nimport Icon28MarketOutline from '@vkontakte/icons/dist/28/market_outline';\nimport Icon28UserOutline from '@vkontakte/icons/dist/28/user_outline';\nimport Icon56HistoryOutline from '@vkontakte/icons/dist/56/history_outline';\n\nimport {StickerImg} from \"./components/StickerImg\";\nimport {StickerButton} from \"./components/StickerButton\";\nimport {StickerDescription} from \"./components/StickerDescription\";\nimport {StickerGrid} from \"./components/StickerGrid\";\nimport {StickerUploadButton} from \"./components/StickerUploadButton\";\nimport {CardElements} from \"./components/CardElements\";\nimport {CardElement} from \"./components/CardElement\";\n\nimport request from \"request\";\n\nlet access_token = '', upload_url1 = '';\n\nconst blueBackground = {\n\tbackgroundColor: 'var(--accent)'\n}, redBackground = {\n\tbackgroundColor: 'var(--dynamic_red)'\n};\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tinitialized: false,\n\t\t\tpopout: <ScreenSpinner/>,\n\t\t\tactiveStory: 'tab_main',\n\t\t\tslideTabIndex: 0,\n\t\t\tactivePanelShop: \"main\",\n\t\t\thistoryShop: [\"main\"],\n\t\t\tactivePanelOther: \"profile\",\n\t\t\thistoryOther: [\"profile\"],\n\t\t\tcreateStickerContextOpened: false,\n\t\t\tbalance_manipulation: false,\n\t\t\treport_other_visible: false,\n\t\t\treport_reason_text: '',\n\t\t\tstickers_panel: null,\n\t\t\tsticker_info: { title: \"\", author: \"\", preview: \"\", price: 0, description: \"\", stickers: [], sales: 0 },\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: '',\n\t\t\t\tstickers:[ ],\n\t\t\t\tbalance: 0,\n\t\t\t\tstickers_history: [ ]\n\t\t\t},\n\t\t\tcreate_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] },\n\t\t\tcaptcha : { text: '', url: '', done: false }\n\t\t};\n\n\t\tthis.onStoryChange = this.onStoryChange.bind(this);\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.uploadFile = this.uploadFile.bind(this);\n\t\tthis.toggleCreateStickerContext = this.toggleCreateStickerContext.bind(this);\n\t\tthis.sync = this.sync.bind(this);\n\t\tthis.install = this.install.bind(this);\n\t\tthis.delete = this.delete.bind(this);\n\t\tthis.create_stickers = this.create_stickers.bind(this);\n\t\tthis.go_to_edit = this.go_to_edit.bind(this);\n\t\tthis.report_stickers = this.report_stickers.bind(this);\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.updateStickers = this.updateStickers.bind(this);\n\t\tthis.updateStickersInfo = this.updateStickersInfo.bind(this);\n\t\tthis.updateUser = this.updateUser.bind(this);\n\t\tthis.updateQuestions = this.updateQuestions.bind(this);\n\t\tthis.back = this.back.bind(this);\n\t\tthis.go = this.go.bind(this);\n\t\tthis.change_hash = this.change_hash.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\twindow.addEventListener('popstate', e => {\n\t\t\te.preventDefault();\n\t\t\tlet activeStory = this.state.activeStory;\n\t\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\t\tif(activePanel !== 'input_captcha') {\n\t\t\t\tthis.back(e);\n\t\t\t}\n\t\t});\n\n\t\tbridge.subscribe(async ({ detail: { type, data }}) => {\n\t\t\tif(type !== undefined) console.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tif(!this.state.initialized){\n\t\t\t\t\tlet login = await this.get('users.auth');\n\t\t\t\t\tif(login.access){\n\t\t\t\t\t\t/*\n                        data.stickers = [ 0 ];\n                        data.balance = 0;\n                        data.stickers_history = [ { title: \"Илай\", preview: \"https://vk.com/sticker/1-18781-128\", added: false }, { title: \"Бисквит\", author: \"Илья Ульянов\", preview: \"https://vk.com/sticker/2-533-cover-140b-0\" } ];\n                        */\n\t\t\t\t\t\tthis.setState({ initialized: true, popout: null });\n\t\t\t\t\t\tthis.initializeApp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'VKWebAppViewRestore'){\n\t\t\t\tif(this.state.popout !== null){\n\t\t\t\t\tthis.setState({ popout: null });\n\t\t\t\t}\n\t\t\t} else if (type === 'VKWebAppCallAPIMethodFailed'){\n\t\t\t\tif(data.error_data.error_reason.error_code === 14){\n\t\t\t\t\tlet c = this.state.captcha;\n\t\t\t\t\tc.done = null;\n\t\t\t\t\tc.url = data.error_data.error_reason.captcha_img;\n\t\t\t\t\tc.sid = data.error_data.error_reason.captcha_sid;\n\t\t\t\t\tthis.setState({ captcha: c, popout: null });\n\t\t\t\t\tthis.go('input_captcha');\n\t\t\t\t\tfor(var i = 0; i < 2; i++){\n\t\t\t\t\t    if(this.state.captcha.done === null){\n\t\t\t\t\t        i--;\n                            await this.sleep(1000);\n                        }else{\n\t\t\t\t\t        break;\n                        }\n                    }\n\n\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\t\t\t\tlet request_params = data.error_data.error_reason.request_params;\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tlet method = '';\n\t\t\t\t\tlet request_id = '';\n\t\t\t\t\tfor(var i = 0; i < request_params.length; i++){\n\t\t\t\t\t\tlet key = request_params[i].key;\n\t\t\t\t\t\tlet value = request_params[i].value;\n\t\t\t\t\t\tif(key !== 'api_id' && key !== 'format' && key !== 'oauth'){\n\t\t\t\t\t\t\tif(key === 'method'){\n\t\t\t\t\t\t\t\tmethod = value;\n\t\t\t\t\t\t\t}else if (key === 'request_id'){\n\t\t\t\t\t\t\t\trequest_id = value;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tparams[key] = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tparams.access_token = access_token;\n\t\t\t\t\tparams.captcha_sid = this.state.captcha.sid;\n\t\t\t\t\tparams.captcha_key = this.state.captcha.text;\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet res_back = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\"method\": method,\n\t\t\t\t\t\t\t\"request_id\": request_id,\n\t\t\t\t\t\t\t\"params\": params\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setState({ captcha : { text: '', url: '', done: false } });\n\t\t\t\t\t\tthis.back();\n\t\t\t\t\t}catch (e) {\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.initializeApp();\n\t}\n\n\tasync initializeApp() {\n\t\tawait this.updateStickers();\n\t\tawait this.updateUser();\n\t\tawait this.updateQuestions();\n\t\tawait this.updateReportReasons();\n\n\t\tlet hash = window.location.hash;\n\t\tif (hash) {\n\t\t\thash = hash.replace('#','');\n\t\t\tlet hash_ = hash.split('_');\n\t\t\tthis.setState({ activeStory: hash_[0]+'_'+hash_[1] });\n\t\t\tthis.go(hash.substring((hash_[0]+'_'+hash_[1]+'_').length));\n\t\t}else{\n\t\t\tthis.change_hash('main');\n\t\t}\n\t}\n\n\tasync updateStickers() {\n\t\tlet response = await this.get('stickers.get');\n\t\tthis.setState({stickers: response.stickers});\n\t\tlet stickers_panel_new = [];\n\t\tlet stickers = this.state.stickers;\n\t\tfor (let i = 0; i < stickers.length; i++) {\n\t\t\tlet stickers_ = [];\n\t\t\tfor (let j = 0; j < stickers[i].data.length; j++) {\n\t\t\t\tstickers_.push(\n\t\t\t\t\t<StickerImg mode={\"small\"} src={stickers[i].data[j].url}/>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tstickers[i].stickers = stickers_;\n\t\t\tstickers[i].id = i;\n\t\t\tstickers_panel_new.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={stickers[i].title}\n\t\t\t\t\tdescription={stickers[i].author}\n\t\t\t\t\tsrc={stickers[i].preview}\n\t\t\t\t\tprice={stickers[i].price}\n\t\t\t\t\tid={\"sticker_\" + i}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[1]);\n\t\t\t\t\t\tthis.setState({sticker_info: stickers[id], popout: <ScreenSpinner/>});\n\t\t\t\t\t\tlet response = await this.get('users.get');\n\t\t\t\t\t\tlet user_ = await bridge.sendPromise('VKWebAppGetUserInfo');\n\t\t\t\t\t\tthis.setState({user: {...user_, ...response.user}, popout: null});\n\t\t\t\t\t\tthis.go('sticker_info');\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tstickers_panel_new = stickers_panel_new.reverse();\n\t\tlet stickers_panel_popular = stickers_panel_new.sort(function (itemA, itemB) {\n\t\t\treturn (itemA.sales === 0 ? 0 : itemA.sales.length) - (itemB.sales === 0 ? 0 : itemB.sales.length);\n\t\t}).reverse();\n\t\tthis.setState({stickers_panel_new, stickers_panel_popular});\n\t}\n\tasync updateStickersInfo() {\n\t\tawait this.updateStickers();\n\t\tawait this.updateUser();\n\t\tthis.setState({ sticker_info: this.state.stickers[this.state.sticker_info.id] });\n\t}\n\tasync updateUser() {\n\t\tlet response = await this.get('users.get');\n\t\tlet user_ = await bridge.sendPromise('VKWebAppGetUserInfo');\n\t\tthis.setState({user: {...user_, ...response.user}});\n\t\tlet user_stickers = [];\n\t\tfor (let i = 0; i < this.state.user.stickers.length; i++) {\n\t\t\tlet sticker = this.state.stickers[i];\n\t\t\tuser_stickers.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tid={\"user_sticker_\" + i}\n\t\t\t\t\tmode={\"img\"}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tthis.setState({activeStory: \"tab_main\", sticker_info: this.state.stickers[id]});\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.go('sticker_info');\n\t\t\t\t\t\t\t}, 50)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({user_stickers});\n\n\t\tlet user_stickers_history = [];\n\t\tfor (let i = 0; i < this.state.user.stickers_history.length; i++) {\n\t\t\tlet sticker = this.state.user.stickers_history[i];\n\t\t\tuser_stickers_history.push(\n\t\t\t\t<StickerButton\n\t\t\t\t\ttitle={sticker.title}\n\t\t\t\t\tsrc={sticker.preview}\n\t\t\t\t\tmode2={sticker.hasOwnProperty('added') ? (sticker.added ? 'commerce' : 'destructive') : 'primary'}\n\t\t\t\t\tbutton={sticker.hasOwnProperty('added') ? (sticker.added ? 'Одобрено' : 'Отклонено') : 'На проверке'}\n\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\tmore={\n\t\t\t\t\t\t<Icon28CancelOutline onClick={()=>{\n\t\t\t\t\t\t\tthis.setState({ popout:\n\t\t\t\t\t\t\t\t\t<Alert\n\t\t\t\t\t\t\t\t\t\tactionsLayout=\"horizontal\"\n\t\t\t\t\t\t\t\t\t\tactions={[{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Да',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\tmode: 'destructive',\n\t\t\t\t\t\t\t\t\t\t\taction: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.get('stickers.cancel_moderation',{ stickers_id: i });\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ popout: null });\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Нет',\n\t\t\t\t\t\t\t\t\t\t\tautoclose: true,\n\t\t\t\t\t\t\t\t\t\t\tmode: 'cancel'\n\t\t\t\t\t\t\t\t\t\t}]}\n\t\t\t\t\t\t\t\t\t\tonClose={()=>{ this.setState({ popout: null }); }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<h2>Подтвердите действие</h2>\n\t\t\t\t\t\t\t\t\t\t<p>Вы уверены, что хотите отменить модерацию стикеров?</p>\n\t\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}} fill={'#ff5c5c'}/>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tthis.setState({user_stickers_history});\n\t}\n\tasync updateQuestions() {\n\t\tlet response = await this.get('questions.get');\n\t\tlet questions = response.questions;\n\t\tlet questions_panel = [];\n\t\tfor(let val of questions){\n\t\t\tquestions_panel.push(<CardElement link={val.link} text={val.text}/>);\n\t\t}\n\n\t\tthis.setState({ questions_panel: questions_panel.length > 0 ? questions_panel : null })\n\t}\n\tasync updateReportReasons() {\n\t\tlet response = await this.get('report.getReasons');\n\t\tlet report_reasons = response.report_reasons;\n\t\tlet report_reasons_panel = [];\n\t\tlet i = 0;\n\t\tfor(let val of report_reasons){\n\t\t\treport_reasons_panel.push(<CellButton onClick={()=>{ this.report_stickers(this.state.sticker_info.id, i); }} >{val}</CellButton>);\n\t\t\ti++;\n\t\t}\n\n\t\tthis.setState({ report_reasons_panel: report_reasons_panel.length > 0 ? report_reasons_panel : null })\n\t}\n\tasync get(method, params) {\n\t\tif(params === undefined || params === null) params = {};\n\t\tparams.url = window.location.search.replace('?', '');\n\t\tlet str = [];\n\t\tfor (let p in params)\n\t\t\tif (params.hasOwnProperty(p)) {\n\t\t\t\tstr.push(encodeURIComponent(p) + \"=\" + encodeURIComponent(params[p]));\n\t\t\t}\n\t\tparams = str.join(\"&\");\n\t\tlet response = await fetch('https://ih1705413.vds.myihor.ru:4040/'+method+'?'+params, {method: 'GET'})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\treturn res;\n\t\t\t});\n\t\tconsole.log(response);\n\t\treturn response;\n\t}\n\n\tsleep(ms) {\n\t\treturn new Promise(resolve => setTimeout(resolve, ms));\n\t}\n\turlToBase64(url){\n\t\treturn new Promise(resolve => {\n\t\t\tlet img = new Image();\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.onload = function(){\n\t\t\t\tlet canvas = document.createElement('CANVAS'),\n\t\t\t\t\tctx = canvas.getContext('2d'), dataURL;\n\t\t\t\tcanvas.height = img.height;\n\t\t\t\tcanvas.width = img.width;\n\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t\tdataURL = canvas.toDataURL(\"image/png\");\n\t\t\t\tcanvas = null;\n\t\t\t\tresolve(dataURL);\n\t\t\t};\n\t\t\timg.src = url;\n\t\t});\n\t}\n\tbase64ToMultipart(base64) {\n\t\treturn new Promise(resolve => {\n\t\t\tfetch(base64)\n\t\t\t\t.then(res => res.blob())\n\t\t\t\t.then(blob => {\n\t\t\t\t\tconst fd = new FormData();\n\t\t\t\t\tconst file = new File([blob], \"sticker.png\");\n\t\t\t\t\tfd.append('file', file);\n\t\t\t\t\tresolve(fd);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tback = () => {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet activePanel = activeStory === 'tab_main' ? this.state.activePanelShop : activeStory === 'tab_other' ? this.state.activePanelOther : '';\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tif((activeStory === 'tab_main' && activePanel==='main') || (activeStory === 'tab_other' && activePanel==='profile')){\n\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t}else {\n\t\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\t\tif(history.length === 1) {\n\t\t\t\tbridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\n\t\t\t} else if (history.length > 1) {\n\t\t\t\thistory.pop();\n\t\t\t\tlet p = history[history.length - 1];\n\t\t\t\tthis.setState({[panel_to_change]: p});\n\t\t\t\tthis.change_hash(p);\n\t\t\t}\n\t\t}\n\n\t};\n\tgo(panel) {\n\t\tlet activeStory = this.state.activeStory;\n\t\tlet panel_to_change = activeStory === 'tab_main' ? 'activePanelShop' : activeStory === 'tab_other' ? 'activePanelOther' : '';\n\t\tlet history = activeStory === 'tab_main' ? this.state.historyShop : activeStory === 'tab_other' ? this.state.historyOther : '';\n\t\tif(panel.startsWith('sticker_info_')){\n\t\t\tlet stickers_id = panel.split('_')[2];\n\t\t\tif(this.state.stickers.hasOwnProperty(stickers_id)){\n\t\t\t\tthis.setState({ sticker_info: this.state.stickers[stickers_id] });\n\t\t\t\tpanel = 'sticker_info';\n\t\t\t}else{\n\t\t\t\tpanel = 'main';\n\t\t\t}\n\t\t}else if (panel === 'stickers_report'){\n\t\t\tthis.setState({ report_other_visible: false });\n\t\t}\n\t\tif(history[history.length-1] !== panel) {\n\t\t\thistory.push(panel);\n\t\t\tlet history_to_change = activeStory === 'tab_main' ? 'historyShop' : activeStory === 'tab_other' ? 'historyOther' : '';\n\t\t\twindow.history.pushState({panel: panel}, 'Title');\n\t\t\tthis.setState({[panel_to_change]: panel, [history_to_change]: history});\n\t\t}\n\t\tthis.change_hash(panel);\n\t}\n\tchange_hash (panel){\n\t\tlet activeStory = this.state.activeStory;\n\t\tif(panel === 'sticker_info'){\n\t\t\tpanel = panel+'_'+this.state.sticker_info.id;\n\t\t}\n\t\tbridge.send(\"VKWebAppSetLocation\", {\"location\": activeStory+'_'+panel});\n\t}\n\n\tonStoryChange (e) {\n\t\tlet story = e.currentTarget.dataset.story;\n\t\tthis.setState({ activeStory: story });\n\n\t\tif(this.state.activeStory===story){\n\t\t\tif(story==='tab_main' && this.state.activePanelShop !== 'main'){\n\t\t\t\tthis.back();\n\t\t\t}else if(story==='tab_other' && this.state.activePanelOther !== 'profile'){\n\t\t\t\tthis.back();\n\t\t\t}\n\t\t}else{\n\t\t\tlet panel_ = story === 'tab_main' ? 'activePanelShop' : story === 'tab_other' ? 'activePanelOther' : '';\n\t\t\tlet panel = this.state[panel_];\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.change_hash(panel);\n\t\t\t}, 250);\n\t\t}\n\t}\n\tonChange(e) {\n\t\tconst { name, value } = e.currentTarget;\n\t\tlet create_panel = this.state.create_panel;\n\t\tcreate_panel[name] = value;\n\t\tthis.setState({ create_panel: create_panel });\n\t}\n\ttoggleCreateStickerContext () {\n\t\tthis.setState({ createStickerContextOpened: !this.state.createStickerContextOpened });\n\t}\n\tasync uploadFile(element, evt) {\n\t\tlet tgt = evt.target || window.event.srcElement,\n\t\t\tfiles = tgt.files;\n\t\tconst t = this;\n\n\t\tif (FileReader && files && files.length) {\n\t\t\tfor (let file of files) {\n\t\t\t\tlet fr = new FileReader();\n\t\t\t\tfr.onload = async function () {\n\t\t\t\t\tlet res = fr.result; //base64 result, to get src -> array[0].props.src\n\t\t\t\t\tlet res1 = t.state.create_panel;\n\t\t\t\t\tif (file.type.includes('image')) {\n\t\t\t\t\t\tif (element === 'upload_sticker_img') {\n\t\t\t\t\t\t\tlet res10 = res1.hasOwnProperty('uploaded_stickers_img') ? res1.uploaded_stickers_img : [];\n\t\t\t\t\t\t\tlet stickers_count = await res10.filter(function (val) {\n\t\t\t\t\t\t\t\treturn val !== undefined;\n\t\t\t\t\t\t\t}).length + 1;\n\t\t\t\t\t\t\tif (stickers_count <= 48) {\n\t\t\t\t\t\t\t\tres10.push(\n\t\t\t\t\t\t\t\t\t<StickerImg\n\t\t\t\t\t\t\t\t\t\tmode={'small'}\n\t\t\t\t\t\t\t\t\t\tid={'uploaded_sticker_' + res10.length}\n\t\t\t\t\t\t\t\t\t\tsrc={res}\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\t\t\t\t\t\tlet res01 = t.state.create_panel;\n\t\t\t\t\t\t\t\t\t\t\tdelete res01.uploaded_stickers_img[id];\n\t\t\t\t\t\t\t\t\t\t\tt.setState({create_panel: res01});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tres1.uploaded_stickers_img = res10;\n\t\t\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres1[element] = res;\n\t\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tres1[element] = null;\n\t\t\t\t\t\tt.setState({create_panel: res1});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tawait fr.readAsDataURL(file);\n\t\t\t}\n\t\t}\n\t\t// Not supported\n\t\telse {\n\t\t\t// fallback -- perhaps submit the input to an iframe and temporarily store\n\t\t\t// them on the server until the user's session ends.\n\t\t}\n\t}\n\tshowSnackBar (text, icon, style){\n\t\tthis.setState({ snackbar: null });\n\t\tthis.setState({ snackbar:\n\t\t\t\t<Snackbar\n\t\t\t\t\tlayout=\"vertical\"\n\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\n\t\t\t\t\tbefore={<Avatar size={24} style={style}>{icon}</Avatar>}\n\t\t\t\t>\n\t\t\t\t\t{text}\n\t\t\t\t</Snackbar>\n\t\t});\n\t}\n\n\tasync sync(stickers_id) {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tupload_url1 = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\"method\": \"docs.getUploadServer\", \"request_id\": \"upload_server\", \"params\": {\"group_id\":\"193090865\", \"v\":\"5.00\", \"access_token\":access_token}});\n\t\t\tupload_url1 = upload_url1.response.upload_url;\n\t\t\tlet stickers = this.state.stickers[stickers_id].stickers;\n\n\t\t\tif (this.state.stickers[stickers_id].hasOwnProperty('data')) {\n\t\t\t\tfor(var i = 0; i < this.state.stickers[stickers_id].data.length; i++){\n\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\"params\": {\n\t\t\t\t\t\t\t\t\t\"owner_id\": this.state.stickers[stickers_id].data[i].owner_id,\n\t\t\t\t\t\t\t\t\t\"doc_id\": this.state.stickers[stickers_id].data[i].doc_id,\n\t\t\t\t\t\t\t\t\t\"v\": \"5.103\",\n\t\t\t\t\t\t\t\t\t\"access_token\": access_token\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.log('error del...');\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(let i = 0; i < stickers.length; i++){\n\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\tlet sticker_url = stickers[i].props.src;\n\t\t\t\t\tawait this.urlToBase64('https://murmuring-bastion-20764.herokuapp.com/'+sticker_url).then(async base64Img => {\n\t\t\t\t\t\tawait this.base64ToMultipart(base64Img).then(async multipart => {\n\t\t\t\t\t\t\tawait fetch('https://murmuring-bastion-20764.herokuapp.com/'+upload_url1, {method: 'POST', body: multipart})\n\t\t\t\t\t\t\t\t.then(res => res.json())\n\t\t\t\t\t\t\t\t.then(async res => {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tlet file = res.file;\n\t\t\t\t\t\t\t\t\t\tlet save = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\t\t\"method\": \"docs.save\",\n\t\t\t\t\t\t\t\t\t\t\t\"request_id\": \"save_graffiti\",\n\t\t\t\t\t\t\t\t\t\t\t\"params\": {\"file\": file, \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tawait this.get('stickers.sync', {\n\t\t\t\t\t\t\t\t\t\t\tid_: i,\n\t\t\t\t\t\t\t\t\t\t\tid: stickers_id,\n\t\t\t\t\t\t\t\t\t\t\towner_id: save.response.graffiti.owner_id,\n\t\t\t\t\t\t\t\t\t\t\tdoc_id: save.response.graffiti.id,\n\t\t\t\t\t\t\t\t\t\t\timg: save.response.graffiti.url,\n\t\t\t\t\t\t\t\t\t\t\taccess_key: save.response.graffiti.access_key\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('error uploading...');\n\t\t\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showSnackBar('Стикеры синхронизированы', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t}catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync install(stickers_id) {\n\t\tthis.showSnackBar('Идёт установка стикеров, пожалуйста не выходите из приложения - иначе они могут установиться не правильно', <Icon16Spinner fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tlet stickers = await this.get('stickers.get');\n\t\t\tstickers = stickers.stickers[stickers_id];\n\t\t\tlet data = stickers.data;\n\t\t\tif(this.state.user.hasOwnProperty('stickers_cache')){\n\t\t\t\tif(this.state.user.stickers_cache.hasOwnProperty(stickers_id+'')){\n\t\t\t\t\tfor(var i = 0; i < this.state.user.stickers_cache[stickers_id].length; i++){\n\t\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\t\"params\": {\"owner_id\": this.state.user.id, \"doc_id\": this.state.user.stickers_cache[stickers_id][i], \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('error del...');\n\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i = 0; i < data.length; i++){\n\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\ttry{\n\t\t\t\t\t\tlet obj = data[i];\n\t\t\t\t\t\tlet add = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\"method\": \"docs.add\",\n\t\t\t\t\t\t\t\"request_id\": \"add_doc\",\n\t\t\t\t\t\t\t\"params\": {\"owner_id\": obj.owner_id, \"doc_id\": obj.doc_id, \"access_key\": obj.access_key, \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet added = await this.get('stickers.add', { stickers_id: stickers_id, i: i, doc_id: add.response });\n\t\t\t\t\t\tif(added.access === false){\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\tconsole.log('error add...');\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t\tawait this.sleep(1000);\n\t\t\t}\n\t\t\tthis.showSnackBar('Стикеры установлены', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t}catch (e) {\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync delete (stickers_id) {\n\t\tthis.showSnackBar('Идёт очистка стикеров, пожалуйста не выходите из приложения - иначе они могут очиститься не правильно', <Icon16Spinner fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\ttry{\n\t\t\taccess_token = await bridge.sendPromise(\"VKWebAppGetAuthToken\", {\"app_id\": 7363654, \"scope\": \"docs\"});\n\t\t\taccess_token = access_token.access_token;\n\t\t\tif(this.state.user.hasOwnProperty('stickers_cache')) {\n\t\t\t\tif (this.state.user.stickers_cache.hasOwnProperty(stickers_id + '')) {\n\t\t\t\t\tfor(var i = 0; i < this.state.user.stickers_cache[stickers_id].length; i++){\n\t\t\t\t\t\tif(this.state.captcha.done === false && this.state.activePanelShop === 'sticker_info'){\n\t\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\t\tlet remove = await bridge.sendPromise(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\t\t\t\t\t\"method\": \"docs.delete\",\n\t\t\t\t\t\t\t\t\t\"request_id\": \"del_doc\",\n\t\t\t\t\t\t\t\t\t\"params\": {\"owner_id\": this.state.user.id, \"doc_id\": this.state.user.stickers_cache[stickers_id][i], \"v\": \"5.103\", \"access_token\": access_token}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('error delete...');\n\t\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(this.state.captcha.done === null){\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t\tawait this.get('stickers.delete', { stickers_id: stickers_id });\n\t\t\t\t\tthis.showSnackBar('Стикеры очищены', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t\t\t\t}\n\t\t\t}\n\t\t}catch (e) {\n\t\t\tthis.showSnackBar('Произошла ошибка при получении данных', <Icon16Cancel fill=\"#fff\" width={14} height={14} />, redBackground);\n\t\t}\n\t\tthis.updateStickersInfo();\n\t\tthis.setState({ popout: null });\n\t}\n\tasync create_stickers () {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\tlet { title, description, price, upload_preview_img, uploaded_stickers_img } = this.state.create_panel;\n\t\tlet preview = '';\n\t\tlet stickers = [];\n\t\tlet uploaded = 0;\n\t\tawait request({\n\t\t\turl: 'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',\n\t\t\tmethod: 'POST',\n\t\t\tform: {\n\t\t\t\timage: upload_preview_img.replace('data:image/png;base64,','')\n\t\t\t}\n\t\t}, (error, response, body)=>{\n\t\t\tif(response.statusCode === 200){\n\t\t\t\tbody = JSON.parse(body);\n\t\t\t\tlet url = body.data.url;\n\t\t\t\tconsole.log(url);\n\t\t\t\tpreview = url;\n\t\t\t\tuploaded++;\n\t\t\t}else{\n\t\t\t\tconsole.log('error', body);\n\t\t\t}\n\t\t});\n\n\t\tfor(let sticker of uploaded_stickers_img){\n\t\t\tif(sticker !== undefined) {\n\t\t\t\tawait request({\n\t\t\t\t\turl: 'https://murmuring-bastion-20764.herokuapp.com/https://api.imgbb.com/1/upload?key=b2bfb837d63c6adae4d191841abb04dc',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tform: {\n\t\t\t\t\t\timage: sticker.props.src.replace('data:image/png;base64,', '')\n\t\t\t\t\t}\n\t\t\t\t}, (error, response, body) => {\n\t\t\t\t\tif (response.statusCode === 200) {\n\t\t\t\t\t\tbody = JSON.parse(body);\n\t\t\t\t\t\tlet url = body.data.url;\n\t\t\t\t\t\tconsole.log(url);\n\t\t\t\t\t\tstickers.push(url);\n\t\t\t\t\t\tuploaded++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('error', body);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tawait this.sleep(500);\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i < 2; i++ ){\n\t\t\tif(uploaded === (uploaded_stickers_img.length+1)){\n\t\t\t\tbreak;\n\t\t\t}else{\n\t\t\t\ti--;\n\t\t\t\tawait this.sleep(500);\n\t\t\t}\n\t\t}\n\n\t\tlet resp = await this.get('stickers.create', { title, description, price, preview, stickers, stickers_id: this.state.create_panel.hasOwnProperty('stickers_id') ? parseInt(this.state.create_panel.stickers_id) : null });\n\t\tif(resp.status === 'ok'){\n\t\t\tthis.setState({ create_panel: { title: \"\", preview: \"\", price: 1, description: \"\", stickers: [] } });\n\t\t\tawait this.updateUser();\n\t\t\tthis.go('stickers_history');\n\t\t}\n\t\tthis.setState({ popout: null });\n\t}\n\tgo_to_edit () {\n\t\tlet create_panel = this.state.create_panel;\n\t\tlet stickers_ = this.state.sticker_info.stickers;\n\t\tlet stickers = [];\n\t\tcreate_panel.stickers_id = this.state.sticker_info.id;\n\t\tcreate_panel.title = this.state.sticker_info.title;\n\t\tcreate_panel.description = this.state.sticker_info.description;\n\t\tcreate_panel.price = this.state.sticker_info.price;\n\t\tcreate_panel.upload_preview_img = this.state.sticker_info.preview;\n\t\tfor (let i = 0; i < stickers_.length; i++) {\n\t\t\tlet sticker = stickers_[i];\n\t\t\tstickers.push(\n\t\t\t\t<StickerImg\n\t\t\t\t\tmode={'small'}\n\t\t\t\t\tid={'uploaded_sticker_' + i}\n\t\t\t\t\tsrc={sticker.props.src}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tlet id = parseInt(e.currentTarget.id.split('_')[2]);\n\t\t\t\t\t\tlet create_panel_ = this.state.create_panel;\n\t\t\t\t\t\tdelete create_panel_.uploaded_stickers_img[id];\n\t\t\t\t\t\tthis.setState({create_panel: create_panel_});\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcreate_panel.uploaded_stickers_img = stickers;\n\t\tthis.setState({ create_panel: create_panel, activeStory: 'tab_other' });\n\t\tsetTimeout(()=>{\n\t\t\tthis.go('create');\n\t\t},250);\n\t}\n\tasync report_stickers (stickers_id, report_reason) {\n\t\tthis.setState({ popout: <ScreenSpinner/> });\n\t\tif(typeof report_reason === 'number'){\n\t\t\tawait this.get('report.send', {stickers_id, report_reason_id: report_reason});\n\t\t}else{\n\t\t\tawait this.get('report.send', {stickers_id, report_reason_text: report_reason});\n\t\t}\n\t\tthis.setState({ popout: null });\n\t\tthis.back();\n\t\tthis.showSnackBar('Жалоба отправлена, спасибо!', <Icon16Done fill=\"#fff\" width={14} height={14} />, blueBackground);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Epic activeStory={this.state.activeStory} tabbar={\n\t\t\t\t<Tabbar>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_main'}\n\t\t\t\t\t\tdata-story=\"tab_main\"\n\t\t\t\t\t><Icon28MarketOutline/></TabbarItem>\n\t\t\t\t\t<TabbarItem\n\t\t\t\t\t\tonClick={this.onStoryChange}\n\t\t\t\t\t\tselected={this.state.activeStory === 'tab_other'}\n\t\t\t\t\t\tdata-story=\"tab_other\"\n\t\t\t\t\t><Icon28UserOutline /></TabbarItem>\n\t\t\t\t</Tabbar>\n\t\t\t}>\n\t\t\t\t<View id=\"tab_main\" activePanel={this.state.activePanelShop} popout={this.state.popout} history={this.state.historyShop} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"main\" separator={false}>\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tseparator={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tСтикеры\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t<Tabs>\n\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex: 0 })}\n\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex === 0}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tНовинки\n\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\tonClick={() => this.setState({ slideTabIndex: 1 })}\n\t\t\t\t\t\t\t\tselected={this.state.slideTabIndex === 1}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tПопулярные\n\t\t\t\t\t\t\t</TabsItem>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickers: true });\n\t\t\t\t\t\t\tawait this.updateStickers();\n\t\t\t\t\t\t\tawait this.updateQuestions();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickers: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickers}>\n\t\t\t\t\t\t\t<Gallery\n\t\t\t\t\t\t\t\tslideWidth=\"100%\"\n\t\t\t\t\t\t\t\tstyle={{ height: \"100%\", margin: \"8px\" }}\n\t\t\t\t\t\t\t\tslideIndex={this.state.slideTabIndex}\n\t\t\t\t\t\t\t\tonChange={(slideIndex) => { this.setState({slideTabIndex: slideIndex}); }}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t\t{this.state.stickers_panel_new}\n\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<List style={{ marginTop: \"15px\" }}>\n\t\t\t\t\t\t\t\t\t\t{this.state.stickers_panel_popular}\n\t\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Gallery>\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"sticker_info\">\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tИнформация\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersInfo: true });\n\t\t\t\t\t\t\tawait this.updateStickersInfo();\n\t\t\t\t\t\t\tawait this.updateQuestions();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersInfo: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickersInfo}>\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<StickerButton\n\t\t\t\t\t\t\t\t\ttitle={this.state.sticker_info.title}\n\t\t\t\t\t\t\t\t\tdescription={this.state.sticker_info.author+'\\nКуплено: '+(this.state.sticker_info.sales === 0 ? 0 : this.state.sticker_info.sales.length)}\n\t\t\t\t\t\t\t\t\tsrc={this.state.sticker_info.preview}\n\t\t\t\t\t\t\t\t\tmode={\"cell\"}\n\t\t\t\t\t\t\t\t\tmore={\n\t\t\t\t\t\t\t\t\t\tthis.state.sticker_info.author_id + '' === this.state.user.id + '' ?\n\t\t\t\t\t\t\t\t\t\t\t<Icon28WriteOutline onClick={()=>{ this.go_to_edit(); } } fill={'#4bb34b'}/> :\n\t\t\t\t\t\t\t\t\t\t\t<Icon28ReportOutline onClick={async ()=>{ await this.updateReportReasons(); this.go('stickers_report'); } } fill={'#eb4250'}/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div style={{ marginLeft: '8px', marginRight: '8px' }}>\n\t\t\t\t\t\t\t\t\t<StickerDescription>{this.state.sticker_info.description}</StickerDescription>\n\t\t\t\t\t\t\t\t\t<div style={{ marginTop: '10px'}}>\n\t\t\t\t\t\t\t\t\t\t{this.state.user.stickers.indexOf(this.state.sticker_info.id)>=0 ?\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>{ this.install(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Установить'}</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.user.hasOwnProperty('stickers_cache') ? this.state.user.stickers_cache.hasOwnProperty(this.state.sticker_info.id) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button style={{ marginLeft: '8px' }} mode={\"secondary\"} onClick={()=>{ this.delete(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Очистить'}</Button> : null : null}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button size={\"xl\"} stretched mode=\"commerce\">{'Получить за '+this.state.sticker_info.price+' руб.'}</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t\t\t{/*this.state.user.is_admin*/ false && <div style={{ display: 'flex', marginTop: '10px' }}><Button onClick={()=> { this.sync(this.state.sticker_info.id); }} size={\"xl\"} stretched>{'Синхронизировать'}</Button></div>}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"small\"}>\n\t\t\t\t\t\t\t\t\t\t{this.state.sticker_info.stickers}\n\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Div>\n\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.questions_panel &&\n\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t\t<h4>Ответы на вопросы</h4>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t\t<CardElements>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.questions_panel}\n\t\t\t\t\t\t\t\t\t\t</CardElements>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{this.state.snackbar}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"input_captcha\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tВвод капчи\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t<img width={'60%'} src={this.state.captcha.url}/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\talign={'center'}\n\t\t\t\t\t\t\t\tvalue={this.state.captcha.text}\n\t\t\t\t\t\t\t\tonChange={(e)=> { let c = this.state.captcha; c.text = e.currentTarget.value; this.setState({ captcha: c }); }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button size=\"xl\" onClick={()=> { let c = this.state.captcha; c.done = true; this.setState({ captcha: c });  }}>Отправить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"stickers_report\">\n\t\t\t\t\t\t<PanelHeaderSimple left={<PanelHeaderClose onClick={()=>{ this.back(); }} />}><PanelHeaderContent>\n\t\t\t\t\t\t\tЖалоба\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Причина жалобы</Header>}>\n\t\t\t\t\t\t\t{this.state.report_reasons_panel && this.state.report_reasons_panel}\n\t\t\t\t\t\t\t<CellButton onClick={()=>{ this.setState({ report_other_visible: !this.state.report_other_visible }); }}>Другое</CellButton>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.state.report_other_visible &&\n\t\t\t\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t\t\t\t<Textarea value={this.state.report_reason_text} onChange={(e)=>{ this.setState({ report_reason_text: e.currentTarget.value }); }} top=\"Опишите подробнее\" />\n\t\t\t\t\t\t\t\t\t\t<Button onClick={()=>{ this.report_stickers(this.state.sticker_info.id, this.state.report_reason_text); }} disabled={this.state.report_reason_text.length===0} size=\"xl\">Отправить</Button>\n\t\t\t\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</Group>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t\t<View id=\"tab_other\" activePanel={this.state.activePanelOther} popout={this.state.popout} history={this.state.historyOther} onSwipeBack={this.back} header={false}>\n\t\t\t\t\t<Panel id=\"profile\">\n\t\t\t\t\t\t<PanelHeaderSimple><PanelHeaderContent>\n\t\t\t\t\t\t\tПрофиль\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedProfile: true });\n\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\tthis.setState({ refreshedProfile: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedProfile}>\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<div className=\"centered\">\n\t\t\t\t\t\t\t\t\t<Avatar src={this.state.user.photo_100} size={100}/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ fontSize: \"large\"}}>\n\t\t\t\t\t\t\t\t\t{this.state.user.first_name+' '+this.state.user.last_name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<Group separator=\"hide\">\n\t\t\t\t\t\t\t\t\t<Cell asideContent={<Icon16Dropdown style={{ transform: `rotate(${this.state.balance_manipulation ? '180deg' : '0'})` }} />} onClick={()=> { this.setState({ balance_manipulation: !this.state.balance_manipulation }); }} indicator={this.state.user.balance+' ₽'}>Ваш баланс</Cell>\n\t\t\t\t\t\t\t\t\t{this.state.balance_manipulation && <div style={{ display: 'flex', justifyContent: 'flex-end', marginTop: '8px' }}>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Down/>}>Пополнить</Button>\n\t\t\t\t\t\t\t\t\t\t<Button size=\"l\" before={<Icon16Up/>} mode=\"secondary\" style={{ marginLeft: 8 }}>Вывести</Button>\n\t\t\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t\t<Group separator=\"hide\" header={<Header mode=\"primary\">Ваши стикеры</Header>}>\n\t\t\t\t\t\t\t\t\t<div className=\"centered\" style={{ marginTop: \"18px\" }}>\n\t\t\t\t\t\t\t\t\t\t<StickerGrid mode={\"big\"}>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.user_stickers}\n\t\t\t\t\t\t\t\t\t\t\t<StickerImg mode={'big'} onClick={()=> { this.go(\"create\"); }}>\n\t\t\t\t\t\t\t\t\t\t\t\t+\n\t\t\t\t\t\t\t\t\t\t\t</StickerImg>\n\t\t\t\t\t\t\t\t\t\t</StickerGrid>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id=\"create\">\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.createStickerContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tДобавить стикеры\n\t\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContext opened={this.state.createStickerContextOpened} onClose={ () => { this.toggleCreateStickerContext(); }}>\n\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tbefore={<Icon28HistoryForwardOutline/>}\n\t\t\t\t\t\t\t\t\tonClick={ () => { this.toggleCreateStickerContext(); this.go(\"stickers_history\") }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t</PanelHeaderContext>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Название стикер-пака\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.title}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.title ? this.state.create_panel.title.length <= 20 ? '' : 'Максимальная длина - 20' : 'Пожалуйста, введите название'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\ttop=\"Описание\"\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.description}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.description ? this.state.create_panel.description.length <= 100 ? '' : 'Максимальная длина - 100' : 'Пожалуйста, введите описание'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\ttop=\"Цена\"\n\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\tvalue={this.state.create_panel.price}\n\t\t\t\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\t\t\t\tstatus={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'error' : 'valid' : 'error' : 'error'}\n\t\t\t\t\t\t\t\tbottom={this.state.create_panel.price > 0 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ? 'Число должно быть целым' : '' : 'Максимальная цена- 1 000 руб.' : 'Минимальная цена - 1 руб.'}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\tsrc={this.state.create_panel.upload_preview_img && this.state.create_panel.upload_preview_img}\n\t\t\t\t\t\t\t\ttitle={'Превью'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите главную фотографию стикер-пака (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_preview_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<StickerUploadButton\n\t\t\t\t\t\t\t\ttitle={'Стикеры'}\n\t\t\t\t\t\t\t\tdescription={'Загрузите все стикеры (минимум - 4, максимум 48), которые будут содержаться в паке (128×128px)'}\n\t\t\t\t\t\t\t\tonChange={(event)=> {this.uploadFile('upload_sticker_img', event)}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"centered\" style={{ paddingBottom: \"16px\" }}>\n\t\t\t\t\t\t\t\t<div style={{ minWidth: \"64px\", maxWidth: \"296px\", display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, 64px)\", gridGap: \"10px\" }}>\n\t\t\t\t\t\t\t\t\t{this.state.create_panel.uploaded_stickers_img}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button size=\"xl\" onClick={()=>{ this.create_stickers(); }} disabled={this.state.create_panel.title ? this.state.create_panel.description ? this.state.create_panel.price > 0 ? this.state.create_panel.title.length <= 20 ? this.state.create_panel.description.length <= 100 ? this.state.create_panel.price <= 1000 ? this.state.create_panel.price.toString().includes('.') ?  true : this.state.create_panel.upload_preview_img ? this.state.create_panel.uploaded_stickers_img ? this.state.create_panel.uploaded_stickers_img.filter(function(val){ return val !== undefined; }).length >= 4 ? false : true : true : true : true : true : true : true : true : true }>Продолжить</Button>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel id={\"stickers_history\"}>\n\t\t\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\t\t\tleft={<PanelHeaderBack onClick={()=>{ this.back(); }} />}\n\t\t\t\t\t\t><PanelHeaderContent>\n\t\t\t\t\t\t\tИстория\n\t\t\t\t\t\t</PanelHeaderContent></PanelHeaderSimple>\n\t\t\t\t\t\t<PullToRefresh onRefresh={async () => {\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersHistory: true });\n\t\t\t\t\t\t\tawait this.updateUser();\n\t\t\t\t\t\t\tthis.setState({ refreshedStickersHistory: false });\n\t\t\t\t\t\t}} isFetching={this.state.refreshedStickersHistory}>\n\t\t\t\t\t\t\t{this.state.user_stickers_history && this.state.user_stickers_history.length > 0 ? <Div>\n\t\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t\t{this.state.user_stickers_history}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t<Placeholder\n\t\t\t\t\t\t\t\t\ticon={<Icon56HistoryOutline/>}\n\t\t\t\t\t\t\t\t\theader={'Пусто'}\n\t\t\t\t\t\t\t\t\tstretched\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tВы пока еще не создавали стикеры\n\t\t\t\t\t\t\t\t</Placeholder>}\n\t\t\t\t\t\t</PullToRefresh>\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>\n\t\t\t</Epic>\n\t\t);\n\t}\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}