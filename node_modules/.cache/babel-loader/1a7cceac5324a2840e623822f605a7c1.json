{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Admin\\\\NodeProjects\\\\Miner\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import bridge from'@vkontakte/vk-bridge';import'@vkontakte/vkui/dist/vkui.css';import'./App.css';import eruda from'eruda';import{Panel,PanelHeader,Div,Footer,View,ScreenSpinner,ModalPage,ModalCard,ModalRoot,ModalPageHeader,List,Cell,CellButton,InfoRow,Progress,Gallery,Counter,FormLayout,Input,Placeholder,Snackbar,Avatar,Group,Alert,Epic,Tabbar,TabbarItem,Card,CardGrid,Link,Tooltip,Tabs,TabsItem,platform,IOS,PanelHeaderSimple,PanelHeaderContent,PanelHeaderContext}from'@vkontakte/vkui';import Icon24Write from'@vkontakte/icons/dist/24/write';import Icon16Dropdown from'@vkontakte/icons/dist/16/dropdown';import{CardButton}from\"./components/CardButton\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={activePanel:'main',mainContextOpened:false,popout:React.createElement(ScreenSpinner,null),user:{first_name:'',last_name:'',photo_100:''},end:0,cardsMap:[],cards:null,maxCards:30,gold:'https://i.ibb.co/kHKsYbz/gold.png',emerald:'https://i.ibb.co/6bpJt6Y/emerald.png',iron:'https://i.ibb.co/KLs7Pjb/iron.png',cobblestone:'https://i.ibb.co/mvvLWTF/cobblestone.png'};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.initializeApp=_this.initializeApp.bind(_assertThisInitialized(_this));_this.setCards=_this.setCards.bind(_assertThisInitialized(_this));_this.toggleMainContext=_this.toggleMainContext.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;eruda.init({tool:['console']});bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;console.log(type,data);if(type==='VKWebAppUpdateConfig'){var schemeAttribute=document.createAttribute('scheme');schemeAttribute.value=data.scheme?data.scheme:'client_light';document.body.attributes.setNamedItem(schemeAttribute);}else if(type==='VKWebAppGetUserInfoResult'){_this2.setState({popout:null,user:data});_this2.initializeApp();}});bridge.send('VKWebAppGetUserInfo');}},{key:\"initializeApp\",value:function initializeApp(){var _this3=this;this.setCards();setInterval(function(){if(_this3.state.activePanel==='mine'){var end=_this3.state.end-1;_this3.setState({end:end});if(end<0){_this3.setCards();}}},1000);}},{key:\"randInt\",value:function randInt(min,max){return Math.floor(Math.random()*Math.floor(max+1))+min;}},{key:\"setCards\",value:function setCards(){var _this4=this;this.setState({end:5});var cardsMap=[];for(var i=0;i<this.state.maxCards;i++){cardsMap.push(i);}this.setState({cardsMap:cardsMap});var cards=[];var _this$state=this.state,cobblestone=_this$state.cobblestone,iron=_this$state.iron,emerald=_this$state.emerald,gold=_this$state.gold;for(var i=1;i<=this.state.maxCards;i++){var ore1=this.randInt(0,1);var resource=i%this.randInt(i,this.state.maxCards-i)===0?ore1===0?gold:emerald:ore1===0?cobblestone:iron;var card=React.createElement(\"div\",{className:\"card\",id:\"card_\"+(i-1)+'_'+resource,onClick:function onClick(e){var cards=_this4.state.cards;var id=e.currentTarget.id.split('_');cards[id[1]]=React.createElement(\"div\",{className:\"card\"});_this4.setState({cards:cards});},style:{width:50,height:50}},React.createElement(\"div\",{className:\"card_content\"},\" \",React.createElement(\"img\",{src:resource,style:{height:\"80%\"}})));cards.push(card);}this.setState({cards:cards});}},{key:\"toggleMainContext\",value:function toggleMainContext(){this.setState({mainContextOpened:!this.state.mainContextOpened});}},{key:\"render\",value:function render(){var _this5=this;return React.createElement(View,{activePanel:this.state.activePanel,popout:this.state.popout,header:false},React.createElement(Panel,{id:\"main\"},React.createElement(PanelHeaderSimple,null,React.createElement(PanelHeaderContent,{aside:React.createElement(Icon16Dropdown,{style:{transform:\"rotate(\".concat(this.state.mainContextOpened?'180deg':'0',\")\")}}),before:React.createElement(Avatar,{size:36,src:this.state.user.photo_100}),onClick:function onClick(){_this5.toggleMainContext();}},this.state.user.first_name+' '+this.state.user.last_name)),React.createElement(PanelHeaderContext,{opened:this.state.mainContextOpened,onClose:function onClose(){_this5.toggleMainContext();}},React.createElement(List,null,React.createElement(Cell,{before:React.createElement(Icon24Write,null),onClick:function onClick(){_this5.toggleMainContext();}},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043D\\u0438\\u043A\"))),React.createElement(Div,null,React.createElement(CardButton,{title:\"\\u0428\\u0430\\u0445\\u0442\\u0430\",desc:\"\\u0414\\u043E\\u0431\\u044B\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u044B \\u0432\\u043C\\u0435\\u0441\\u0442\\u0435 \\u0441 \\u0434\\u0440\\u0443\\u0433\\u0438\\u043C\\u0438 \\u0438\\u0433\\u0440\\u043E\\u043A\\u0430\\u043C\\u0438 \\u043F\\u043E \\u0431\\u043B\\u0438\\u0437\\u043E\\u0441\\u0442\\u0438.\",bg:\"linear-gradient(71deg, #439ce0, #75b2e0)\",img:\"https://i.ibb.co/bXzgD6b/icon-mine.png\",goRef:function goRef(){}}),React.createElement(CardButton,{title:\"\\u041A\\u0440\\u0430\\u0444\\u0442\",desc:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0432\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442\\u044B \\u0438\\u0437 \\u0441\\u0432\\u043E\\u0438\\u0445 \\u0434\\u043E\\u0431\\u044B\\u0442\\u044B\\u0445 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u043E\\u0432, \\u043F\\u0435\\u0440\\u0435\\u043F\\u043B\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435 \\u0440\\u0443\\u0434\\u0443.\",bg:\"linear-gradient(251deg, #306fb8, #1f5899)\",img:\"https://i.ibb.co/VTrRnFj/icon-craft.png\",goRef:function goRef(){}}),React.createElement(CardButton,{title:\"\\u0418\\u043D\\u0432\\u0435\\u043D\\u0442\\u0430\\u0440\\u044C\",desc:\"\\u0421\\u0432\\u043E\\u0438 \\u0434\\u043E\\u0431\\u044B\\u0442\\u044B\\u0435 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u044B \\u0438 \\u043E\\u0441\\u0442\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442\\u044B \\u043D\\u0430\\u0445\\u043E\\u0434\\u044F\\u0442\\u0441\\u044F \\u0437\\u0434\\u0435\\u0441\\u044C.\",bg:\"linear-gradient(71deg, #65aae6, #8fceff)\",img:\"https://i.ibb.co/VTrRnFj/icon-craft.png\",goRef:function goRef(){}}))),React.createElement(Panel,{id:\"mine\"},React.createElement(PanelHeader,null,\"\\u0428\\u0430\\u0445\\u0442\\u0430\"),React.createElement(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}},React.createElement(\"div\",{className:\"grid\"},this.state.cards)),React.createElement(Div,null,React.createElement(Footer,null,\"\\u0414\\u043E \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438: \",this.state.end))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/Admin/NodeProjects/Miner/src/App.js"],"names":["React","bridge","eruda","Panel","PanelHeader","Div","Footer","View","ScreenSpinner","ModalPage","ModalCard","ModalRoot","ModalPageHeader","List","Cell","CellButton","InfoRow","Progress","Gallery","Counter","FormLayout","Input","Placeholder","Snackbar","Avatar","Group","Alert","Epic","Tabbar","TabbarItem","Card","CardGrid","Link","Tooltip","Tabs","TabsItem","platform","IOS","PanelHeaderSimple","PanelHeaderContent","PanelHeaderContext","Icon24Write","Icon16Dropdown","CardButton","App","props","state","activePanel","mainContextOpened","popout","user","first_name","last_name","photo_100","end","cardsMap","cards","maxCards","gold","emerald","iron","cobblestone","componentDidMount","bind","initializeApp","setCards","toggleMainContext","init","tool","subscribe","detail","type","data","console","log","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","setState","send","setInterval","min","max","Math","floor","random","i","push","ore1","randInt","resource","card","e","id","currentTarget","split","width","height","transform","display","alignItems","justifyContent","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './App.css'\nimport eruda from 'eruda';\n\nimport { Panel, PanelHeader, Div , Footer, View , ScreenSpinner , ModalPage , ModalCard , ModalRoot , ModalPageHeader\n\t, List , Cell , CellButton , InfoRow , Progress , Gallery , Counter , FormLayout , Input , Placeholder , Snackbar , Avatar , Group , Alert, Epic, Tabbar, TabbarItem, Card, CardGrid, Link\n\t, Tooltip , Tabs , TabsItem, platform, IOS, PanelHeaderSimple, PanelHeaderContent, PanelHeaderContext  } from '@vkontakte/vkui';\nimport Icon24Write from '@vkontakte/icons/dist/24/write';\nimport Icon16Dropdown from '@vkontakte/icons/dist/16/dropdown';\n\nimport { CardButton } from \"./components/CardButton\";\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'main',\n\t\t\tmainContextOpened: false,\n\t\t\tpopout: <ScreenSpinner/>,\n\n\t\t\tuser: {\n\t\t\t\tfirst_name: '',\n\t\t\t\tlast_name: '',\n\t\t\t\tphoto_100: ''\n\t\t\t},\n\t\t\tend: 0,\n\t\t\tcardsMap: [],\n\t\t\tcards: null,\n\t\t\tmaxCards: 30,\n\t\t\tgold: 'https://i.ibb.co/kHKsYbz/gold.png',\n\t\t\temerald: 'https://i.ibb.co/6bpJt6Y/emerald.png',\n\t\t\tiron: 'https://i.ibb.co/KLs7Pjb/iron.png',\n\t\t\tcobblestone: 'https://i.ibb.co/mvvLWTF/cobblestone.png'\n\t\t};\n\n\t\tthis.componentDidMount = this.componentDidMount.bind(this);\n\t\tthis.initializeApp = this.initializeApp.bind(this);\n\t\tthis.setCards = this.setCards.bind(this);\n\t\tthis.toggleMainContext = this.toggleMainContext.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\teruda.init({ tool: ['console'] });\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tconsole.log(type, data);\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t} else if (type === 'VKWebAppGetUserInfoResult'){\n\t\t\t\tthis.setState({ popout: null, user: data });\n\t\t\t\tthis.initializeApp();\n\t\t\t}\n\t\t});\n\t\tbridge.send('VKWebAppGetUserInfo');\n\t}\n\n\tinitializeApp() {\n\t\tthis.setCards();\n\t\tsetInterval(()=>{\n\t\t\tif(this.state.activePanel === 'mine'){\n\t\t\t\tvar end = this.state.end-1;\n\t\t\t\tthis.setState({end});\n\t\t\t\tif(end<0){\n\t\t\t\t\tthis.setCards();\n\t\t\t\t}\n\t\t\t}\n\t\t},1000);\n\t}\n\n\trandInt(min, max) {\n\t\treturn Math.floor(Math.random() * Math.floor(max+1))+min;\n\t}\n\n\tsetCards() {\n\t\tthis.setState({ end: 5 });\n\t\tvar cardsMap = [];\n\t\tfor(var i = 0; i < this.state.maxCards; i++){\n\t\t\tcardsMap.push(i);\n\t\t}\n\t\tthis.setState({ cardsMap});\n\t\tvar cards = [];\n\n\t\tconst { cobblestone, iron, emerald, gold } = this.state;\n\t\tfor(var i = 1; i <= this.state.maxCards; i++){\n\t\t\tvar ore1 = this.randInt(0,1);\n\t\t\tvar resource = i%this.randInt(i, this.state.maxCards-i)===0 ? (ore1===0 ? gold : emerald) : (ore1===0 ? cobblestone : iron);\n\t\t\tvar card = <div className={\"card\"} id={\"card_\"+(i-1)+'_'+resource} onClick={(e)=> {\n\t\t\t\tvar cards = this.state.cards;\n\t\t\t\tvar id = e.currentTarget.id.split('_');\n\t\t\t\tcards[id[1]] = <div className={\"card\"}/>;\n\t\t\t\tthis.setState({cards: cards});\n\t\t\t}} style={{ width: 50, height: 50}}><div className={\"card_content\"}> <img src={resource} style={{height: \"80%\"}}/></div></div>;\n\t\t\tcards.push(card);\n\t\t}\n\t\tthis.setState({ cards });\n\t}\n\n\ttoggleMainContext () {\n\t\tthis.setState({ mainContextOpened: !this.state.mainContextOpened });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout} header={false}>\n\t\t\t\t<Panel id=\"main\">\n\t\t\t\t\t<PanelHeaderSimple>\n\t\t\t\t\t\t<PanelHeaderContent\n\t\t\t\t\t\t\taside={<Icon16Dropdown style={{ transform: `rotate(${this.state.mainContextOpened ? '180deg' : '0'})` }} />}\n\t\t\t\t\t\t\tbefore={<Avatar size={36} src={this.state.user.photo_100} />}\n\t\t\t\t\t\t\tonClick={ () => { this.toggleMainContext(); }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.state.user.first_name + ' ' + this.state.user.last_name}\n\t\t\t\t\t\t</PanelHeaderContent>\n\t\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t\t<PanelHeaderContext opened={this.state.mainContextOpened} onClose={ () => { this.toggleMainContext(); }}>\n\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\tbefore={<Icon24Write/>}\n\t\t\t\t\t\t\t\tonClick={ () => { this.toggleMainContext(); }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tИзменить ник\n\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</PanelHeaderContext>\n\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<CardButton\n\t\t\t\t\t\t\ttitle='Шахта'\n\t\t\t\t\t\t\tdesc='Добывайте ресурсы вместе с другими игроками по близости.'\n\t\t\t\t\t\t\tbg='linear-gradient(71deg, #439ce0, #75b2e0)'\n\t\t\t\t\t\t\timg='https://i.ibb.co/bXzgD6b/icon-mine.png'\n\t\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CardButton\n\t\t\t\t\t\t\ttitle='Крафт'\n\t\t\t\t\t\t\tdesc='Создавайте предметы из своих добытых ресурсов, переплавляйте руду.'\n\t\t\t\t\t\t\tbg='linear-gradient(251deg, #306fb8, #1f5899)'\n\t\t\t\t\t\t\timg='https://i.ibb.co/VTrRnFj/icon-craft.png'\n\t\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<CardButton\n\t\t\t\t\t\t\ttitle='Инвентарь'\n\t\t\t\t\t\t\tdesc='Свои добытые ресурсы и остальные предметы находятся здесь.'\n\t\t\t\t\t\t\tbg='linear-gradient(71deg, #65aae6, #8fceff)'\n\t\t\t\t\t\t\timg='https://i.ibb.co/VTrRnFj/icon-craft.png'\n\t\t\t\t\t\t\tgoRef={ () => {  } }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Div>\n\t\t\t\t</Panel>\n\t\t\t\t<Panel id=\"mine\">\n\t\t\t\t\t<PanelHeader>Шахта</PanelHeader>\n\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n\t\t\t\t\t\t<div className={\"grid\"}>\n\t\t\t\t\t\t\t{this.state.cards}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Footer>\n\t\t\t\t\t\t\tДо перезагрузки: {this.state.end}\n\t\t\t\t\t\t</Footer>\n\t\t\t\t\t</Div>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}